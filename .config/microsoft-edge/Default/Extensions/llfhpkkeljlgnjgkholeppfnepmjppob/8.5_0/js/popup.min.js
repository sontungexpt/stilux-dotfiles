const versionElName="#js-ext-version",selectThemeElName='#js-select-theme input:radio[name="theme"]',selectFontElName="#js-select-font",manifestData=window.zadark.browser.getManifest();$(versionElName).html(`Phiên bản ${manifestData.version}`),window.zadark.utils.refreshPageTheme(),window.zadark.utils.refreshPageFont(),window.zadark.browser.getExtensionSettings().then(({theme:e,font:n})=>{$(selectThemeElName).filter(`[value="${e}"]`).attr("checked",!0),$(selectFontElName).val(n)}),$(selectThemeElName).on("change",async function(){const e=$(this).val();await window.zadark.browser.saveExtensionSettings({theme:e}),window.zadark.utils.refreshPageTheme(),window.zadark.browser.sendMessage2ZaloTabs("@ZaDark:CHANGE_THEME",{theme:e})}),$(selectFontElName).on("change",async function(){const e=$(this).val();await window.zadark.browser.saveExtensionSettings({font:e}),window.zadark.browser.sendMessage2ZaloTabs("@ZaDark:CHANGE_FONT",{font:e})});const panelPrivacyElName="#js-panel-privacy",isSupportPrivacy=window.zadark.utils.getIsSupportPrivacy();if(isSupportPrivacy){const e="#js-switch-block-typing",n="#js-switch-block-seen",s="#js-switch-block-delivered";window.zadark.browser.getEnabledBlockingRuleIds().then(a=>{$(e).prop("checked",a.includes("rules_block_typing")),$(n).prop("checked",a.includes("rules_block_seen")),$(s).prop("checked",a.includes("rules_block_delivered"))});const a=function(e,n){return function(){const s=$(e).is(":checked");window.zadark.browser.updateEnabledBlockingRuleIds(s?{enableRuleIds:[n]}:{disableRuleIds:[n]})}};$(e).on("change",a(e,"rules_block_typing")),$(n).on("change",a(n,"rules_block_seen")),$(s).on("change",a(s,"rules_block_delivered"))}else $(panelPrivacyElName).hide();