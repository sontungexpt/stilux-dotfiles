(self.webpackChunk=self.webpackChunk||[]).push([[7272],{48081:(e,t,i)=>{i.d(t,{O:()=>j});var a=i(57050),s=i(35214),r=i(40327),n=i(65060),d=i(33817),o=i(18055),l=i(35108),c=i(77176),u=i(40151),m=i(2834),p=i(55415),h=i(5114),v=i(22232),S=i(34217),f=i(27378),I=i(50474),g=i(64757),A=i(31278),y=i(3656),C=i(28706),b=i(26027),w=i(15646),k=i(74754),R=i(66346),q=i(76974),_=i(19703),E=i(16314),F=i(35501),x=i(45740),T=i(57837);const U=S.UI.Node.make((({state:e,notify:t})=>{const i=f.useContext(I.m.Context);return f.createElement(_.F.Fragment,null,e.pipe(c.U((e=>(0,a.zG)(e.details,h.fold((()=>f.createElement("div",null)),(()=>f.createElement(g.zx.Tertiary,{key:"toggle-more",name:(0,R.hC)(e.visualState,i),title:(0,R.hC)(e.visualState,i),onClick:C.hz(t({type:w.eI.Kind.startTransitionTo,id:e.id,transition:{type:b.X.isCardOpen(e.visualState)?"focused":"expanded",clockwise:!0}}))},b.X.isCardOpen(e.visualState)?f.createElement(A.JO.Arrow,{key:"more",className:T.lessIcon}):f.createElement(A.JO.QuestionMark,{key:"expand"}),(0,R.hC)(e.visualState,i)))))))))})),B=S.UI.Node.make((({notify:e})=>f.createElement(g.zx.Tertiary,{name:"dismiss",title:"Dismiss",onClick:C.hz(e({type:E.Dy.ignoreButtonClick}))},f.createElement(A.JO.Ignore,null)))),O=S.UI.Node.make((({state:e})=>f.createElement(_.F.Fragment,null,e.pipe(c.U((e=>(0,a.zG)(e.details,h.fold(a.gn,(t=>f.createElement(R.G3,{key:"card-actions-details",visualState:e.visualState,className:T.more},f.createElement(y.XY,{className:T.minimalDescription,...k.y.renderToHtml(t)}))))))))))),z=S.UI.Node.make((({notify:e})=>f.createElement(g.zx.Flat,{className:T.feedbackFooter,name:"attention-score-card-open-feedback-form",onClick:C.hz(e({type:E.Dy.feedbackButtonClick}))},f.createElement("span",null,"Anything we can improve?"),f.createElement(A.JO.OpenFeedbackFormArrow,null)))),N=S.UI.Node.make((({state:e,notify:t})=>f.createElement(_.F.Fragment,null,e.pipe(c.U((e=>f.createElement(g.zx.Primary,{name:"readersAttentionItem-view-more",onClick:C.hz(t({type:E.Dy.viewMoreButtonClick,item:e})),className:T.viewMoreButton},"See suggestions"))))))),G=S.UI.Knot.make(S.UI.Grid.make((({slots:e})=>f.createElement(_.F.div,{className:x.card,"data-name":"attention-score-card-full"},e.header,f.createElement(_.F.div,{className:T.cardBody},e.content,e.details,f.createElement("div",{className:T.actions},e.viewMoreButton)),f.createElement(_.F.div,{className:T.actionsFooter},e.expandButton,e.dismissButton),e.feedbackFooter))),{header:(0,F.h)("full"),content:F.r,details:O,expandButton:U,dismissButton:B,viewMoreButton:N,feedbackFooter:z}),D=e=>S.Z.composeKnot({header:()=>e,content:()=>e.pipe(c.U((e=>({attentionScore:e.attentionScore,attentionScoreDescription:e.description})))),details:()=>e,expandButton:()=>e,dismissButton:()=>q.of(null),viewMoreButton:S.Z.fromSideEffect(a.Q1,e),feedbackFooter:()=>q.of(null)});var Q=i(12187),P=i(57561);const X=S.UI.Knot.make(S.UI.Grid.make((({slots:e,notify:t})=>f.createElement(_.F.div,{"data-name":"attention-score-card-mini",onClick:C.hz(t({type:E.Dy.miniCardClick,id:n.g.id})),...(0,Q.Sh)(x.card,P.miniCard)},e.header))),{header:(0,F.h)("mini")}),W=e=>S.Z.composeKnot({root:S.Z.fromSideEffect(a.Q1,null),header:()=>e});var L;!function(e){const t=S.UI.Union.make("kind",{mini:X,full:G,hidden:S.UI.Node.empty}),i=e=>({mini:W(e.pipe(c.U((e=>({title:e.view.title,attentionScore:e.view.attentionScore,density:e.density}))))),full:D(e.pipe(c.U(p.ei("view")))),hidden:()=>u.E}),s=d.G.make(t);function r(e){switch(e){case"added":case"rendered":return"mini";case"focused":case"expanded":return"full";case"hidden":case"removed":return"hidden";case"presuccess":case"success":case"feedback_form":case"muted":throw new Error(`${e} is not supported for ReadersAttentionCard`);default:(0,v.vE)(e)}}e.Card=S.UI.Node.make((({state:e,notify:t})=>S.UI.mount(s,(0,a.zG)(o.g.flow(e.pipe(c.U(p.ei("view"))),(0,a.zG)((e=>S.Z.composeUnion(i(e),(()=>e.pipe(c.U((e=>({kind:r(e.view.visualState.transition.type)})))))))(e),S.Z.extendActions(m.b((e=>t(e.action.action)())))),(e=>S.Z.composeUnion(i(e),(()=>e.pipe(c.U((e=>({kind:(0,a.zG)(e.view.visualState.from,h.fold((()=>"mini"),r))})))))))(e),p.ei("id"),l.CE.toOption(l.a)),o.g.extend((e=>t(e)()))))))}(L||(L={}));var M=i(48521),H=i(16892);const Z=e=>t=>({...t,positionState:e}),V=e=>t=>({...t,visualState:e});var j,K=i(66896),Y=i(22373),J=i(7910),$=i(49978),ee=i(34574),te=i(98752),ie=i(17594),ae=i(91549),se=i(20594),re=i(86775),ne=i(77610),de=i(15215),oe=i(70100),le=i(47306),ce=i(35416),ue=i(6100),me=i(8125),pe=i(45701),he=i(83078),ve=i(73975),Se=i(85715);!function(e){function t(e,t,i,a,s){return ce.nL.Items.mapper((e=>e.kind),{[b.X.Kind]:e,[ae.R.Kind]:t,[oe.X.kind]:i,[le.J.kind]:a,[n.g.kind]:s})}function i(e){return e.kind===b.X.Kind}function d(e){return e.kind===ae.R.Kind}function o(e){return i(e)&&ne.C.isEthicalAIItem(e)}function l(e){return d(e)&&ne.C.isEthicalAIItem(e)}function c(e,i){return{viewState:(a,s)=>t((t=>({view:t,isLastCard:a,kind:"alertCard",visibleViewportHeight:e(s)})),(t=>({view:t,isLastCard:a,kind:"alertsBundle",visibleViewportHeight:e(s)})),(e=>({view:e,kind:"checklistItemEmpty"})),(t=>({view:t,kind:"checklistItemWithAlerts",isLastCard:a,visibleViewportHeight:e(s)})),(e=>({density:i()===K.R.SpecialId.AllAlerts?"normal":"compact",view:e,kind:"readersAttentionItem"})))}}e.isSelectableWithAlertItem=(0,me.Kg)(i,d,de.d.isChecklistItemWithAlerts),e.getActiveItemWithAlert=ce.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=ce.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveFocusableItem=ce.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isAlertsBundle=d,e.isEthicalAIAlertCard=o,e.isEthicalAIAlertsBundle=l,e.defaultOrd=(0,s.fold)(pe.getMonoid())([(0,r.pipe)(pe.ordBoolean,pe.contramap((0,me.ff)(o))),(0,r.pipe)(pe.ordBoolean,pe.contramap(n.m)),pe.fromCompare(((e,t)=>i(e)&&i(t)?b.X.ord.compare(e,t):0))]),e.bundlesOrd=(0,s.fold)(pe.getMonoid())([(0,r.pipe)(pe.ordBoolean,pe.contramap((0,me.ff)(l))),(0,r.pipe)(pe.ordBoolean,pe.contramap(n.m)),pe.fromCompare(((e,t)=>d(e)&&d(t)?ae.R.ord.compare(e,t):0))]),e.item=e=>Se.UI.Union.make("kind",{alertCard:Y.p.Card(e),alertsBundle:$.Q.Card(e),checklistItemEmpty:ee.z.Card(e),checklistItemWithAlerts:te.fw.Card(e),readersAttentionItem:L.Card}),e.viewState=c,e.createCardListFlow=e=>(0,J.sJ)((t=>(0,r.pipe)(e,he.bw((e=>e.actions.next(t.action)))))),e.listItemOrd=e=>pe.contramap((e=>e.cell.item.view))(e).compare;const u={equals:(e,t)=>e.kind===t.kind&&H.s.eqById.equals(e,t)},m=(e,t,i,a,s)=>({equals:(r,d)=>{const o={[b.X.Kind]:e,[ae.R.Kind]:t,[oe.X.kind]:i,[le.J.kind]:a,[n.g.kind]:s};return u.equals(r,d)&&function(e,t){return(i,a)=>t[e(i)].equals(i,a)}((e=>e.kind),o)(r,d)}}),p=(0,s.fold)(ve.uZ())([M.o.eq,H.s.verticalPositionEq,u]);function v(e,i){const a=b.X.Capabilities.getChangePosition(e);return{changePosition:e=>t(a.changePosition(e),ae.R.changePosition(e),oe.X.changePositionState(e),i.changePositionState(e),Z(e))}}function S(e,i,a){const s=b.X.Capabilities.getAnimatable(e),r=ae.R.Capabilities.getAnimatable(a);return{completeTransition:e=>{return t(s.completeTransition(e),r.completeTransition(e),oe.X.completeTransition(e),i.completeTransition(e),(a=e,e=>({...e,visualState:M.o.VisualState.complete(e.visualState,a)})));var a},transitionTo:e=>t(s.transitionTo(e),r.transitionTo(e),oe.X.transitionTo(e),i.transitionTo(e),(e=>t=>({...t,visualState:M.o.VisualState.to(t.visualState,e)}))(e)),changeVisualState:e=>t(s.changeVisualState(e),r.changeVisualState(e),oe.X.changeVisualState(e),i.changeVisualState(e),V(e))}}function f(e,i,s,n,d){const o=ae.R.getCardHydrator(d),l=ae.R.getSelect(s,n,o),c=ae.R.getSelectByAlert(s,n,o),u=b.X.Capabilities.getSelect(e);return{select:(e,s)=>t(u.select(e,s),l(e,s),oe.X.select(e),i.selectFirstAlert((0,a.MZ)(e),s),function(e,t){return i=>{const s=(0,r.pipe)(e,h.map((e=>t.compare(i,e)>0)),h.getOrElse(a.W8)),n=(0,r.pipe)(e,h.exists((e=>e.id===i.id))),d=n&&b.X.isCardOpen(i.visualState)?"expanded":"focused",o=(0,r.pipe)(e,h.fold((()=>M.o.VisualState.initial({type:d,clockwise:s})),(e=>M.o.VisualState.to(i.visualState,{type:d,clockwise:s}))));return(0,r.pipe)(i,n?a.yR:Z(H.s.PositionState.invalidateHeight(i.positionState)),V(o))}}(e,s)),selectByAlert:(e,s,r)=>t(u.selectByAlert(e,s,r),c(s,e,r),oe.X.select(e),i.selectByAlert(s,(0,a.MZ)(e),r),a.yR),unselect:(e,s)=>t(u.unselect((0,a.MZ)(e),s),ae.R.unselect((0,a.MZ)(e),s),oe.X.unselect(e),i.unselect((0,a.MZ)(e),s),function(e,t){return i=>{const s=(0,r.pipe)(e,h.map((e=>t.compare(i,e)>0)),h.getOrElse(a.W8)),n=(0,r.pipe)(e,h.exists((e=>e.id===i.id)));return(0,r.pipe)(i,n?a.yR:Z(H.s.PositionState.invalidateHeight(i.positionState)),M.o.isHidden(i)?a.yR:V(M.o.VisualState.to(i.visualState,{type:"rendered",clockwise:s})))}}(e,s))}}function I(e,s,r,n,o,l){return{removeAlertFromItem:(c,u)=>t((t=>b.X.Capabilities.getRemoveAlerts(e,u.itemsOrd)(c,ce.In.getActiveItemOfType(i)(u))(t)),(e=>ae.R.Capabilities.getRemoveAlertsCapability(n,o,l,u.itemsOrd)(c,ce.In.getActiveItemOfType(d)(u))(e)),a.yR,(e=>re.G.getRemoveAlert(s,r,n).removeAlertFromItem(c,u)(e)),a.yR)}}function g(e,i,s,r){const n=b.X.Capabilities.getRemove(e);return{remove:(e,d)=>t(n.remove(e,d),(t=>e(t)?ae.R.Capabilities.getRemove(s,r)([t.activeAlert],d(t))(t):t),a.yR,(t=>e(t)?i.removeAlerts(t.alerts,d(t))(t):t),a.yR)}}function A(e,i,s,r){const n=b.X.Capabilities.getUpdateWithAlert(e),d=ae.R.Capabilities.getUpdatableWithAlertsCapability(i,r);return{updateWithAlerts:e=>t(n.updateWithAlerts(e),d(e),a.yR,s.updateWith(e),a.yR)}}e.equatable={structEq:m(b.X.eq,ae.R.eq,oe.X.eq,le.J.eq,n.g.eq),idEq:m(u,u,u,u,u),visualStateEq:m(p,p,p,p,p)},e.changePosition=v,e.disposable={isScheduledToDispose:t((e=>ne.C.willBeDisposed(e,e.removedAlertsIds)),(e=>ne.C.willBeDisposed(e,e.removedAlertsIds)),a.jv,(e=>ne.C.willBeDisposed(e,e.removedAlertsIds)),a.jv)},e.hidable={isHidden:t(M.o.isHidden,M.o.isHidden,M.o.isHidden,M.o.isHidden,M.o.isHidden)},e.animatableItem=S,e.hasAlertsQueries={isSelectableByAlert:e=>t(ne.C.hasAlert(e.alert.id),ne.C.hasAlert(e.alert.id),a.jv,ne.C.hasAlert(e.alert.id),a.jv),hasAlert:e=>t(ne.C.hasAlert(e),ne.C.hasAlert(e),a.jv,ne.C.hasAlert(e),a.jv),hasActiveAlert:t(ne.C.hasActiveAlert,ne.C.hasActiveAlert,(()=>h.none),ne.C.hasActiveAlert,(()=>h.none))},e.changePositionStrategyQueries={useReferenceHeightOnRemove:t(a.jv,a.jv,a.jv,a.W8,a.jv)},e.select=f,e.removeAlert=I,e.remove=g,e.updateWithAlert=A,e.releaseAlert=(t,i,a,s,r,n)=>ue.v.Capabilities.getAlertReleaser({...I(t,i,a,s,r,n),...e.disposable}),e.unselectable=(e,t,i,a,s)=>ue.v.Capabilities.getUnselectable(ce.In.getActiveItem,f(e,t,i,a,s)),e.selectableByAlert=(t,i,a,s,r)=>ue.v.Capabilities.getSelectableByAlert(ce.In.getActiveItem,{...e.hasAlertsQueries,...f(t,i,a,s,r),...ue.v.Capabilities.getHasChecksFeed()}),e.selectableById=(e,t,i,a,s)=>ue.v.Capabilities.getSelectableById(ce.In.getActiveItem,f(e,t,i,a,s)),e.updateMeta=()=>({updateMeta:ue.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=(e,t,i,a,s,r)=>ue.v.Capabilities.getAnimatable(e,{...I(e,t,i,a,s,r),...S(e,t,r),...ue.v.Capabilities.getHasChecksFeed()}),e.hasPriorityToggle=(t,i,a)=>ue.v.WithPriority.getHasPriorityToggle({...S(t,i,a),...e.hasAlertsQueries,...e.disposable});const y=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function C(e,i){const a=se.Mq.getCardSelections(i);return{nextAlert:t(a.nextAlert,a.nextAlert,(()=>h.none),e.nextAlert,(()=>h.none)),prevAlert:t(a.prevAlert,a.prevAlert,(()=>h.none),e.prevAlert,(()=>h.none))}}function w(){return{updateUserInput:e=>t(b.X.updateUserInput(e),ae.R.changeUserInput(e),a.yR,a.yR,a.yR)}}e.alignable={isValidToAlign:t(y,y,a.jv,y,a.jv)},e.alertIterator=C,e.itemReleaser=(e,t,i)=>re.G.getItemReleaser(e,t,i,ue.v.Capabilities.getItemReleaser()),e.hasAlerts=ue.v.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>(0,me.W9)(e.isSelectableWithAlertItem,(i=>!e.disposable.isScheduledToDispose(i)&&(0,r.pipe)(i,e.hasAlertsQueries.hasActiveAlert,h.map((e=>t.isRegistered(e.alert.id))),h.getOrElse(a.jv)))),e.hasUserInput=w,e.priorityTest=(0,me.W9)(i,(e=>ie.$.isPriority(e.activeAlert))),e.verifiable=()=>ue.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>{const e=H.s.Capabilities.getPojoCloneable().clone;return{clone:t(b.X.Capabilities.getCloneable().clone,e,e,e,e)}},e.getCapabilities=function(t,i,s,r,n,d,o,l=(0,a.a9)(h.none),u=se.IG.Default){return{...c(l,o),...e.disposable,...e.hidable,...e.equatable,...w(),...e.cloneable(),...v(t,s),...S(t,s,n),...f(t,s,r,u,n),...g(t,s,u,n),...I(t,s,d,r,u,n),...A(t,i,s,n),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t,s,d,r,u,n),...e.unselectable(t,s,r,u,n),...e.selectableByAlert(t,s,r,u,n),...e.selectableById(t,s,r,u,n),...e.updateMeta(t),...e.animatableFeed(t,s,d,r,u,n),...e.hasPriorityToggle(t,s,n),...e.itemReleaser(s,d,r),...e.verifiable(),...e.cloneable(),...e.hasAlerts(C(s,r),r,(()=>e.isSelectableWithAlertItem),{...e.hasAlertsQueries,...e.disposable})}}}(j||(j={}))},65060:(e,t,i)=>{i.d(t,{g:()=>a,m:()=>m});var a,s=i(57050),r=i(37539),n=i(36156),d=i(16892),o=i(48521),l=i(4890),c=i(73975),u=i(5114);function m(e){return e.id===a.id}!function(e){e.id="ReadersAttentionItemId",e.kind="ReadersAttentionItem",e.eq=c.f7(((e,t)=>e.hashCode()===t.hashCode()&&d.s.PositionState.eq.equals(e.positionState,t.positionState)&&o.o.VisualState.eq.equals(e.visualState,t.visualState))),e.hashCodeOwnFields=e=>(0,n.NO)({title:e.title,description:e.description,details:(0,s.zG)(e.details,u.fold((()=>"none"),(e=>`some(${e})`))),attentionScore:r.T.prism.reverseGet(e.attentionScore)}),e.hashCode=e.hashCodeOwnFields,e.create=function(t,i,a){return{id:e.id,kind:e.kind,renderOptions:{...l.j.defaultOptions,layoutDensity:l.j.Density.minimal},positionState:i,visualState:a,title:t.title,description:t.description,details:t.details,attentionScore:t.attentionScore,equals(t){return e.eq.equals(this,t)},hashCode(){return e.hashCode(this)}}}}(a||(a={}))},16314:(e,t,i)=>{var a;function s(e){return e.type===a.miniCardClick}function r(e){return e.type===a.ignoreButtonClick}function n(e){return e.type===a.viewMoreButtonClick}function d(e){return e.type===a.feedbackButtonClick}i.d(t,{Dy:()=>a,Q:()=>n,RJ:()=>d,Vl:()=>s,l9:()=>r}),function(e){e.miniCardClick="readersAttentionItemMiniCardClick",e.ignoreButtonClick="readersAttentionItemIgnoreButtonClick",e.viewMoreButtonClick="readersAttentionItemViewMoreButtonClick",e.feedbackButtonClick="readersAttentionItemFeedbackButtonClick"}(a||(a={}))},35501:(e,t,i)=>{i.d(t,{h:()=>h,r:()=>v});var a=i(27378),s=i(76457),r=i(3656),n=i(77176),d=i(37539),o=i(8125),l=i(19703),c=i(12187),u=i(34217),m=i(45740);const p=({progress:e})=>a.createElement(l.F.Fragment,null,e.pipe(n.U((e=>a.createElement(s.P,{percentage:d.g.prism.reverseGet(e),colorType:s.P.ColorType.neoBlue,iconSize:s.P.IconSize.extraSmall,theme:{radialProgressBar:m.circleProgress,radialProgressText:m.circleText}}))))),h=e=>u.UI.Node.make((({view:t})=>a.createElement(l.F.div,{...(0,c.Sh)(m.header,t("density").pipe(n.U((e=>"normal"===e)),n.U((0,o.RN)(m.normal,m.compact))))},a.createElement("div",{className:m.progressIcon},a.createElement(p,{progress:t("attentionScore").pipe(n.U(d.g.fromRatio))})),a.createElement(r.XY,{...(0,c.Sh)(m.title,"full"===e?m.full:void 0)},t("title"))))),v=u.UI.Node.make((({view:e})=>a.createElement(a.Fragment,null,a.createElement("div",{className:m.progressContainer,"data-name":"attention-score-progress-bar"},a.createElement(l.F.div,{className:m.progressBar,style:{width:e("attentionScore").pipe(n.U(d.g.fromRatio),n.U(d.g.prism.reverseGet),n.U((e=>`${e}%`)))}},a.createElement(r.XY,{className:m.progressValue,"data-name":"attention-score-progress-value"},e("attentionScore").pipe(n.U(d.g.fromRatio),n.U(d.g.prism.reverseGet),n.U((e=>`${e}%`)))))),a.createElement(r.XY,{className:m.description},e("attentionScoreDescription")))))},68703:(e,t,i)=>{i.r(t),i.d(t,{ShortenItFeature:()=>oe});var a=i(57050),s=i(18347),r=i(48081),n=i(63513),d=i(74660),o=i(79227),l=i(66896),c=i(4390),u=i(14601),m=i(44586),p=i(32952),h=i(77176),v=i(19751),S=i(98403),f=i(24209),I=i(60797),g=i(76974),A=i(41398),y=i(66310),C=i(13444),b=i(80900),w=i(598),k=i(78674),R=i(38194),q=i(85985),_=i(28043),E=i(17594),F=i(77610),x=i(35416),T=i(5114),U=i(73975),B=i(83078),O=i(71249),z=i(38983);var N=i(95572),G=i(90361),D=i(74850),Q=i(5817),P=i(2844),X=i(93508),W=i(67434),L=i(17343);class M{constructor(e,t,i,s,r,n=(0,Q.m9)(1)){this._requestAwaitService=t,this._textChangeBufferEmpty=i,this._capiCheckingState=s,this._capiReadyState=r,this._logger=D.Y.create("ShortenItRequestQueue"),this._subs=new u.w,this._enqueuedAlertIds=new p.xQ,this._typingIdle=z.h.create(!0),this._flushScheduled=z.h.create(!1),this._readyToRequest=P.aj([this._capiCheckingState,this._capiReadyState,this._textChangeBufferEmpty]).pipe(h.U((([e,t,i])=>e===N.Hq.idle&&t===N.kQ.firstTextCheckCompleted&&i)),_.x()),this.state=this._enqueuedAlertIds.pipe(h.U((e=>({alertId:e,kind:"alertId"}))),y.w((e=>P.aj([this._readyToRequest,this._typingIdle]).pipe(h.U((([e,t])=>({readyToRequest:e,typingIdle:t,kind:"status"}))),X.O(e)))),W.R(((e,t)=>"status"===t.kind&&t.typingIdle&&e.buffer.size>0?t.readyToRequest?{buffer:new Set,output:new Set(e.buffer)}:(this._flushScheduled.set(!0),{buffer:e.buffer,output:new Set}):"alertId"===t.kind?{buffer:new Set([...e.buffer,...t.alertId]),output:new Set}:{buffer:e.buffer,output:new Set}),{buffer:new Set,output:new Set}),h.U((e=>e.output)),q.h((e=>e.size>0))),this._subs.add((0,a.zG)(e.contentChanges.async,q.h((e=>e.changes.length>0)),y.w((()=>b.H(n).pipe(L.h(!0),X.O(!1)))),X.O(!0)).subscribe(S.wW(this._typingIdle))),this._subs.add(this._textChangeBufferEmpty.subscribe((e=>{e&&this._flushScheduled.set(!1)}))),this._subs.add(this._flushScheduled.pipe(q.h(G.fQ)).subscribe((()=>{this._textChangeBufferEmpty.get()||(this._logger.debug("flushing changes"),this._requestAwaitService.addRequest(Promise.resolve()))})))}enqueue(e){this._enqueuedAlertIds.next(e)}dispose(){this._subs.unsubscribe()}}var H,Z=i(88921),V=i(23063),j=i(8125),K=i(22232);!function(e){e.isReceived=function(e){return"summaryReceived"===e.kind},e.isNotFound=function(e){return"summaryNotFound"===e.kind}}(H||(H={}));class Y{constructor(e,t,i=D.Y.create("ShortenItRequestState")){this._alertProcessor=e,this._textObserver=t,this.logger=i,this._subs=new u.w,this._requestState=new Map,this._requestStateChanged=new p.xQ,this._invalidationCount=new Map,this.summaryNotFound=this._requestStateChanged.pipe(q.h((e=>{var t;return"summaryNotFound"===(null===(t=this._requestState.get(e))||void 0===t?void 0:t.kind)}))),this.notFoundAfterTextChanged=this._requestStateChanged.pipe(q.h((e=>{var t;return"summaryNotFoundAfterTextChanged"===(null===(t=this._requestState.get(e))||void 0===t?void 0:t.kind)}))),this.responseReceived=this._requestStateChanged.pipe(h.U((e=>(0,a.zG)(T.fromNullable(this._requestState.get(e)),T.filter((0,j.Kg)(H.isNotFound,H.isReceived)),T.map((t=>({id:e,...t})))))),I.oA),this._trackSummaryReceived(),this._trackTextChanges(),this._trackAlertInvalidated(),this._subs.add(this._requestStateChanged.pipe(h.U((e=>({id:e,event:this._requestState.get(e)}))),q.h((e=>!!e.event))).subscribe((({id:e,event:t})=>{const{kind:a,...s}=t;i.trace(`${a} - alert #${e}`,s)})))}get(e){return this._requestState.get(e)}_trackTextChanges(){this._subs.add(this._textObserver.contentChanges.async.subscribe((e=>{if(!e.deltaChange.isEmpty){const e=Array.from(this._requestState.entries()).filter((e=>e[1].kind===d.vQ.SummaryState.requestSent));for(const[t,i]of e)this._requestState.set(t,{...i,textChanged:!0}),this._requestStateChanged.next(t)}})))}onCAPISessionStarted(){this._requestState.clear()}requestFinished(e){const t=this._requestState.get(e);"summaryReceived"!==(null==t?void 0:t.kind)&&((null==t?void 0:t.kind)===d.vQ.SummaryState.requestSent&&t.textChanged?(this._requestState.set(e,{kind:"summaryNotFoundAfterTextChanged",...J(this._requestState.get(e))}),this._requestStateChanged.next(e)):(this._requestState.set(e,{kind:"summaryNotFound",...J(this._requestState.get(e))}),this._requestStateChanged.next(e)))}requestEnqueued(e){const t=this._requestState.get(e);t&&"requestEnqueued"===t.kind||(this._requestState.set(e,{kind:"requestEnqueued",timestamp:performance.now(),retries:"summaryNotFoundAfterTextChanged"===(null==t?void 0:t.kind)?t.retries.concat({requestLatency:t.requestLatency,delayBeforeRequestSubmitted:t.delayBeforeRequestSubmitted}):[]}),this._requestStateChanged.next(e))}requestSubmitted(e){const t=this._requestState.get(e);this._requestState.set(e,{kind:d.vQ.SummaryState.requestSent,timestamp:performance.now(),textChanged:!1,delayBeforeRequestSubmitted:(0,a.zG)(T.fromNullable(this._requestState.get(e)),T.fold((()=>0),$)),retries:"requestEnqueued"===(null==t?void 0:t.kind)?t.retries:[]}),this._requestStateChanged.next(e)}getInvalidationCount(e){return this._invalidationCount.get(e)}_trackAlertInvalidated(){this._subs.add(this._alertProcessor.alerts.changes.pipe(h.U((e=>{const t=e.removedAlerts.map((e=>e.alert)).filter(Z.S.isShortenItAlertWithSummary).map((e=>n.wQ.Id.create(e.id))),i=new Set(e.addedAlerts.filter(Z.S.isShortenItAlertWithoutSummary).map((e=>e.id)));return t.filter((e=>i.has(e)))})),q.h(O.Od)).subscribe((e=>{this.logger.trace("summary invalidated",e),e.forEach((e=>{var t;return this._invalidationCount.set(e,(null!==(t=this._invalidationCount.get(e))&&void 0!==t?t:0)+1)}))})))}_trackSummaryReceived(){const e=this._alertProcessor.alerts.state.pipe(h.U((0,a.ls)(Object.values,Array.from,O.hX(Z.S.isShortenItAlertWithSummary))),V.q(1)),t=this._alertProcessor.alerts.changes.pipe(h.U((e=>e.addedAlerts.concat(e.updatedAlerts).filter(Z.S.isShortenItAlertWithSummary))));this._subs.add(f.T(e,t).subscribe((e=>{e.forEach((e=>{const t=e.id,i={kind:"summaryReceived",...J(this._requestState.get(t))};this._requestState.set(t,i),this._requestStateChanged.next(t)}))})))}dispose(){this._subs.unsubscribe()}}function J(e){return{delayBeforeRequestSubmitted:(0,a.zG)(T.fromNullable(e),T.fold((()=>0),$)),requestLatency:(0,a.zG)(T.fromNullable(e),T.fold((()=>0),ee)),retries:(0,a.zG)(T.fromNullable(e),T.fold((()=>[]),(e=>e.retries)))}}function $(e){switch(e.kind){case"requestEnqueued":return performance.now()-e.timestamp;case"requestSent":case"summaryReceived":case"summaryNotFound":case"summaryNotFoundAfterTextChanged":return e.delayBeforeRequestSubmitted;default:(0,K.vE)(e)}}function ee(e){switch(e.kind){case"requestSent":return performance.now()-e.timestamp;case"summaryReceived":case"summaryNotFound":case"summaryNotFoundAfterTextChanged":return e.requestLatency;case"requestEnqueued":return 0;default:(0,K.vE)(e)}}var te=i(37539),ie=i(15646),ae=i(16118),se=i(85321);function re(e,t,i,a){switch(t.kind){case"summaryResponseReceived":e.shortenItResponseReceived(t.alertInvalidated,t.alertInvalidatedCount,t.capiAlertId,t.cardActiveDuration,t.delayBeforeRequestSubmitted,a,t.requestLatency,i,t.summaryFound);break;case"summaryShow":e.shortenItSummaryShow(t.alertInvalidated,t.alertId,t.capiAlertId,t.compressionRatio,a,t.sentenceCount,t.wordCount,t.numEditsDismissedSinceAlertReceived,t.numEditsOnAlertReceived,t.numEditsOnCardOpen,t.numEditsReviewedSinceAlertReceived,i,t.reason);break;case"summaryHide":e.shortenItSummaryHide(t.alertInvalidated,t.alertId,t.capiAlertId,t.compressionRatio,a,t.reason,t.sentenceCount,t.wordCount,t.numEditsDismissedSinceAlertReceived,t.numEditsDismissedSinceCardOpen,t.numEditsOnAlertReceived,t.numEditsOnCardOpen,t.numEditsReviewedSinceAlertReceived,t.numEditsReviewedSinceCardOpen,i);break;case"summaryLoadingShow":e.shortenItSummaryLoadingShow(t.alertInvalidated,t.alertId,t.capiAlertId,a,t.sentenceCount,t.wordCount,i);break;case"summaryLoadingHide":e.shortenItSummaryLoadingHide(t.alertInvalidated,t.alertId,t.capiAlertId,a,t.reason,t.sentenceCount,t.wordCount,t.duration,i);break;case"summaryNotFoundShow":e.shortenItSummaryNotFoundShow(t.alertInvalidated,t.alertId,t.capiAlertId,a,t.sentenceCount,t.wordCount,i,t.reason);break;case"summaryNotFoundHide":e.shortenItSummaryNotFoundHide(t.alertInvalidated,t.alertId,t.capiAlertId,a,t.reason,t.sentenceCount,t.wordCount,i);break;default:(0,K.vE)(t)}}function ne(e){switch(e){case d.vQ.SummaryState.notRequested:case d.vQ.SummaryState.requestSent:case d.vQ.SummaryState.invalidated:return"AILoadingCard";case d.vQ.SummaryState.received:return"summaryCard";case d.vQ.SummaryState.notFound:return"errorCard";default:(0,K.vE)(e)}}class de{constructor(e,t,i,a,s){this._gnar=e,this._getSessionUuid=t,this._getDomainCategory=i,this._shortenItAlertExists=a,this._getInvalidationCount=s}trackShortenItResponses(e,t,i){return e.pipe(A.M(t),h.U((([e,t])=>{const s=(0,a.zG)(t,T.filter((t=>t.id===e.id)),T.fold((()=>0),(e=>performance.now()-e.timeFocused))),r=e.delayBeforeRequestSubmitted+e.retries.reduce(((e,t)=>e+t.delayBeforeRequestSubmitted),0),n=e.requestLatency+e.retries.reduce(((e,t)=>e+t.requestLatency),0),d=i(e.id);return{kind:"summaryResponseReceived",capiAlertId:e.id,summaryFound:"summaryReceived"===e.kind||"summaryNotFound"!==e.kind&&(0,K.vE)(e),cardActiveDuration:s,requestLatency:n,delayBeforeRequestSubmitted:r,alertInvalidated:d>0,alertInvalidatedCount:d}}))).subscribe((e=>re(this._gnar,e,(0,a.zG)(this._getSessionUuid(),T.getOrElse((()=>""))),this._getDomainCategory())))}initAssistantTracking(e,t,i,s){const n=new u.w,o=new Map,l=new Map;return n.add(function(e,t){return e.pipe(q.h((0,j.Kg)(ie.lY.isAlertIgnoreAction,ie.lY.isAlertApplyAction)),h.U((e=>(0,a.zG)(t.getById(e.alertId),T.filter(d.bZ.isShortenIt),T.map((()=>e))))),I.oA)}(e,t).subscribe((e=>{switch(e.type){case ie.lY.Type.alertIgnore:o.set(e.alertId,"dismissed");break;case ie.lY.Type.alertApply:o.set(e.alertId,"accepted");break;default:(0,K.vE)(e)}}))),n.add(e.pipe(q.h((0,j.Kg)(ie.ut.isReviewEdit,ie.ut.isDismissEdit))).subscribe((e=>{const t=l.get(e.alertId)||{editsReviewedSinceCardOpen:new Set,editsDismissedSinceCardOpen:new Set,editsReviewedSinceAlertReceived:new Set,editsDismissedSinceAlertReceived:new Set};switch(e.type){case ie.lY.Type.shortenItReviewEdit:l.set(e.alertId,{...t,editsReviewedSinceCardOpen:new Set(t.editsReviewedSinceCardOpen).add(e.group),editsReviewedSinceAlertReceived:new Set(t.editsReviewedSinceAlertReceived).add(e.group)});break;case ie.lY.Type.shortenItDismissEdit:l.set(e.alertId,{...t,editsDismissedSinceCardOpen:new Set(t.editsDismissedSinceCardOpen).add(e.group),editsDismissedSinceAlertReceived:new Set(t.editsDismissedSinceAlertReceived).add(e.group)});break;default:(0,K.vE)(e)}}))),n.add(function(e,t,i,s,n,o,l){return f.T(t.pipe(h.U(T.some)),i.pipe(L.h(T.none))).pipe(h.U(T.chain((t=>x.nL.hasItems(t)?(0,a.zG)(r.O.getActiveItemWithAlert(t.currentLens),T.filter(F.C.isShortenItItem),T.map((e=>e.activeAlert)),T.chain((t=>(0,a.zG)(e.getById(t.id),T.chain(d.bZ.getRawId),T.map((e=>({alert:t,rawAlertId:e}))))))):T.none))),v.skipBy(T.getEq(U.Uz((e=>({id:e.alert.id,activeView:ne(e.alert.summaryState)})))(U.MW({id:U.yv,activeView:U.yv})))),X.O(T.none),ae.G(),W.R((({focusTimestamp:e},[t,i])=>{const r=(0,a.zG)(t,T.map((e=>e.alert.id)),T.fold(a.jv,(e=>(0,a.zG)(i,T.map((e=>e.alert.id)),B.FX(e))))),c=(0,a.zG)(i,T.map((e=>e.alert.summaryState)),B.FX(d.vQ.SummaryState.received)),u=(0,a.zG)(i,T.map((e=>e.alert.summaryState)),B.FX(d.vQ.SummaryState.invalidated)),m=(0,a.zG)(i,T.map((e=>e.alert.summaryState)),B.FX(d.vQ.SummaryState.notFound)),p=[];return(0,a.zG)(t,B.bw((t=>{var i;const h=t.alert.summaryState===d.vQ.SummaryState.received,v=t.alert.summaryState===d.vQ.SummaryState.notFound,S=null!==(i=T.toNullable(s(t.alert.id)))&&void 0!==i?i:o(t.rawAlertId)?"unfocused":"removed";if(v)(0,K.kG)("accepted"!==S,"Can't accept a ShortenIt alert that timed-out"),p.push({kind:"summaryNotFoundHide",alertId:t.alert.id,reason:S,sentenceCount:t.alert.sentenceCount,wordCount:t.alert.wordCount,capiAlertId:t.rawAlertId,alertInvalidated:l(t.rawAlertId)>0});else if(h){const e=n(t.alert.id);p.push({kind:"summaryHide",alertId:t.alert.id,capiAlertId:t.rawAlertId,reason:u?"invalidated":S,sentenceCount:t.alert.sentenceCount,wordCount:t.alert.wordCount,compressionRatio:te.T.unwrap(t.alert.compressionRatio),numEditsReviewedSinceCardOpen:(0,a.zG)(e,T.fold((()=>0),(e=>e.editsReviewedSinceCardOpen.size))),numEditsDismissedSinceCardOpen:(0,a.zG)(e,T.fold((()=>0),(e=>e.editsDismissedSinceCardOpen.size))),numEditsDismissedSinceAlertReceived:(0,a.zG)(e,T.fold((()=>0),(e=>e.editsDismissedSinceAlertReceived.size))),numEditsReviewedSinceAlertReceived:(0,a.zG)(e,T.fold((()=>0),(e=>e.editsReviewedSinceAlertReceived.size))),numEditsOnAlertReceived:t.alert.transformGroups.size,numEditsOnCardOpen:t.alert.transformGroups.size-(0,a.zG)(e,T.fold((()=>0),(e=>e.editsDismissedSinceAlertReceived.size-e.editsDismissedSinceCardOpen.size))),alertInvalidated:l(t.rawAlertId)>0})}else(0,K.kG)("accepted"!==S,"Can't accept a loading ShortenIt alert"),p.push({kind:"summaryLoadingHide",alertId:t.alert.id,capiAlertId:t.rawAlertId,reason:c&&r?"summaryReceived":m&&r?"timeoutReceived":S,duration:performance.now()-e,sentenceCount:t.alert.sentenceCount,wordCount:t.alert.wordCount,alertInvalidated:l(t.rawAlertId)>0})}))),(0,a.zG)(i,B.bw((e=>{if(m)p.push({kind:"summaryNotFoundShow",alertId:e.alert.id,capiAlertId:e.rawAlertId,reason:r?"timeoutReceived":"focused",sentenceCount:e.alert.sentenceCount,wordCount:e.alert.wordCount,alertInvalidated:l(e.rawAlertId)>0});else if(c){const t=n(e.alert.id);p.push({kind:"summaryShow",alertId:e.alert.id,capiAlertId:e.rawAlertId,reason:r?"summaryReceived":"focused",sentenceCount:e.alert.sentenceCount,wordCount:e.alert.wordCount,compressionRatio:te.T.unwrap(e.alert.compressionRatio),numEditsOnAlertReceived:e.alert.transformGroups.size,numEditsOnCardOpen:e.alert.transformGroups.size-e.alert.dismissedTransformGroups.size,numEditsDismissedSinceAlertReceived:(0,a.zG)(t,T.fold((()=>0),(e=>e.editsDismissedSinceAlertReceived.size))),numEditsReviewedSinceAlertReceived:(0,a.zG)(t,T.fold((()=>0),(e=>e.editsReviewedSinceAlertReceived.size))),alertInvalidated:l(e.rawAlertId)>0})}else p.push({kind:"summaryLoadingShow",alertId:e.alert.id,capiAlertId:e.rawAlertId,sentenceCount:e.alert.sentenceCount,wordCount:e.alert.wordCount,alertInvalidated:l(e.rawAlertId)>0})}))),{events:p,focusTimestamp:performance.now()}}),{events:[],focusTimestamp:performance.now()}),h.U((e=>e.events)),se.zg(a.yR))}(t,i.pipe(C.g(100)),s,(e=>T.fromNullable(o.get(e))),(e=>T.fromNullable(l.get(e))),(e=>this._shortenItAlertExists(e)),(e=>this._getInvalidationCount(e))).subscribe((e=>{if(re(this._gnar,e,(0,a.zG)(this._getSessionUuid(),T.getOrElse((()=>""))),this._getDomainCategory()),"summaryHide"===e.kind){const t=l.get(e.alertId)||{editsReviewedSinceCardOpen:new Set,editsDismissedSinceCardOpen:new Set,editsReviewedSinceAlertReceived:new Set,editsDismissedSinceAlertReceived:new Set};l.set(e.alertId,{...t,editsReviewedSinceCardOpen:new Set,editsDismissedSinceCardOpen:new Set})}}))),n}}class oe{constructor(e){this._params=e,this._subs=new u.w,this._activeShortenItCapiAlertId=z.h.create(T.none),this._requestState=new Y(this._params.alertProcessor,this._params.textObserver),this._gnarTracking=new de(this._params.gnar,this._params.getSessionUuid,this._params.getDomainCategory,(e=>!!this._params.alertProcessor.alerts.getAlertById(e)),(e=>this._requestState.getInvalidationCount(e)||0)),this._subs.add(this._params.capiReadyState.subscribe((e=>{e&&this._requestState.onCAPISessionStarted()}))),this._subs.add(this._gnarTracking.trackShortenItResponses(this._requestState.responseReceived,this._activeShortenItCapiAlertId,(e=>this._requestState.getInvalidationCount(e)||0)))}get addStateToRawAlertTransformer(){return e=>{if(n.wQ.isShortenIt(e)){const t=this._requestState.get(e.id),i=t&&function(e){switch(e){case"requestEnqueued":case"summaryNotFoundAfterTextChanged":return;case"requestSent":return d.vQ.SummaryState.requestSent;case"summaryReceived":return d.vQ.SummaryState.received;case"summaryNotFound":return d.vQ.SummaryState.notFound;default:(0,K.vE)(e)}}(t.kind);return i?{...e,extra_properties:{...e.extra_properties,shorten_it_alert_state:{summaryState:i}}}:e}return e}}onShortenItFinished(e){this._requestState.requestFinished(e)}initAssistantSession(e,t,i,c,z){return new m.y((()=>{const m=new u.w,N=new p.xQ,G=new M(this._params.textObserver,this._params.requestAwaitService,this._params.textChangeBufferEmpty,this._params.capiCheckingState,this._params.capiReadyState),D=i.pipe(h.U((e=>(0,a.zG)(T.fromPredicate(x.nL.hasItems)(e),T.map((e=>e.currentLens)),T.chain(r.O.getActiveItemWithAlert)))));this._subs.add(D.pipe(h.U((0,a.ls)(T.filter(F.C.isShortenItItem),T.chain((e=>t.getById(e.activeAlert.id))),T.chain(d.bZ.getRawId))),v.skipBy(T.getEq(U.yv)),h.U(T.map((e=>({id:e,timeFocused:performance.now()}))))).subscribe(S.wW(this._activeShortenItCapiAlertId))),m.add(f.T(function(e,t){const i=b.H(500).pipe(w.c(e),k.b(100),h.U((e=>{const i=e.currentLens.id===l.R.SpecialId.PredictionTakeaways,s=function*(e,t){if(!x.nL.hasItems(t)||T.isNone(t.currentLens.cardIndex)||0===t.currentLens.items.size)return;const i=t.currentLens.items,s=t.currentLens.cardIndex.value,r=(0,a.zG)(i.getAt(s),T.filter(F.C.isWithAlertsItem),T.map((t=>t.alerts.map(((e,i)=>({alert:e,distanceToActiveAlertInItem:Math.abs(i-t.activeAlertIndex),distanceToActiveItemInFeed:0,isActiveAlert:i===t.activeAlertIndex}))).filter((t=>e(t.alert))))),T.getOrElse((()=>[])),(e=>e.sort(((e,t)=>e.distanceToActiveAlertInItem-t.distanceToActiveAlertInItem))));for(const e of r)yield e;let n=s-1,d=s+1,o=n<0,l=d>=i.size;for(;!o||!l;){const t=l?[]:(0,a.zG)(i.findFrom(F.C.isWithAlertsItem,d),T.filter((e=>e.index>=d)),T.fold((()=>(l=!0,[])),(t=>{d=t.index+1,l=l||d>=i.size;const a=t.value;return a.alerts.filter(e).map(((e,i)=>({alert:e,distanceToActiveItemInFeed:Math.abs(t.index-s),distanceToActiveAlertInItem:Math.abs(i-a.activeAlertIndex),isActiveAlert:!1}))).filter((t=>e(t.alert)))}))),r=o?[]:(0,a.zG)(i.findRightFrom(F.C.isWithAlertsItem,n),T.filter((e=>e.index<=n)),T.fold((()=>(o=!0,[])),(t=>{n=t.index-1,o=o||n<0;const i=t.value;return i.alerts.filter(e).map(((e,a)=>({alert:e,distanceToActiveItemInFeed:Math.abs(t.index-s),distanceToActiveAlertInItem:Math.abs(a-i.activeAlertIndex),isActiveAlert:!1}))).filter((t=>e(t.alert)))}))),c=t.concat(r).sort(((e,t)=>e.distanceToActiveItemInFeed-t.distanceToActiveItemInFeed));for(const e of c)yield e}}(E.$.isShortenIt,e),r={active:null,nonActive:[]};for(const e of s)if(e.isActiveAlert)r.active=e.alert;else{if(i&&e.distanceToActiveAlertInItem>t.activeItemRadius||!i&&e.distanceToActiveItemInFeed>t.activeItemRadius)break;r.nonActive.push(e.alert)}return r})),R.B()),r=i.pipe(h.U((e=>e.active)),q.h((e=>!!e)),_.x(((e,t)=>e.id===t.id&&e.summaryState===t.summaryState)),q.h(ue),h.U((e=>new Set([e.id])))),n=i.pipe(h.U((e=>e.nonActive)),_.x(((e,t)=>s.Eh(le).equals(s.nI(le)(e),s.nI(le)(t)))),h.U((0,a.ls)(O.hX(ue),O.ke(t.maxPrefetchRequestsWithinRadius),O.UI((e=>e.id)),s.nI(U.yv))),v.skipBy(s.Eh(U.yv)));return f.T(r,n).pipe(q.h((e=>e.size>0)))}(i,this._params.prefetchOptions),this._requestState.notFoundAfterTextChanged.pipe(ce(z),I.cp((e=>g.of(new Set([e])))))).subscribe((e=>{for(const i of e)(0,a.zG)(t.getById(i),T.chain(d.bZ.getRawId),B.bw((e=>this._requestState.requestEnqueued(e))));G.enqueue(e)}))),m.add(G.state.subscribe((e=>{for(const i of e)c.sendShortenItSummaryRequest(i),(0,a.zG)(t.getById(i),T.chain(d.bZ.getRawId),B.bw((e=>this._requestState.requestSubmitted(e))))}))),m.add(this._requestState.summaryNotFound.pipe(ce(z),I.oA).subscribe((e=>c.shortenItSummaryNotFound(e))));const Q=D.pipe(h.U(T.map((e=>e.activeAlert.id))));return m.add(this._requestState.summaryNotFound.pipe(ce(z),I.oA,A.M(Q),y.w((([e,t])=>(0,a.zG)(t,T.exists((t=>e===t)))?g.of(e).pipe(C.g(1500)):g.of(e)))).subscribe((e=>c.applyFeedback(e,{kind:n.PZ.HIDE,subtype:o.J.getSubTypeFromLens(i.get().currentLens.id)},d.l$.api)))),m.add(this._gnarTracking.initAssistantTracking(e,t,i,N)),()=>{N.next(),m.unsubscribe(),G.dispose()}}))}dispose(){this._subs.unsubscribe(),this._requestState.dispose()}}const le=U.Uz((e=>null==e?void 0:e.id))(U.w4);function ce(e){return h.U((t=>(0,a.zG)(e.get(),c.p.find((e=>(0,a.zG)(d.bZ.getRawId(e.alert),B.FX(t)))),T.map((e=>e.alert.id)))))}function ue(e){return e.summaryState===d.vQ.SummaryState.notRequested||e.summaryState===d.vQ.SummaryState.invalidated}},18347:(e,t,i)=>{i.d(t,{Eh:()=>s,Od:()=>r,nI:()=>n});var a=i(13853),s=(a.ZN,new Set,a.AO,a.Eh);a.G,a.UI,a.yW,a.tS,a.KX;a.t9,a.G0,a.jV,a.tV,a.e5,a.Lf,a.oP,a.u4,a.Lx,a.ri,a.$T;var r=a.Od;var n=a.nI;a.oA,a.xu,a.DZ},45740:e=>{e.exports={circleProgress:"IkNxu",circleText:"FllLk",card:"BSki0",header:"hk0Yc",compact:"cT3ja",normal:"Jxiqr",progressIcon:"fO9lJ",title:"nsBOt",full:"UibYx",progressContainer:"c5ZRH",progressBar:"ZNrvZ",progressValue:"jhBTZ",description:"raiHm"}},57837:e=>{e.exports={cardBody:"mWkWZ",description:"sJhXN",actions:"LCiQQ",lessIcon:"wEufS",minimalDescription:"lUctj",actionsFooter:"fs9Lo",feedbackFooter:"mQkpR",viewMoreButton:"vASf3"}},57561:e=>{e.exports={miniCard:"VI0d0"}}}]);