(self.webpackChunk=self.webpackChunk||[]).push([[5773],{28458:(e,t,n)=>{var i=n(35765),o="chrome-extension://__MSG_@@extension_id__/",s="moz-extension://__MSG_@@extension_id__/",r="safari-web-extension://__MSG_@@extension_id__/",a=self.GR_RESOURCE_ROOT||o,l=self.GR_RESOURCE_ROOT||s,c=self.GR_RESOURCE_ROOT||r;e.exports={__css:i.toString().replace(new RegExp(o,"g"),a).replace(new RegExp(s,"g"),l).replace(new RegExp(r,"g"),c),...i.locals}},43318:(e,t,n)=>{var i=n(35434),o="chrome-extension://__MSG_@@extension_id__/",s="moz-extension://__MSG_@@extension_id__/",r="safari-web-extension://__MSG_@@extension_id__/",a=self.GR_RESOURCE_ROOT||o,l=self.GR_RESOURCE_ROOT||s,c=self.GR_RESOURCE_ROOT||r;e.exports={__css:i.toString().replace(new RegExp(o,"g"),a).replace(new RegExp(s,"g"),l).replace(new RegExp(r,"g"),c),...i.locals}},8482:(e,t,n)=>{n.d(t,{$:()=>r,EA:()=>s,QK:()=>a,SV:()=>o,Td:()=>l,x:()=>m});var i,o,s,r,a,l,c,u=n(73975),d=n(22232),p=n(16105);!function(e){e.isNoop=function(e){return 0===e.startOffset&&0===e.endOffset}}(i||(i={})),function(e){function t(e){return{start:Math.min(e.start,e.end),end:Math.max(e.start,e.end)}}e.eq=u.MW({start:u.lr,end:u.lr}),e.normalize=t,e.mergeAdjacent=function(e){return t=>{if(0===t.length)return[];const n=[t[0]];for(let i=1;i<t.length;++i){const o=n[n.length-1];e(o,t[i])?n[n.length-1]={start:o.start,end:t[i].end}:n.push(t[i])}return n}},e.create=function(e,n){return t({start:e,end:null!=n?n:e})},e.translate=function(e,t){return 0===t?e:{start:e.start+t,end:e.end+t}},e.transform=function(e,t){return i.isNoop(t)?e:{start:e.start+t.startOffset,end:e.end+t.endOffset}},e.rebase=function(e,t){return t.reduce(((e,t)=>{const n=p.q.getTransformOffset(t);return{start:t.pos<=e.start?Math.max(t.pos,e.start+n):e.start,end:t.pos<e.end?Math.max(t.pos,e.end+n):e.end}}),e)},e.contains=function(e,t,n){const i=n?t.start<=e.end:t.start<e.end;return t.start>=e.start&&i&&t.end>=e.start&&t.end<=e.end},e.isAdjacent=function(e,t){return e.end===t.start||t.end===e.start},e.intersects=function(e,t){return e.start>=t.start&&e.start<t.end||t.start>=e.start&&t.start<e.end},e.equals=function(t,n){return e.eq.equals(t,n)},e.toString=function(e){return`[${e.start}, ${e.end}]`},e.isCollapsed=function(e){return e.start===e.end},e.convertFromRawTransform=function(e){return{start:e.s,end:e.e}},e.length=function(e){return e.end-e.start}}(o||(o={})),function(e){e.hasTransformJSON=function(e){return"transformJSON"in e}}(s||(s={})),function(e){function t(e,t,n){return e.slice(t.start,t.end)===n}function n(e){return"transformJSON"in e&&Boolean(e.transformJSON)}function i(e){return"subalerts"in e&&e.subalerts&&"labels"in e&&Boolean(e.labels)}function o(e){return!n(e)&&!i(e)}function s({withPosition:e,withTransformJSON:t,withSubAlerts:s}){return r=>o(r)?e(r):n(r)?t(r):i(r)?s(r):void(0,d.vE)(r)}e.isConsistentWithText=function(n,i){let o;if(e.isWithSubAlerts(n))o=n.highlightRanges.every(((e,o)=>t(i,e,n.highlightTexts[o])));else{const e=n.highlightRanges.find((e=>"enclosing"===e.type))||n.highlightRanges[0];o=t(i,e,n.highlightTexts[0])}return o&&(!e.isRegular(n)||t(i,n.transformRange,n.transformText))},e.isWithTransformJson=n,e.isWithSubAlerts=i,e.isWithPosition=o,e.isRegular=function(e){return o(e)||n(e)},e.match=s,e.map=function({withPosition:e,withTransformJSON:t,withSubAlerts:n}){return s({withPosition:e,withTransformJSON:t,withSubAlerts:n})}}(r||(r={})),function(e){e.waitingForConnection="waitingForConnection",e.waitingForReconnection="waitingForReconnection",e.startingConnection="startingConnection",e.newSessionStarted="newSessionStarted",e.existingSessionStarted="existingSessionStarted"}(a||(a={})),function(e){e.ready="ready",e.inProgress="inProgress",e.reconnectRequired="reconnectRequired"}(l||(l={})),function(e){e.unknown="unknown",e.clientQueueNonEmpty="clientQueueNonEmpty",e.noSuchSession="noSuchSession",e.cannotReconnectToSelf="cannotReconnectToSelf",e.differentUsers="differentUsers",e.sessionClosed="sessionClosed",e.messageCountIncorrect="messageCountIncorrect"}(c||(c={}));const m=(e,t)=>{if(!e)return c.clientQueueNonEmpty;if(!t)return c.unknown;const{reconnectFailedReason:n}=t;if("no such session"===n)return c.noSuchSession;if("cannot reconnect to self"===n)return c.cannotReconnectToSelf;if("different users"===n)return c.differentUsers;if("session is closed"===n)return c.sessionClosed;return n&&/(client send|server send|no such message in buffer)/.test(n)?c.messageCountIncorrect:c.unknown}},95572:(e,t,n)=>{n.d(t,{DD:()=>y,Hq:()=>w,J8:()=>_,TC:()=>s,kQ:()=>k,uM:()=>o,wF:()=>v});var i,o,s,r=n(40327),a=n(90361),l=n(8482),c=n(5114),u=n(63513),d=n(73353),p=n(80800),m=n(49524),h=n(22232),f=n(89943);!function(e){e.synonym="Synonym",e.plagiarism="Plagiarism",e.grammar="Grammar",e.contextualSpelling="ContextualSpelling",e.sentenceStructure="SentenceStructure",e.punctuation="Punctuation",e.style="Style",e.enhancement="Enhancement",e.spelling="Spelling",e.voxStyle="VoxStyle",e.snippets="Snippets",e.other="Other"}(i||(i={})),function(e){e.sales_crm="sales_crm",e.sales_engagement="sales_engagement",e.sales_enablement="sales_enablement",e.marketing_email_automation="marketing_email_automation",e.marketing_content="marketing_content",e.customer_service="customer_service",e.customer_surveys_surveys="customer_surveys_surveys",e.recruiting="recruiting",e.training_learning="training_learning",e.project_management="project_management",e.legal="legal",e.contractors="contractors",e.human_resources="human_resources",e.email="email",e.business_chat="business_chat"}(o||(o={})),function(e){e.correctness="correctness",e.clarity="clarity",e.engagement="engagement",e.tone="tone",e.vox="vox",e.knowledgeHub="knowledgeHub",e.other="other"}(s||(s={}));const g=[s.clarity,s.correctness,s.engagement,s.tone],v=e=>g.includes(e);var y,_,b,w,k;!function(e){function t({withPosition:t,withTransformJSON:n,withSubAlerts:i}){return o=>e.isWithPosition(o)?t(o):e.isWithTransformJson(o)?n(o):e.isWithSubAlerts(o)?i(o):void(0,h.vE)(o)}e.isWithTransformJson=e=>l.$.isWithTransformJson(e),e.isWithSubAlerts=e=>l.$.isWithSubAlerts(e),e.isWithPosition=e=>l.$.isWithPosition(e),e.isRegular=e=>l.$.isRegular(e),e.match=t;const n={Correctness:s.correctness,Clarity:s.clarity,Engagement:s.engagement,Tone:s.tone,"Style guide":s.vox,"Knowledge Hub":s.knowledgeHub};e.createOutcomeType=function(e){return e&&n[e]||s.other},e.ordering={greaterThanOrEqual:(e,t)=>e.isEthicalAIStandWithUkraine||t.isEthicalAIStandWithUkraine?e.isEthicalAIStandWithUkraine:e.isShortenIt&&t.isShortenIt?e.priority>=t.priority:!(e.isShortenIt&&!t.isShortenIt)&&(!(e.isShortenIt||!t.isShortenIt)||(e.isSuggestedSnippet||t.isSuggestedSnippet?e.priority>=t.priority:!e.isFree&&t.isFree||e.isFree&&!t.isFree?e.isVox||t.isVox?e.isVox:e.isFree:e.group===i.spelling&&t.group===i.spelling||e.group===i.contextualSpelling&&t.group===i.contextualSpelling||e.isVox&&t.isVox?e.priority>=t.priority:e.group===i.spelling||t.group!==i.spelling&&e.priority<=t.priority)),areConflicting:(t,n)=>(!t.isFree&&!n.isFree||t.isFree&&n.isFree||t.isVox||n.isVox)&&(!t.isTakeaway&&!n.isTakeaway||t.isTakeaway&&n.isTakeaway)&&!e.isMuted(t)&&!e.isMuted(n)&&(e.isRegular(t)&&e.isRegular(n)&&l.SV.equals(t.transformRange,n.transformRange)||f.Hx(t.highlightRanges,n.highlightRanges,l.SV.equals)),areSame:(e,n)=>{const i=e=>{const n=e=>({highlights:e.highlights,alternatives:(0,r.pipe)(e.alternatives,c.map((e=>({alternatives:e.alternatives}))))}),i=(0,r.pipe)(e,t({withPosition:e=>({highlightTexts:e.highlightTexts,highlightRanges:e.highlightRanges,transformText:e.transformText,transformRange:e.transformRange,replacements:e.replacements}),withTransformJSON:e=>n(e.transformJSON),withSubAlerts:e=>n(e.subalerts)}));return Object.assign(i,{priority:e.priority,isFree:e.isFree,group:e.group,outcome:e.outcome,category:e.category}),i};return(0,a.fS)(i(e),i(n))}},e.isInline=e=>e.inline===u.wQ.Inline.inline,e.isMuted=e=>void 0!==e.muted&&e.muted!==u.JW.MutedByType.NOT_MUTED,e.isFreePremiumLocked=e=>"locked_transform"===e.freePremium,e.isFreePremiumUnlocked=e=>"unlocked"===e.freePremium,e.isHidden=e=>e.isHidden}(y||(y={})),function(e){let t;!function(e){e.start="start",e.add="add",e.changed="changed",e.remove="remove",e.finished="finished",e.emogenie="emogenie",e.autocomplete="autocomplete",e.attentionHeatmap="attention_heatmap",e.attentionInfo="attention_info",e.shortenItFinished="shorten_it_finished",e.textInfo="text_info",e.proofitAvailability="realtime_proofit_availability",e.proofitCancelResponse="realtime_proofit_cancel_resp",e.proofitCompleted="realtime_proofit_completed",e.proofitProgress="realtime_proofit_in_progress",e.proofitProgressError="realtime_proofit_progress_error",e.proofitProgressRejected="realtime_proofit_progress_rejected",e.proofitSubmitResponse="realtime_proofit_submit_resp",e.feedback="feedback",e.error="error",e.publishedAck="published_ack",e.submitSurveyResultAck="submit_survey_result_ack",e.showSurvey="show_survey",e.sduiAdd="sdui_add",e.sduiUpdate="sdui_update",e.sduiRemove="sdui_remove",e.cheetahSetContext="cheetah:setContext",e.cheetahChunk="cheetah:chunk",e.cheetahResult="cheetah:result",e.cheetahAck="cheetah:ack"}(t=e.Type||(e.Type={})),e.start=function(e){return{_tag:t.start,isEnterprise:e.isEnterprise,domainName:e.domainName,domainCategory:e.domainCategory,userMutedCategories:e.userMutedCategories,defaultDocumentContext:d.R$.serializeDefault((0,r.pipe)(e.defaultDocumentContext,c.fold((()=>d.R$.defaultContextFallback),m.y))),sessionUuid:e.sessionUuid,isNewSession:e.isNewSession}},e.add=function(e){return{_tag:t.add,alert:e}},e.change=function(e){return{_tag:t.changed,changed:e}},e.remove=function(e){return{_tag:t.remove,removedId:e}},e.finished=function(e){return{_tag:t.finished,finished:e}},e.emogenie=function(e){return{_tag:t.emogenie,emogenieReport:{emotions:e.emotions,hidden:e.hidden,institutionLogo:e.institutionLogo,brandTonesEnabled:e.brandTonesEnabled,brandTonesConfigured:e.brandTonesConfigured}}},e.textInfo=function(e){return{_tag:t.textInfo,...e}},e.feedbackAck=function({scores:e,scoreStatus:n}){return{_tag:t.feedback,scores:e?p.v0.OutcomeScores.normalize(e):void 0,scoreStatus:n}},e.autocomplete=function(e,n,i){return{_tag:t.autocomplete,data:e,revision:n,connId:i}},e.attentionHeatmap=function(e,n){return{_tag:t.attentionHeatmap,heatmap:e,connectionId:n}},e.attentionInfo=function(e){return{_tag:t.attentionInfo,info:e}},e.shortenItFinished=function(e){return{_tag:t.shortenItFinished,alertId:e}},e.proofitAvailability=function(e){return{_tag:t.proofitAvailability,info:e}},e.proofitSubmitResponse=function(e){return{_tag:t.proofitSubmitResponse,info:e}},e.proofitProgress=function(e){return{_tag:t.proofitProgress,info:e}},e.proofitCompleted=function(e){return{_tag:t.proofitCompleted,info:e}},e.proofitProgressError=function(e){return{_tag:t.proofitProgressError,info:e}},e.proofitProgressRejected=function(e){return{_tag:t.proofitProgressRejected,info:e}},e.proofitCancelResponse=function(e){return{_tag:t.proofitCancelResponse,info:e}},e.error=function(e){return{_tag:t.error,error:"not_authorized"===e.error?"not_authorized":"unknown",raw_error:e.error,event:e}},e.publishedAck=function(e){return{_tag:t.publishedAck,survey:e.survey}},e.submitSurveyResultAck=function(){return{_tag:t.submitSurveyResultAck}},e.showSurvey=function(e){return{_tag:t.showSurvey,survey:e.survey}},e.sduiAdd=function(e){return{_tag:t.sduiAdd,event:e}},e.sduiUpdate=function(e){return{_tag:t.sduiUpdate,event:e}},e.sduiRemove=function(e){return{_tag:t.sduiRemove,event:e}},e.cheetahSetContext=function(e){return{_tag:t.cheetahSetContext,event:e}},e.cheetahChunk=function(e){return{_tag:t.cheetahChunk,event:e}},e.cheetahResult=function(e){return{_tag:t.cheetahResult,event:e}},e.cheetahAck=function(e){return{_tag:t.cheetahAck,event:e}},e.isCheetahMessage=function(e){switch(e._tag){case t.cheetahSetContext:case t.cheetahChunk:case t.cheetahResult:case t.cheetahAck:return!0;default:return!1}},e.isSDUIMessage=function(e){switch(e._tag){case t.sduiAdd:case t.sduiRemove:case t.sduiUpdate:return!0;default:return!1}}}(_||(_={})),function(e){e.british="british",e.american="american",e.australian="australian",e.canadian="canadian"}(b||(b={})),function(e){e.idle="idle",e.inProgress="inProgress"}(w||(w={})),function(e){e.notReady="notReady",e.ready="ready",e.firstTextCheckCompleted="firstTextCheckCompleted",e.disconnected="disconnected"}(k||(k={}))},63919:(e,t,n)=>{n.d(t,{Cv:()=>r,E9:()=>i,Ir:()=>s,p8:()=>o});var i,o,s,r,a=n(62882);!function(e){e.equals=function(e,t){return(0,a.M$)(e.left,t.left)&&(0,a.M$)(e.top,t.top)},e.fromCartesian=function({x:e,y:t}){return{top:t,left:e}},e.toCartesian=function({top:e,left:t}){return{x:t,y:e}},e.zero={top:0,left:0},e.minus=function(e,t){return{top:e.top-t.top,left:e.left-t.left}},e.plus=function(e,t){return{top:e.top+t.top,left:e.left+t.left}},e.ceil=function(e){return{left:Math.ceil(e.left),top:Math.ceil(e.top)}},e.floor=function(e){return{left:Math.floor(e.left),top:Math.floor(e.top)}},e.create=function(e){return{top:e.top,left:e.left}},e.l1Distance=function(e,t){return Math.abs(e.top-t.top)+Math.abs(e.left-t.left)}}(i||(i={})),function(e){function t(e){return{top:e.top,left:e.left}}e.create=t,e.fromClientPoint=function(e,n,i){return t({top:e.top-n.top+i.top,left:e.left-n.left+i.left})},e.zero={top:0,left:0}}(o||(o={})),function(e){function t(e){return{top:e.top,left:e.left}}e.create=t,e.fromOffsetPoint=function(e,n,i){return t({top:e.top+n.top-i.top,left:e.left+n.left-i.left})},e.fromPage=function(e,n){return t({top:e.top-n.top,left:e.left-n.left})}}(s||(s={})),function(e){function t(e){return{top:e.top,left:e.left}}e.create=t,e.getHighlightsPosition=function(e,n,i,o={top:0,left:0}){return t({top:e.top+n.top+i.top+o.top,left:e.left+n.left+i.left+o.left})},e.fromClient=function(e,n){return t({top:e.top+n.top,left:e.left+n.left})},e.fromOffset=function(e,t,n){return{top:e.top+t.top-n.top,left:e.left+t.left-n.left}}}(r||(r={}))},51655:(e,t,n)=>{if(n.d(t,{Jj:()=>l,Me:()=>a,Yd:()=>d,a9:()=>h,bp:()=>p,is:()=>m,kW:()=>g,o:()=>c,wr:()=>f}),1307!=n.j)var i=n(88848);const o=new Set(["absolute","relative","fixed","sticky"]),s=new Set(["strict","content","layout","paint"]),r=new Set(["flex","inline-flex"]);function a(e){const t=e.ownerDocument;if(t)return t;throw new Error("target does not have ownerDocument")}function l(e){const t=a(e).defaultView;if(t)return t;throw new Error("active document is detached from a window")}function c(e){return l(e).getComputedStyle(e)}function u(e){return o.has(c(e).position)}function d(e,t){const n=o.has(t.position);return!n&&null!==t.zIndex&&"auto"!==t.zIndex&&e.parentElement?r.has(c(e.parentElement).display):n}function p(e){const t=a(e).body;if(e===t)throw new Error("target is body");let n=e;do{if(n=n.parentElement,n&&u(n))return n}while(null!==n&&n!==t);return n||t}function m(e){var t,n,o,r;const l=a(e).body;if(e===l)throw new Error("target is body");const d=(0,i.Cq)(l.parentElement);let p=e;do{if(p=null!==(r=null!==(n=null!==(t=p.assignedSlot)&&void 0!==t?t:p.parentElement)&&void 0!==n?n:null===(o=p.getRootNode())||void 0===o?void 0:o.host)&&void 0!==r?r:null,p&&u(p))return p;if(p&&(m=p,s.has(c(m).contain)))return p}while(null!==p&&p!==d);var m;return p||d}function h(e){const t=c(e);return"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowY||"scroll"===t.overflowY||"auto"===t.overflowX||"scroll"===t.overflowX}function f(e,t){for(let n=e;null!=n;n=n.parentElement)if(t(n))return n;return null}function g(e){const t=e.ownerDocument,n=t&&t.defaultView;if(!t||!n)return;const i=t.body.scrollLeft,o=t.body.scrollTop,s=n.scrollY,r=n.scrollX;e.focus(),s===n.scrollY&&r===n.scrollX||n.scroll(r,s),o!==t.body.scrollTop&&(t.body.scrollTop=o),i!==t.body.scrollLeft&&(t.body.scrollLeft=i)}},16105:(e,t,n)=>{n.d(t,{k:()=>o,q:()=>i});var i,o,s=n(19744),r=n(90361);!function(e){let t;function n(e){return e._tag===t.ins}function i(e){return e._tag===t.del}!function(e){e.ins="ins",e.del="del"}(t=e.Type||(e.Type={})),e.isIns=n,e.ins=function(e,n){return{_tag:t.ins,pos:e,text:n}},e.isDel=i,e.del=function(e,n){return{_tag:t.del,pos:e,length:n}},e.applyChanges=function(e,t){return t.reduce(((e,t)=>n(t)?e.slice(0,t.pos)+t.text+e.slice(t.pos):i(t)?e.slice(0,t.pos)+e.slice(t.pos+t.length):(0,r.vE)(t)),e)},e.getTransformOffset=function(e){return n(e)?e.text.length:i(e)?-e.length:(0,r.vE)(e)},e.getRange=function(e){return{start:e.pos,end:e.pos+(n(e)?e.text.length:e.length)}}}(i||(i={})),function(e){e.fromDiff=function(e,t,n){const o=s(e,t,n);let r=0;const a=[];for(const e of o)e[0]===s.EQUAL?r+=e[1].length:e[0]===s.INSERT?(a.push(i.ins(r,e[1])),r+=e[1].length):a.push(i.del(r,e[1].length));return a}}(o||(o={}))},51923:(e,t,n)=>{n.r(t),n.d(t,{TextGenerationFeatureImpl:()=>fi});var i=n(17771),o=n(17889),s=n(99950),r=n(57050),a=n(27378),l=n(8482),c=n(74850),u=n(14601),d=n(32952),p=n(2844),m=n(24209),h=n(77176),f=n(78674),g=n(17343),v=n(85985),y=n(66310),_=n(50628),b=n(98403),w=n(2834),k=n(76974),x=n(60797),E=n(5114),S=n(83078),R=n(95574),I=n(22232),C=n(38983),U=n(34217),A=n(3914),P=n(57644),B=n(43608),T=n.n(B);const N=({width:e,height:t,top:n,left:i})=>a.createElement("div",{"data-grammarly-part":"text-generation-highlight-rect",className:T().highlightRect,style:{width:e,height:t,top:n,left:i}});var G=n(27205);const z=({onClick:e})=>a.createElement("button",{onClick:e,"data-grammarly-part":"text-generation-ideate-button",className:G.ideateButton},a.createElement("div",{className:G.ideateButtonIcon}));var O=n(86620),F=n(92132),M=n(33678),L=n(15073),D=n(42103),V=n(51369);const H=({env:e,children:t})=>a.createElement(M.a.Context.Provider,{value:new O.C(e)},a.createElement(F.Q,{remSize:k.of(16),setter:e=>L.u.setRootCssVar(document.documentElement,e)},a.createElement(D.G.DefaultProvider,null,t,a.createElement(V.X,null))));var q=n(19703),Z=n(12187),W=n(28846);const K=({placement:e,onMount:t,children:n,...i})=>{const[o,s]=a.useState(null),l="initial"===e.kind?e:void 0,{styles:c}=(0,W.D)(null==l?void 0:l.referenceElement,o,{placement:null==l?void 0:l.placement,modifiers:(0,r.zG)((null==l?void 0:l.offset)||E.none,E.fold((()=>[]),(e=>[{name:"offset",options:{offset:e}}])))});return a.createElement("div",{ref:e=>{s(e),e&&e!==o&&t(e)},style:"initial"===e.kind?c.popper:{position:"fixed",top:e.referencePosition.top,left:e.referencePosition.left,bottom:e.referencePosition.bottom,right:e.referencePosition.right,transform:`translate(${e.translation.x}px, ${e.translation.y}px)`},tabIndex:0,...i},n)};var Y,j=n(24948),Q=n(64757),$=n(17847);!function(e){e.Primary=({className:e,compact:t,children:n,...i})=>a.createElement(Q.zx.Primary,{...(0,Z.Sh)($.button,$.primary,e,t?$.noPadding:void 0),...i},n),e.Secondary=({className:e,compact:t,children:n,...i})=>a.createElement(Q.zx.Ghost,{...(0,Z.Sh)($.button,$.secondary,e,t?$.noPadding:void 0),...i},n),e.Tertiary=({className:e,compact:t,children:n,...i})=>a.createElement(Q.zx.Tertiary,{...(0,Z.Sh)($.button,$.tertiary,e,t?$.noPadding:void 0),...i},n)}(Y||(Y={}));var J=n(31278);const X=U.UI.Grid.make((({slots:e,state:t,notify:n})=>a.createElement(q.F.Fragment,null,t.pipe(h.U((t=>"initial"===t.kind||"dragged"===t.kind?a.createElement(K,{placement:t,onFocus:n({kind:"focus",focused:!0}),onBlur:n({kind:"focus",focused:!1}),onMount:e=>n({kind:"mount",element:e})(),"data-grammarly-part":"ideation-assistant","data-dragging":"dragged"===t.kind&&t.dragging,className:j.container},a.createElement("header",{...(0,Z.Sh)(j.toolbar,t.contentOverflowUnderToolbar?j.overflow:null),ref:e=>e&&n({kind:"dragHandleMount",element:e})()},e.toolbar,a.createElement(Y.Tertiary,{onClick:n({kind:"close"}),compact:!0},a.createElement(J.JO.Close,null))),a.createElement("main",{className:j.content},e.content)):"none"===t.kind?null:(0,I.L0)(t)))))));var ee=n(76723),te=n(90845),ne=n(64015),ie=n(71052);const oe=({className:e,children:t,header:n})=>a.createElement("div",{...(0,Z.Sh)(ie.actionGroupContainer,e)},n?a.createElement("div",{className:ie.actionGroupHeader},n):null,a.createElement("div",{className:ie.actionGroupContent},t));var se=n(95195),re=n(45660);const ae=e=>a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},a.createElement("rect",{x:"4.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:"#646B81"}),a.createElement("rect",{x:"4.5",y:"13.5",width:"6",height:"6",rx:"1.5",stroke:"#646B81"}),a.createElement("rect",{x:"13.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:"#646B81"}),a.createElement("path",{d:"M14.5513 15.8162L12.9269 16.3577C12.7902 16.4033 12.7902 16.5967 12.9269 16.6423L14.5513 17.1838C15.1485 17.3828 15.6172 17.8515 15.8162 18.4487L16.3577 20.0731C16.4033 20.2098 16.5967 20.2098 16.6423 20.0731L17.1838 18.4487C17.3828 17.8515 17.8515 17.3828 18.4487 17.1838L20.0731 16.6423C20.2098 16.5967 20.2098 16.4033 20.0731 16.3577L18.4487 15.8162C17.8515 15.6172 17.3828 15.1485 17.1838 14.5513L16.6423 12.9269C16.5967 12.7902 16.4033 12.7902 16.3577 12.9269L15.8162 14.5513C15.6172 15.1485 15.1485 15.6172 14.5513 15.8162Z",fill:"#646B81",stroke:"#646B81"})),le=e=>a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},a.createElement("path",{d:"M14 11.5H16.7929L8.92289 19.37L10.4851 13.1213L10.6404 12.5H10H7.20711L15.0771 4.62999L13.5149 10.8787L13.3596 11.5H14Z",stroke:"#646B81",strokeMiterlimit:"4.25735"})),ce=(0,Z.xb)(Y.Secondary),ue=U.UI.Node.make((({view:e,notify:t})=>a.createElement(ce,{onClick:e("action").pipe(h.U((e=>t({kind:"click",action:e})))),...(0,Z.Sh)(re.actionBrick,e("action").pipe(h.U((({kind:e})=>"go"===e?re.goAction:null))),e("mode").pipe(h.U((e=>"compact"===e?re.compact:"standard"===e?re.standard:(0,I.L0)(e)))))},e("icon").pipe(h.U(se.g_((({kind:e})=>{switch(e){case"allResults":return a.createElement(ae,null);case"go":return a.createElement(le,null);default:(0,I.L0)(e)}}),(({url:e})=>a.createElement("img",{src:e,style:{width:20,height:20}}))))),e("label")))),de=U.UI.List.make(ne.Bk,ue);var pe=n(21344);const me=U.UI.Grid.make((({slots:e,view:t})=>a.createElement(oe,{header:a.createElement(q.F.Fragment,null,t("group")),className:pe.actionGroup},e.actions))),he=U.UI.Knot.make(me,{actions:de}),fe=U.UI.List.make(ne.Bk,he),ge=e=>a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},a.createElement("path",{d:"M12 7L12 17",strokeLinecap:"round"}),a.createElement("path",{d:"M9 9L9 15",strokeLinecap:"round"}),a.createElement("path",{d:"M15 9L15 15",strokeLinecap:"round"}),a.createElement("path",{d:"M18 11L18 13",strokeLinecap:"round"}),a.createElement("path",{d:"M6 11L6 13",strokeLinecap:"round"}));var ve=n(68820),ye=n(72684);const _e=U.UI.Node.make((({notify:e})=>a.createElement("div",{className:ye.voiceBanner,style:{backgroundImage:`url(${ve.F.GrStaticUrl.toGrStaticUrl("text-generation/voice-banner.png")})`}},a.createElement("div",{className:ye.header},"Set your voice"),a.createElement("div",{className:ye.description},"Choose how you want your generated text to sound."),a.createElement(Y.Primary,{className:ye.setVoiceButton,onClick:e({kind:"setVoice"})},a.createElement(ge,{className:ye.voiceIcon}),"Set voice"))));var be=n(24254);const we=U.UI.Union.asOption(U.UI.Composite.make(U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:be.actions},e.content))),fe)),ke=U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:be.bannerAndActions},e.banner,e.actions))),xe=U.UI.Union.asOption(_e),Ee=U.UI.Knot.make(ke,{actions:we,banner:xe}),Se=U.UI.Union.asOption(Ee);var Re=n(6427);const Ie=U.UI.Node.make((({view:e})=>a.createElement(q.F.div,{className:Re.container},a.createElement("div",{className:Re.loadingIcon}),e("loadingMessage"))));var Ce=n(55073),Ue=n(80333);const Ae=({responseText:e,header:t,footer:n,isLoading:i,resultId:o})=>{const s=a.useRef(null);return a.useEffect((()=>{s.current&&s.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),[e]),a.createElement("div",{...(0,Z.Sh)(Ue.resultContainer,i?Ue.loading:null),"data-result-id":o,ref:s},t,""!==e.trim()?a.createElement("div",{className:Ue.result},e):null,n)},Pe=({header:e,onClick:t})=>a.createElement(Y.Tertiary,{compact:!0,onClick:t,className:Ue.headerButton},a.createElement("div",{className:Ue.headerButtonContentWrapper},a.createElement("div",{className:Ue.label},e),a.createElement("div",{className:Ue.edit},"Edit"))),Be=({iconUrl:e,loading:t,header:n})=>a.createElement("div",{className:Ue.header},t?a.createElement("div",{className:Ue.loadingIcon}):(0,r.zG)(e,E.fold(r.gn,(e=>a.createElement("img",{src:e,style:{width:20,height:20}})))),a.createElement("span",{className:Ue.label},n)),Te=U.UI.Node.make((({state:e})=>a.createElement(q.F.Fragment,null,e.pipe(h.U((({result:e})=>a.createElement(Ae,{resultId:"in-progress",responseText:(0,Ce.l)(e.delta,""),header:a.createElement(Be,{header:"Working on it...",iconUrl:E.none,loading:!0}),isLoading:!0}))))))),Ne=U.UI.Union.asOption(Te);var Ge=n(42210);const ze=e=>a.createElement("svg",{width:"12",height:"15",viewBox:"0 0 12 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 0.5C3.67157 0.5 3 1.17157 3 2V3H0.5C0.223858 3 0 3.22386 0 3.5C0 3.77614 0.223858 4 0.5 4H1.04536L1.82983 12.237C1.95203 13.5201 3.02968 14.5 4.31857 14.5H7.68143C8.97032 14.5 10.048 13.5201 10.1702 12.237L10.9546 4H11.5C11.7761 4 12 3.77614 12 3.5C12 3.22386 11.7761 3 11.5 3H9V2C9 1.17157 8.32843 0.5 7.5 0.5H4.5ZM8 3V2C8 1.72386 7.77614 1.5 7.5 1.5H4.5C4.22386 1.5 4 1.72386 4 2V3H8ZM2.04988 4H9.95012L9.17467 12.1422C9.10135 12.9121 8.45476 13.5 7.68143 13.5H4.31857C3.54524 13.5 2.89865 12.9121 2.82533 12.1422L2.04988 4Z",fill:"#99A0B3"})),Oe=e=>a.createElement("svg",{width:"12",height:"15",viewBox:"0 0 12 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.5C0.776142 0.5 1 0.723858 1 1V2H11.5C11.7022 2 11.8845 2.12182 11.9619 2.30866C12.0393 2.4955 11.9966 2.71055 11.8536 2.85355L8.70711 6L11.8536 9.14645C11.9966 9.28945 12.0393 9.5045 11.9619 9.69134C11.8845 9.87818 11.7022 10 11.5 10H1V14.5C1 14.7761 0.776142 15 0.5 15C0.223858 15 0 14.7761 0 14.5V1C0 0.723858 0.223858 0.5 0.5 0.5ZM1 9H10.2929L7.64645 6.35355C7.45118 6.15829 7.45118 5.84171 7.64645 5.64645L10.2929 3H1V9Z",fill:"#99A0B3"})),Fe=({onInsert:e,onRephrase:t,onDismiss:n,onReportOffensive:i})=>a.createElement("div",{className:Ue.footer},a.createElement("div",{className:Ue.left},a.createElement(Y.Primary,{className:Ue.insertButton,onClick:e},"Insert"),a.createElement(Y.Tertiary,{className:Ue.rephraseButton,onClick:t},"Rephrase")),a.createElement("div",{className:Ue.right},a.createElement(Y.Tertiary,{onClick:n,className:Ue.dismissButton,compact:!0},a.createElement(ze,null)),a.createElement(Ge.L,{name:"reportMenu",label:a.createElement(Y.Tertiary,{className:Ue.reportButton,compact:!0},a.createElement(Oe,null)),align:"right",vAlign:"bottom",showDelay:0,closeDelay:200,appearanceBehavior:"mouseClick",theme:{dropdownList:Ue.reportMenu}},a.createElement(Q.zx.Flat,{name:"reportOffensive",onClick:i,className:Ue.menuButton},a.createElement("div",{className:Ue.reportIcon},a.createElement(Oe,{width:14.5,height:16.5})),a.createElement("span",null,"Offensive content"))))),Me=U.UI.Node.make((({state:e,notify:t})=>a.createElement(q.F.Fragment,null,e.pipe(h.U((({result:e})=>a.createElement(Ae,{resultId:e.id,responseText:(0,Ce.l)(e.delta,""),header:(0,r.zG)(e.header.copiablePrompt,E.fold((()=>a.createElement(Be,{header:e.header.label,iconUrl:e.header.iconUrl,loading:!1})),(n=>a.createElement(Pe,{header:e.header.label,onClick:t({kind:"clickHeader",customPrompt:n})})))),isLoading:!1,footer:a.createElement(Fe,{onRephrase:t({kind:"rephrase",result:e}),onInsert:t({kind:"insert",result:e}),onDismiss:t({kind:"dismiss",result:e}),onReportOffensive:t({kind:"offensive",result:e})})}))))))),Le=U.UI.List.make(ne.Bk,Me);var De=n(95519);const Ve=U.UI.Grid.make((({slots:e,notify:t})=>a.createElement("div",{className:De.content,onScroll:e=>t({kind:"contentScroll",scrollTop:e.currentTarget.scrollTop})()},e.history,e.inProgressResult,e.actions))),He=U.UI.Union.asOption(U.UI.Composite.make(U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:De.actions},e.actions))),de)),qe=U.UI.Union.asOption(U.UI.Composite.make(U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:De.history},e.history))),Le)),Ze=U.UI.Knot.make(Ve,{history:qe,inProgressResult:Ne,actions:He}),We=U.UI.Union.make("kind",{loading:Ie,actionsAndVoiceBanner:Se,results:Ze}),Ke=U.UI.Grid.make((({slots:e,notify:t})=>{const{rect:n,onMount:i}=te.P.useRectWatcher();return te.P.useSubscriptionTo(n.pipe(x.oA,w.b((e=>t({kind:"contentSizeChange",height:e.height})())))),a.createElement("div",{ref:i},e.content)})),Ye=U.UI.Knot.make(Ke,{content:We}),je=U.UI.Union.asOption(Ye);var Qe=n(3860),$e=n(40679),Je=n(84488),Xe=n(68370),et=n(43318),tt=n.n(et);const nt=({fitContentHeight:e,text:t,onChange:n,placeholder:i,disabled:o,onFocus:s,onBlur:r,onKeyPressEnter:l,autofocus:c,onKeyDownEscape:u})=>{const d=22*(i?i.length:1),[p,m]=a.useState(d),[h,f]=a.useState(null);return a.useEffect((()=>{h&&void 0!==c&&h.focus()}),[c,h]),a.useLayoutEffect((()=>{var e;m(""===t?d:null!==(e=null==h?void 0:h.scrollHeight)&&void 0!==e?e:d)}),[t,h,i]),a.createElement(Je.G,{style:{width:"100%",height:e?p:"100%"}},a.createElement(Xe.b,null,tt().__css),a.createElement("div",{className:tt().textareaPlaceholder},a.createElement("textarea",{className:tt().textarea,style:{lineHeight:"22px"},value:t,ref:f,onChange:e=>n(e.target.value),placeholder:1===(null==i?void 0:i.length)?i[0]:void 0,disabled:o,onFocus:()=>null==s?void 0:s(),onBlur:()=>null==r?void 0:r(),onKeyPress:e=>{l&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),l())},onKeyDown:e=>{u&&"Escape"===e.key&&(e.preventDefault(),u())}}),((null==i?void 0:i.length)||0)>1&&""===t?a.createElement("div",{className:tt().placeholder,style:{lineHeight:"22px"}},(i||[]).map(((e,t)=>a.createElement(a.Fragment,{key:t},e,a.createElement("br",null))))):null))},it=e=>a.createElement("svg",{width:"32",height:"32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 16a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11-3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",fill:"#646B81"})),ot=U.UI.Node.make((({state:e,view:t,notify:n})=>a.createElement(q.F.div,{className:$e.promptContainer},t("showGrammarlyIcon").pipe(h.U((e=>e?a.createElement("div",{className:$e.logoIcon}):null))),a.createElement(q.F.div,{...(0,Z.Sh)($e.textBoxContainer,t("showGrammarlyIcon").pipe(h.U((e=>e?null:$e.withoutIcon))))},e.pipe(h.U((({placeholder:e,kind:t,text:i,autofocusToken:o})=>a.createElement(nt,{text:i,placeholder:"ready"===t?E.toUndefined(e):void 0,fitContentHeight:!0,autofocus:o,onChange:e=>n({kind:"change",text:e})(),onKeyPressEnter:"ready"===t?n({kind:"send",text:i}):()=>null,onKeyDownEscape:"waitingForResult"===t?n({kind:"stop"}):void 0,onFocus:n({kind:"focus",focused:!0}),onBlur:n({kind:"focus",focused:!1})}))))),e.pipe(h.U((({kind:e,text:t})=>"waitingForResult"===e?a.createElement(Qe.h,{round:!0,onClick:n({kind:"stop"}),className:$e.stopButton},a.createElement(it,null)):"ready"===e&&""!==t.trim()?a.createElement(Y.Primary,{className:$e.goButton,onClick:n({kind:"send",text:t})},"Go"):null))))));var st=n(96133);const rt=U.UI.Node.make((({view:e})=>a.createElement("div",{className:st.container},a.createElement("div",{className:st.header},a.createElement(q.F.img,{src:e("iconUrl"),style:{width:16,height:16}}),a.createElement(q.F.span,null,e("label")))))),at=U.UI.Union.asOption(rt);var lt=n(35490);const ct=U.UI.Union.asOption(U.UI.Composite.make(U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:lt.actionsStore},e.content))),fe));var ut=n(45196),dt=n(19057);const pt=U.UI.List.make(ne.Bk,ue),mt=U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:dt.searchResultsGrid},e.customPromptGo,a.createElement("div",{className:dt.actions},e.searchResults)))),ht=U.UI.Knot.make(mt,{searchResults:pt,customPromptGo:ue}),ft=U.UI.Union.make("kind",{searchResults:ht,actionsStore:ct}),gt=U.UI.Knot.make(U.UI.Grid.make((({slots:e,view:t,notify:n})=>a.createElement(q.F.div,{className:ut.menuContainer,style:{maxHeight:t("maxHeight")}},a.createElement(Y.Tertiary,{compact:!0,className:ut.collapseButton,onClick:n({kind:"collapse"})},a.createElement(J.JO.Arrow,{direction:J.n4.down,className:ut.arrowIcon})),e.content))),{content:ft}),vt=U.UI.Union.asOption(gt);var yt=n(79132);const _t=U.UI.Grid.make((({slots:e,view:t})=>{const{onMount:n,rect:i}=te.P.useRectWatcher();return a.createElement(q.F.div,{className:yt.promptContainer},a.createElement(q.F.div,{className:yt.promptAndMenu,"data-expanded":t("menuExpanded")},e.promptMenu,a.createElement("div",{ref:n},e.promptHeader,e.promptField)),p.aj([i,t("menuExpanded")]).pipe(h.U((([e,t])=>(0,r.zG)(e,E.filter((()=>t)),E.fold(r.gn,(e=>a.createElement("div",{className:yt.placeholder,style:{height:e.height}}))))))))})),bt=U.UI.Knot.make(_t,{promptField:ot,promptHeader:at,promptMenu:vt}),wt=U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:ee.container},e.content,e.prompt))),kt=U.UI.Knot.make(wt,{content:je,prompt:bt});var xt=n(99705);const Et=({kind:e,label:t,iconUrl:n,isUnselectable:i,onToggle:o})=>a.createElement("button",{disabled:"disabled"===e,className:xt.chip,"data-kind":e,"data-unselectable":i,onClick:()=>{"disabled"!==e&&o("selected"!==e&&("unselected"===e||(0,I.L0)(e)))}},n?a.createElement("img",{src:n,style:{width:20,height:20}}):null,a.createElement("span",null,t));var St=n(2372);const Rt=({chips:e,className:t,onToggle:n})=>a.createElement(q.F.div,{...(0,Z.Sh)(St.chips,t)},e.pipe(h.U(ne.UI((e=>a.createElement(Et,{...e,onToggle:t=>n(e,t),key:e.label}))))));var It=n(90361),Ct=n(39589),Ut=n(28458),At=n.n(Ut);const Pt=({text:e,onChange:t,placeholder:n,disabled:i,onFocus:o,onBlur:s,onKeyPressEnter:r,autofocus:l,onKeyDownEscape:c,...u})=>{const[d,p]=a.useState(null);return a.useEffect((()=>{d&&void 0!==l&&d.focus()}),[l,d]),a.createElement(Je.G,{style:{width:"100%",height:"22px"}},a.createElement(Xe.b,null,At().__css),a.createElement("input",{...u,className:At().textBox,style:{lineHeight:"22px"},value:e,ref:p,onChange:e=>t(e.target.value),placeholder:n,disabled:i,onFocus:()=>null==o?void 0:o(),onBlur:()=>null==s?void 0:s(),onKeyPress:e=>{r&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),r())},onKeyDown:e=>{c&&"Escape"===e.key&&(e.preventDefault(),c())}}))};function Bt({text:e,placeholder:t,clearButton:n,selectOnBlur:i,label:o,options:s,className:r,filterBy:l=((e,t)=>o(e).toLowerCase().includes(t.toLowerCase())),onInputChange:c,onSelectionChange:u}){const[p,m]=a.useState(!1),h=a.useRef(It.iy.create()),[g,y]=a.useState(null),[_,b]=a.useState(null),{styles:k,attributes:x}=(0,W.D)(g,_,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),E=s.filter((t=>l(t,e.trim()))),S=p&&E.length>0,R=a.useMemo((()=>new d.xQ),[]);return te.P.useSubscriptionTo(R.pipe(f.b(50),v.h((e=>!e)),w.b((()=>{m(!1),i&&""!==e.trim()&&u(E.length>0?E[0]:null)})))),a.createElement("div",{...(0,Z.Sh)(Ct.inputContainer,r),ref:y},a.createElement(Pt,{placeholder:t,onChange:c,text:e,onFocus:()=>{m(!0),R.next(!0)},onBlur:()=>R.next(!1),role:"combobox","aria-haspopup":"listbox","aria-owns":h.current,"aria-expanded":S}),""!==e.trim()&&!!n&&a.createElement("button",{onClick:()=>u(null),className:Ct.clearButton,"aria-label":"Clear",type:"button"},a.createElement(J.JO.Close,{className:Ct.closeIcon})),S&&a.createElement("div",{ref:b,style:k.popper,...x.popper,className:Ct.menu,onFocus:()=>R.next(!0),onBlur:()=>R.next(!1)},a.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:h.current},E.map((t=>{const n=o(t);return a.createElement("li",{key:n,"aria-label":n,role:"option"},a.createElement("button",{className:Ct.option,onClick:()=>{u(t),m(!1)}},a.createElement(Tt,{label:n,pattern:e})))})))))}const Tt=({label:e,pattern:t})=>{if(""===t.trim())return a.createElement(a.Fragment,null,e);const n=t.trim(),i=e.split(new RegExp(n,"i")),o=(0,r.zG)(i.map(((e,t)=>({token:e,mark:!1,end:t*n.length+i.slice(0,t).join("").length+e.length}))),ne.iD({token:"",mark:!0,end:0})).map(((t,i,o)=>t.mark&&i>0?{token:e.slice(o[i-1].end,o[i-1].end+n.length),mark:!0}:{token:t.token,mark:!1})).filter((e=>e.token.length>0));return a.createElement(a.Fragment,null,o.map(((e,t)=>e.mark?a.createElement("mark",{key:t,className:Ct.part},e.token):a.createElement("span",{key:t,className:Ct.part},e.token))))};var Nt=n(44127);function Gt({label:e,selection:t,className:n,placeholder:i,options:o,onSelectionChange:s,renderOption:r}){const[l,c]=a.useState(!1),u=a.useRef(It.iy.create()),p=a.useRef(It.iy.create()),[m,h]=a.useState(null),[g,y]=a.useState(null),{styles:_,attributes:b}=(0,W.D)(m,g,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),k=a.useMemo((()=>new d.xQ),[]);return te.P.useSubscriptionTo(k.pipe(f.b(50),v.h((e=>!e)),w.b((()=>{c(!1)})))),a.createElement("div",{...(0,Z.Sh)(Nt.selectContainer,n),ref:h},a.createElement("button",{className:Nt.selectButton,onFocus:()=>{c(!0),k.next(!0)},onBlur:()=>k.next(!1),type:"button","aria-haspopup":"listbox","aria-owns":u.current,"aria-expanded":l,"aria-labelledby":p.current},a.createElement("div",{id:p.current,className:Nt.buttonlabel},t?r?r(t):e(t):i),a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:Nt.chevron},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.64645 9.64645C7.84171 9.45118 8.15829 9.45118 8.35355 9.64645L12 13.2929L15.6464 9.64645C15.8417 9.45118 16.1583 9.45118 16.3536 9.64645C16.5488 9.84171 16.5488 10.1583 16.3536 10.3536L12 14.7071L7.64645 10.3536C7.45118 10.1583 7.45118 9.84171 7.64645 9.64645Z",fill:"#646B81"}))),l&&a.createElement("div",{ref:y,style:_.popper,...b.popper,className:Nt.menu,onFocus:()=>k.next(!0),onBlur:()=>k.next(!1)},a.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:u.current},o.map(((t,n)=>{const i=e(t);return a.createElement("li",{key:n,"aria-label":i,role:"option"},a.createElement("button",{className:Nt.option,onClick:()=>{s(t),c(!1)}},r?r(t):e(t)))})))))}var zt=n(11478);const Ot=U.UI.Node.make((({view:e,state:t,notify:n})=>a.createElement("div",{className:zt.container},a.createElement("div",{className:zt.content},a.createElement("section",{className:zt.section},a.createElement("h2",{className:zt.sectionTitle},"Formality"),a.createElement(Rt,{className:zt.chips,chips:e("styles").pipe(h.U(ne.UI((e=>({...e,isUnselectable:!1}))))),onToggle:e=>n({kind:"selectStyle",id:e.id})()})),a.createElement("section",{className:zt.section},a.createElement("h2",{className:zt.sectionTitle},"Tone"),a.createElement(q.F.div,{className:zt.sectionDescription},"Select up to"," ",e("maxSelectableTones").pipe(h.U((e=>{return t=e,Number.isInteger(t)&&t>=0&&t<10?function(e){return["zero","one","two","three","four","five","six","seven","eight","nine"][e]}(e):`${e}`;var t})))),a.createElement(Rt,{className:zt.chips,chips:e("tones").pipe(h.U(ne.UI((e=>({...e,isUnselectable:!0}))))),onToggle:(e,t)=>n({kind:"toggleTone",selected:t,id:e.id})()})),a.createElement(q.F.Fragment,null,t.pipe(h.U((e=>(0,r.zG)(e.roles,o.c2,E.fold(r.gn,(t=>a.createElement("section",{className:zt.section},a.createElement("h2",{className:zt.sectionTitle},"Your profession"),a.createElement(Bt,{className:zt.roleTypeahead,placeholder:"Product designer",text:e.roleTypeaheadText,onInputChange:e=>n({kind:"updateRoleTypeaheadText",text:e})(),onSelectionChange:e=>n({kind:"selectRole",role:E.fromNullable(e)})(),options:t,label:e=>e.label,clearButton:!0,selectOnBlur:!0}))))))))),a.createElement("section",{className:zt.section},a.createElement("h2",{className:zt.sectionTitle},"I write in"),a.createElement(q.F.Fragment,null,t.pipe(h.U((({dialects:e,selectedDialect:t})=>a.createElement(Gt,{className:zt.dialectSelect,options:e.filter((e=>!A.LA.Dialect.Id.eq.equals(e.id,t.id))),selection:t,onSelectionChange:e=>n({kind:"selectDialect",dialect:e})(),label:e=>e.label,renderOption:e=>a.createElement("div",{className:zt.dialectLabel},a.createElement("div",{className:zt.dialectIcon},a.createElement("img",{src:e.iconUrl,style:{width:16,height:16}})),e.label)})))))),a.createElement(q.F.Fragment,null,e("description").pipe(h.U((e=>""!==e.trim()?a.createElement("div",{className:zt.description},e):null)))),a.createElement(q.F.div,{className:zt.footer},a.createElement(Y.Tertiary,{className:zt.skipButton,onClick:n({kind:"close"})},"Close"),e("applyButtonEnabled").pipe(h.U((e=>a.createElement(Y.Primary,{className:zt.applyButton,onClick:n({kind:"apply"}),disabled:!e},"Use this voice"))))))))),Ft=U.UI.Union.make("kind",{chat:kt,voiceProfile:Ot});var Mt=n(9342);const Lt=U.UI.Node.make((({notify:e,view:t})=>a.createElement("div",{className:Mt.buttonAndLabel},a.createElement(Y.Tertiary,{compact:!0,onClick:e({kind:"backButtonClick"})},a.createElement(J.JO.Arrow,{direction:J.n4.left})),a.createElement(q.F.Fragment,null,t("activeViewLabel").pipe(h.U(E.fold(r.gn,(e=>a.createElement("span",{className:Mt.viewLabel},e)))))))));var Dt=n(15753);const Vt=U.UI.Node.make((({view:e,notify:t})=>a.createElement(Y.Tertiary,{className:Dt.voiceButton,onClick:t({kind:"voiceButtonClick"})},a.createElement(ge,{className:Dt.voiceIcon}),a.createElement(q.F.span,null,e("styleLabel")))));var Ht=n(8125);const qt=U.UI.Node.make((({view:e,state:t})=>a.createElement(Y.Tertiary,{onClick:Ht.Q1,title:t.pipe(h.U((e=>`${e.creditsRemaining}/${e.creditsAllocated} prompts left. Next refill in ${function(e){const t=e-Date.now();return Math.ceil(t/864e5)}(e.creditsRenewalDate)} days.`)))},a.createElement(q.F.Fragment,null,e("creditsRemaining").pipe(h.U((e=>e>0?`${e} prompts`:"Out of prompts"))))))),Zt=U.UI.Union.asOption(qt);var Wt=n(93112);const Kt=U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:Wt.backAndVoice},e.back,a.createElement("div",{className:Wt.buttonSeparator}),e.voice))),Yt=U.UI.Knot.make(Kt,{back:Lt,voice:Vt}),jt=U.UI.Union.make("kind",{backButton:Lt,voiceButton:Vt,backAndVoiceButton:Yt}),Qt=U.UI.Union.asOption(jt),$t=U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:Wt.toolbarContent},e.left,e.right))),Jt=U.UI.Knot.make($t,{left:Qt,right:Zt}),Xt=U.UI.Knot.make(X,{toolbar:Jt,content:Ft});var en=n(63919),tn=n(99682),nn=n(38194),on=n(83401),sn=n(14811),rn=n(93508),an=n(49708);function ln(e,t){return(0,r.ls)(nn.B(),(n=>m.T(n.pipe(w.b((n=>function(e,t,n){switch(e.kind){case"focus":return t.onFocus(e.focused);case"mount":return t.onMount(e.element);case"close":return n.toolbarClose();case"dragHandleMount":break;default:(0,I.L0)(e)}}(n,e,t))),y.w((()=>on.C))),n.pipe(function(e){return(0,r.ls)(h.U((e=>"dragHandleMount"===e.kind?E.some(e.element):E.none)),x.oA,(0,tn.u)(),(t=e,(0,r.ls)(nn.B(),(e=>(0,r.zG)(m.T(e.pipe(v.h((e=>en.E9.l1Distance(en.E9.fromCartesian(e.translate),en.E9.fromCartesian(e.lastTranslate))>=3)),w.b((e=>t.onDrag(e.translate)))),e.pipe(v.h((e=>e.dragEnd)),w.b((()=>t.onDragEnd())))),y.w((()=>on.C)))))),y.w((()=>on.C)));var t}(e)),n.pipe(function(e){return(0,r.ls)(h.U((e=>"mount"===e.kind?E.some(e.element):E.none)),x.oA,y.w((e=>sn.YC(e).pipe(rn.O(null),h.U((()=>e.getBoundingClientRect()))))),w.b((t=>e.onResize(t))),y.w((()=>on.C)))}(e)),n.pipe((0,r.ls)(h.U((e=>"mount"===e.kind?E.some(e.element):E.none)),x.oA,h.U(E.some),te.P.FocusTrap.dynamicFocusTrap(te.P.FocusTrap.InitialFocus.none,cn,un),y.w((()=>on.C)))),p.aj([e.state,t.state]).pipe(h.U((([e,{activeView:t,contentOverflowUnderToolbar:n}])=>({...e,contentOverflowUnderToolbar:n&&"results"===t})))))))}function cn(e){var t;if(e instanceof HTMLIFrameElement){const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document;if(n){const e=n.body.querySelector("textarea:not([disabled]), input:not([disabled])");e&&"focus"in e&&"function"==typeof e.focus&&e.focus()}}else e.focus()}function un(e,t){return e instanceof HTMLIFrameElement?e.contentDocument?an.R(e.contentDocument.body,t):on.C:an.R(e,t)}var dn,pn,mn=n(48044),hn=n(13853),fn=n(58028),gn=n(34107),vn=n(41398),yn=n(45701);!function(e){let t,n;e.isSupportedDynamicAction=(0,Ht.Kg)(A.aU.DynamicInput.isFollowUpQuestion,A.aU.DynamicInput.isQuickAction),function(e){e.ordByGroup=yn.contramap((e=>e.group.rank))(yn.ordNumber)}(t=e.SupportedDynamicActions||(e.SupportedDynamicActions={})),function(e){e.make=function(e){return{kind:"backendAction",action:e}}}(n=e.BackendAction||(e.BackendAction={}))}(dn||(dn={})),function(e){e.create=function(){return{activeView:"loading",previousView:"loading",stagingVoiceProfile:E.none,textBox:"",selectedDynamicAction:E.none,contentOverflowUnderToolbar:!1,promptAutofocusToken:0}},e.updateActiveView=function(e){return t=>({...t,activeView:e,previousView:t.activeView})}}(pn||(pn={}));class _n{constructor(e,t,n=c.Y.create(_n.name)){this._handlers=e,this._session=t,this._log=n,this._state=C.h.create(pn.create()),this._subs=new u.w,this._userTyped=new d.xQ,this.promptMenuActions=new d.xQ,this.state=C.h.combine(this._state,this._session,((e,t)=>({session:A.z_.toOption(t),userPromptAction:(0,r.zG)(A.z_.toOption(t),E.chain((e=>e.context.userPromptAction))),...e}))),this._subs.add(this.state.subscribe((e=>this._log.debug("State update",e)))),this._subs.add(this._updateActiveView().subscribe()),this._subs.add(this._userTyped.pipe(f.b(150),vn.M(this._state),h.U((([e,t])=>t)),v.h((e=>E.isNone(e.selectedDynamicAction))),w.b((e=>{this._handlers.trackPromptSearch(),this.promptMenuActions.next({kind:"showSearchRestuls",search:e.textBox})}))).subscribe())}_updateActiveView(){return C.h.combine(this._session.view(A.z_.toOption).view(E.map((e=>({hasHistory:e.resultHistory.filter((e=>"complete"===e.kind)).length>0,hasInProgressResult:E.isSome(e.inProgressResult)})))),this._state.view("selectedDynamicAction").view(E.isSome),((e,t)=>(0,r.zG)(e,E.map((({hasHistory:e,hasInProgressResult:n})=>t?"actionSelected":e||n?"results":"actionsList")),S.bw((e=>this._state.modify((t=>"voiceProfile"!==t.activeView?pn.updateActiveView(e)(t):t)))))))}toolbarClose(){this._handlers.closeIdeationAssistant(A.z_.EndReason.closed)}goBack(){this._state.modify((e=>({..."actionSelected"===e.activeView?pn.updateActiveView("actionsList")(e):pn.updateActiveView(e.previousView)(e),selectedDynamicAction:"actionSelected"===e.activeView?E.none:e.selectedDynamicAction,textBox:"actionSelected"===e.activeView?"":e.textBox})))}openVoiceProfile(){(0,r.zG)(A.z_.toOption(this._session.get()),S.bw((e=>{this._handlers.trackVoiceProfileOpen(),this._state.modify((0,r.ls)(pn.updateActiveView("voiceProfile"),fn.t8("stagingVoiceProfile",E.some({selectedStyle:e.voiceProfile.selectedStyle,selectedTonesPerStyle:e.voiceProfile.selectedTonesPerStyle,selectedRole:e.voiceProfile.selectedRole,selectedDialect:e.voiceProfile.selectedDialect,needsSetup:e.voiceProfile.needsSetup}))))})))}closeVoiceProfile(){this._handlers.trackVoiceProfileSkip(),this._state.modify((e=>(0,r.zG)(pn.updateActiveView(e.previousView)(e),fn.t8("stagingVoiceProfile",E.none))))}applyVoiceProfile(){const e=this._state.get().stagingVoiceProfile;this._state.modify((e=>(0,r.zG)(pn.updateActiveView(e.previousView)(e),fn.t8("stagingVoiceProfile",E.none)))),(0,r.zG)(e,S.bw((e=>{this._handlers.setVoiceProfile(e)})))}toggleTone(e,t){this._state.lens("stagingVoiceProfile").modify(E.map((n=>({...n,selectedTonesPerStyle:(0,r.zG)(n.selectedTonesPerStyle,t?(0,gn.n)(A.LA.Style.Id.eq)(n.selectedStyle,E.fold((()=>new Set([e])),hn.$T(A.LA.Tone.Id.eq)(e))):(0,r.ls)(mn.cq(A.LA.Style.Id.eq)(n.selectedStyle,hn.Od(A.LA.Tone.Id.eq)(e)),E.getOrElse((()=>n.selectedTonesPerStyle))))}))))}selectStyle(e){this._state.lens("stagingVoiceProfile").modify(E.map((t=>({...t,selectedStyle:e}))))}selectRole(e){this._state.lens("stagingVoiceProfile").modify(E.map((t=>({...t,selectedRole:e}))))}selectDialect(e){this._state.lens("stagingVoiceProfile").modify(E.map((t=>({...t,selectedDialect:e}))))}onFocus(e){this._handlers.onFocus(e)}updateTextBox(e){this._state.lens("textBox").set(e),this._userTyped.next(e)}executeAction(e){if(this.promptMenuActions.next({kind:"close"}),"backendAction"===e.kind)if(A.aU.DynamicInput.isFollowUpQuestion(e.action)){const t=e.action;this._state.modify((e=>({...e,textBox:"",selectedDynamicAction:E.some(t)})))}else A.aU.DynamicInput.isQuickAction(e.action)?(this._state.modify((e=>({...e,textBox:"",selectedDynamicAction:E.none}))),this._handlers.submitAction(e.action)):(0,I.L0)(e.action);else"allResults"===e.kind?(this._handlers.trackActionsStoreAllIdeasOpen(),this.promptMenuActions.next({kind:"showActionsStore"})):"go"===e.kind?this.go():(0,I.L0)(e.kind)}go(){this.promptMenuActions.next({kind:"close"}),E.isSome(this._state.get().selectedDynamicAction)?this._submitSelectedFollowUpAction():this._submitCustomPrompt()}stop(){this._handlers.stopInProgressResult()}insert(e){this._handlers.insertText(e.id,(0,Ce.l)(e.delta,""))}rephrase(e){this._handlers.regenerateResult(e.id)}dismiss(e){this._handlers.dismissResult(e.id)}reportOffensive(e){this._handlers.trackResultOffensive(e.id)}clickResultHeader(e){this._state.modify((t=>({...t,textBox:e,promptAutofocusToken:t.promptAutofocusToken+1})))}contentOverflowUnderToolbar(e){this._state.lens("contentOverflowUnderToolbar").set(e)}collapsePromptMenu(){this.promptMenuActions.next({kind:"close"})}dispose(){this._subs.unsubscribe()}_submitSelectedFollowUpAction(){const e=(0,r.zG)(this._state.get().textBox.trim(),E.fromPredicate((e=>""!==e)));(0,r.zG)(i.Y(E.option)({text:e,selectedDynamicAction:this._state.get().selectedDynamicAction}),E.map((({text:e,selectedDynamicAction:t})=>A.aU.FollowUpQuestionValue.fromInputAndValue(t,e))),S.bw((e=>{this._state.modify((e=>({...e,selectedDynamicAction:E.none,textBox:""}))),this._handlers.submitAction(e)})))}_submitCustomPrompt(){(0,r.zG)(this._state.get().textBox.trim(),E.fromPredicate((e=>""!==e)),E.chain((e=>(0,r.zG)(A.z_.toOption(this._session.get()),E.chain((e=>e.context.userPromptAction)),E.map((t=>({userPromptAction:t,text:e})))))),S.bw((({text:e,userPromptAction:t})=>{this._state.lens("textBox").set(""),this._handlers.submitAction(A.aU.UserPromptValue.fromInput(t,e))})))}}function bn(e){return e.state.view("session").view((0,r.ls)(E.map((e=>e.context.dynamicActions)),E.chain((0,r.ls)(ne.hX(dn.isSupportedDynamicAction),o.c2))))}function wn(e=3,t=(t=>t.length>e)){return n=>t(n)?o.Ss(ne.ke(e)(n),{kind:"allResults"}):n}function kn(e,t,n){return U.Z.fromSideEffect((t=>e.executeAction(t.action)),p.aj([t,e.state.view("textBox")]).pipe(h.U((([e,t])=>({icon:"backendAction"===e.kind?se.F2({url:e.action.iconUrl}):se.t$({kind:e.kind}),label:"backendAction"===e.kind?e.action.label:"allResults"===e.kind?"All ideas":"go"===e.kind?`${t.trim()}`:(0,I.L0)(e.kind),action:e,mode:n})))))}function xn(e,t,n){return U.Z.composeList(ne.Bk,(()=>t.pipe(h.U(E.getOrElse((()=>[]))))),(t=>kn(e,k.of(t),n)))}function En(e,t){return U.Z.composeList(ne.Bk,(()=>t),(t=>function(e,t){return U.Z.composeKnot({root:()=>k.of({group:t.group}),actions:xn(e,k.of(E.some(t.actions)),"standard")})}(e,t)))}function Sn(e){return U.Z.fromSideEffect((t=>e.openVoiceProfile()),null)}function Rn(e){const t=e.state.view("session").view(E.chain((e=>e.selectedText))),n=e.state.view("session").view((0,r.ls)(E.map((e=>e.voiceProfile.needsSetup)),E.getOrElse((()=>!1)))),i=C.h.combine(bn(e),t,((e,t)=>(0,r.zG)(e,E.map((e=>o.of({group:E.isSome(t)?`Your text: "${t.value}"`:"Ideas for you",actions:wn()((0,r.zG)(e,o.UI(dn.BackendAction.make)))}))))));return U.Z.composeOption(function(e,t,n){return U.Z.composeKnot({actions:In(e,t),banner:U.Z.composeOption(Sn(e),(()=>n.view((e=>e?E.some(null):E.none))))})}(e,i,n),(()=>C.h.combine(i,n,((e,t)=>E.isSome(e)||t?E.some(null):E.none))))}function In(e,t){return U.Z.composeOption(En(e,t.pipe(x.oA)),(()=>t))}function Cn(e){return()=>e.state.view("session").view((0,r.ls)(E.map((e=>e.context)),E.filter(A._y.isPending),E.fold((()=>({loadingMessage:"Working on it..."})),(e=>({loadingMessage:e.loadingMessage})))))}var Un=n(55415);function An(e){const t=e.state.view((0,r.ls)(Un.ei("session"),E.chain(Un.ei("inProgressResult")),E.map((e=>({result:e})))));return U.Z.composeOption((()=>t.pipe(x.oA)),(()=>t))}function Pn(e,t){return U.Z.composeList(ne.Bk,(()=>t.pipe(h.U((0,r.ls)(ne.ke(50),ne.Su(((e,t)=>({result:t,isMostRecent:0===e}))),ne.GY)))),(t=>function(e,t){return U.Z.fromSideEffect((t=>{switch(t.kind){case"insert":return e.insert(t.result);case"rephrase":return e.rephrase(t.result);case"dismiss":return e.dismiss(t.result);case"offensive":return e.reportOffensive(t.result);case"clickHeader":return e.clickResultHeader(t.customPrompt);default:(0,I.L0)(t)}}),k.of({result:t.result}))}(e,t)))}function Bn(e){return U.Z.composeKnot({root:U.Z.fromSideEffect((t=>e.contentOverflowUnderToolbar(t.scrollTop>0)),null),actions:(0,r.zG)(C.h.combine(bn(e),e.state.view("session").view(E.chain((e=>e.inProgressResult))),((e,t)=>(0,r.zG)(e,E.filter((()=>E.isNone(t)))))).view(E.map((0,r.ls)(o.UI(dn.BackendAction.make),wn()))),(t=>U.Z.composeOption(xn(e,t,"compact"),(()=>t)))),inProgressResult:An(e),history:Tn(e)})}function Tn(e){const t=e.state.view("session").view((0,r.ls)(E.map((e=>(0,r.zG)(e.resultHistory,ne.hX(A.x4.isComplete)))),E.chain(o.c2)));return U.Z.composeOption(Pn(e,t.view(E.getOrElse((()=>[])))),(()=>t))}function Nn(e,t){return U.Z.composeUnion({loading:Cn(e),actionsAndVoiceBanner:Rn(e),results:Bn(e)},(()=>t.pipe(x.oA,h.U((e=>({kind:e}))))))}function Gn(e,t){const n=e.state.pipe(h.U((({activeView:e})=>{switch(e){case"loading":return E.some("loading");case"actionsList":return E.some("actionsAndVoiceBanner");case"actionSelected":case"voiceProfile":return E.none;case"results":return E.some("results");default:(0,I.L0)(e)}})));return U.Z.composeOption(function(e,t,n){return U.Z.composeKnot({root:U.Z.fromSideEffect((e=>n.set(E.some(e.height+8))),null),content:Nn(e,t)})}(e,n,t),(()=>n))}var zn;function On(e){return U.Z.fromSideEffect((t=>{switch(t.kind){case"focus":return e.onFocus(t.focused);case"change":return e.updateTextBox(t.text);case"send":return e.go();case"stop":return e.stop();default:(0,I.L0)(t)}}),e.state.view((e=>{return{kind:(0,r.zG)(e.session,E.fold((()=>"loading"),(e=>(0,r.zG)(e.inProgressResult,E.fold((()=>"ready"),(()=>"waitingForResult")))))),placeholder:(t=e,(0,r.zG)(t.selectedDynamicAction,E.map((e=>(""!==e.args[0].label.trim()?[e.args[0].label]:[]).concat((0,r.zG)(e.args[0].hints,E.fold((()=>[]),(e=>(""!==e.header.trim()?[e.header]:[]).concat(...e.items.filter((e=>""!==e.trim())).map((e=>` ${e}`))))))))),E.alt((()=>(0,r.zG)(t.userPromptAction,E.map((e=>[e.arg.label]))))))),showGrammarlyIcon:(0,r.zG)(e.selectedDynamicAction,E.fold(r.W8,(e=>E.isNone(e.args[0].hints)))),text:e.textBox,autofocusToken:zn.create(`${e.activeView}_${(0,r.zG)(e.session,E.chain((e=>e.inProgressResult)),E.fold((()=>"done"),(()=>"inProgress")))}_${(0,r.zG)(e.selectedDynamicAction,E.fold((()=>"no-selected-action"),(()=>"selected-action")))}_${e.promptAutofocusToken}`)};var t})))}function Fn(e){return U.Z.composeOption(function(e){return()=>e.state.view("selectedDynamicAction").pipe(x.oA,h.U((e=>({label:e.label,iconUrl:e.iconUrl}))))}(e),(()=>e.state.view("selectedDynamicAction")))}!function(e){e.create=function(e){return null!=e?e:It.iy.create()}}(zn||(zn={}));var Mn=n(19751);function Ln(e){return e.split(/\s+/).map((e=>e.trim())).filter((e=>""!==e))}function Dn(e,t){const n=e.promptMenuActions.pipe(y.w((t=>"showSearchRestuls"===t.kind?e.state.view("session").pipe(h.U((e=>(0,r.zG)(e,E.filter((()=>""!==t.search.trim())),E.chain((e=>{return n=(0,r.zG)(e.context.dynamicActions,ne.hX(dn.isSupportedDynamicAction)),i=t.search,(0,r.zG)(n,ne.DZ((e=>(0,r.zG)(function(e,t,n){const i=Ln(e),o=[...Ln(t),...(0,r.zG)(n,ne.tS((e=>Ln(e))))],s=i.map((()=>null));let a=0;for(const e of o){if(a>=i.length)break;e.toLowerCase().includes(i[a].toLowerCase())&&(s[a]=0,++a)}return s.includes(null)?E.none:E.some(s.map((e=>null!=e?e:0)).reduce(((e,t)=>e+t),0))}(i,e.searchLabel,e.searchTags),E.map((t=>({data:e,matchScore:t})))))),ne.DY(yn.contramap((({matchScore:e})=>e))(yn.ordNumber)),ne.UI((({data:e})=>e)),o.c2);var n,i})),E.map((e=>({kind:"searchResults",actions:e}))))))):"showActionsStore"===t.kind?bn(e).view(E.map((e=>({kind:"actionsStore",actions:e})))):"close"===t.kind?k.of(E.none):(0,I.L0)(t))),rn.O(E.none),Mn.shareReplay({bufferSize:1,refCount:!0}));return p.aj([t,n]).pipe(h.U((([e,t])=>(0,r.zG)(i.Y(E.option)({maxHeight:e,content:t}),E.map((({content:e,maxHeight:t})=>({...e,maxHeight:t})))))))}function Vn(e,t){const n=t.pipe(h.U(E.map((e=>o.QI({group:"Ideas for you",actions:o.QI(dn.BackendAction.make(e[0]),(0,r.zG)(e.slice(1),ne.ke(2),ne.UI(dn.BackendAction.make)))},function(e){return(0,r.zG)(e,ne.pO((e=>{const{init:t,rest:n}=ne.zT((t=>t.group.label===e[0].group.label))(e);return[t,n]})),ne.UI((e=>i.Y(E.option)({group:(0,r.zG)(e,ne.YM,E.map((e=>e.group.label))),actions:(0,r.zG)(e,ne.UI(dn.BackendAction.make),o.c2)}))),ne.oA,o.c2,E.getOrElse((()=>[{group:e[0].group.label,actions:[dn.BackendAction.make(e[0])]}])))}((0,r.zG)(e,o.DY(dn.SupportedDynamicActions.ordByGroup))))))));return U.Z.composeOption(En(e,n.pipe(x.oA)),(()=>n))}function Hn(e,t){return U.Z.composeKnot({searchResults:xn(e,t.pipe(h.U(E.map(o.UI(dn.BackendAction.make)))),"standard"),customPromptGo:kn(e,k.of({kind:"go"}),"standard")})}function qn(e,t){return U.Z.composeOption(U.Z.composeKnot({root:U.Z.fromSideEffect((t=>e.collapsePromptMenu()),t.pipe(x.oA)),content:U.Z.composeUnion({searchResults:Hn(e,t.pipe(h.U((0,r.ls)(E.filter((({kind:e})=>"searchResults"===e)),E.map(Un.ei("actions")))))),actionsStore:Vn(e,t.pipe(h.U((0,r.ls)(E.filter((({kind:e})=>"actionsStore"===e)),E.map(Un.ei("actions"))))))},(()=>t.pipe(x.oA)))}),(()=>t))}function Zn(e,t){const n=Dn(e,t);return U.Z.composeKnot({root:()=>n.pipe(h.U((e=>({menuExpanded:E.isSome(e)})))),promptField:On(e),promptHeader:Fn(e),promptMenu:qn(e,n)})}function Wn(e){const t=C.h.create(E.none);return U.Z.composeKnot({content:Gn(e,t),prompt:Zn(e,t)})}function Kn(e){const t=C.h.create("");return U.Z.fromSideEffect((n=>{switch(n.kind){case"apply":return e.applyVoiceProfile();case"close":return e.closeVoiceProfile();case"toggleTone":return e.toggleTone(n.id,n.selected);case"selectStyle":return e.selectStyle(n.id);case"selectRole":return t.set((0,r.zG)(n.role,E.fold((()=>""),(e=>e.label)))),e.selectRole((0,r.zG)(n.role,E.map((e=>e.id))));case"selectDialect":return e.selectDialect(n.dialect.id);case"updateRoleTypeaheadText":return t.set(n.text);default:(0,I.L0)(n)}}),C.h.combine(e.state,t,(({stagingVoiceProfile:e,session:t},n)=>(0,r.zG)(i.Y(E.option)({voiceProfile:(0,r.zG)(t,E.map((e=>e.voiceProfile))),stagingVoiceProfile:e}),E.fold((()=>({tones:[],styles:[],roles:[],selectedRole:E.none,maxSelectableTones:0,applyButtonEnabled:!1,description:"",roleTypeaheadText:"",dialects:A.LA.Dialect.all(),selectedDialect:A.LA.Dialect.american})),(({stagingVoiceProfile:e,voiceProfile:t})=>(0,r.zG)(t.styles,ne.Ew((t=>t.id===e.selectedStyle)),(i=>({styles:(0,r.zG)(t.styles,ne.UI((t=>({...t,kind:t.id===e.selectedStyle?"selected":"unselected"})))),tones:(0,r.zG)(i,E.fold((()=>[]),(t=>(0,r.zG)(t.tones,ne.UI((n=>({...n,kind:(0,r.zG)(E.fromNullable(e.selectedTonesPerStyle.get(e.selectedStyle)),E.getOrElse((()=>new Set)),(e=>e.has(n.id)?"selected":e.size>=t.maxTones?"disabled":"unselected"))}))))))),roles:t.roles,selectedRole:e.selectedRole,maxSelectableTones:(0,r.zG)(i,E.fold((()=>3),(e=>e.maxTones))),applyButtonEnabled:!A.LA.Selections.eq.equals(e,t),description:"These voice settings will apply to any text you generate with GrammarlyGO.",roleTypeaheadText:n,dialects:t.dialects,selectedDialect:t.dialects.find((t=>A.LA.Dialect.Id.eq.equals(t.id,e.selectedDialect)))||A.LA.Dialect.american})))))))))}function Yn(e){const t=e.state.view("session").view(E.chain(Un.ei("usageInfo")));return U.Z.composeOption(function(e){return()=>e.pipe(x.oA)}(t),(()=>t))}function jn(e){return U.Z.composeKnot({left:Qn(e),right:Yn(e)})}function Qn(e){return U.Z.fromSideEffect((t=>{if("Some"===t.key&&"value"===t.action.key){const n=t.action.action;if("backAndVoiceButton"===n.key){if("back"===n.action.key)return e.goBack();if("voice"===n.action.key)return e.openVoiceProfile();(0,I.L0)(n.action)}else{if("backButton"===n.key)return e.goBack();if("voiceButton"===n.key)return e.openVoiceProfile();(0,I.L0)(n)}}}),function(e){const t=e=>{var t;return(null===(t=e.styles.find((t=>A.LA.Style.Id.eq.equals(t.id,e.selectedStyle))))||void 0===t?void 0:t.label)||""};return e.state.view((({activeView:e,session:n})=>(0,r.zG)(n,E.map((e=>e.voiceProfile)),E.fold((()=>E.none),(n=>"voiceProfile"===e?E.some({kind:"backButton",activeViewLabel:E.some("My voice")}):"loading"===e||"actionsList"===e||"results"===e?E.some({kind:"voiceButton",styleLabel:t(n)}):"actionSelected"===e?E.some({kind:"backAndVoiceButton",back:{activeViewLabel:E.none},voice:{styleLabel:t(n)}}):(0,I.L0)(e))))))}(e))}var $n,Jn=n(53447),Xn=n(3441),ei=n(2768);class ti{constructor(e,t){this._positionInfo=e,this._onFocus=t,this._internalState=C.h.create({managedPositionInfo:E.none,assistant:E.none,dragState:E.none}),this.state=this._internalState.view((e=>(0,r.zG)(e.dragState,E.map(ni),E.alt((()=>(0,r.zG)(e.managedPositionInfo,E.map((e=>({kind:"initial",referenceElement:e.referenceElement,placement:e.placement,offset:e.offset})))))),E.getOrElse((()=>({kind:"none"})))))),this._subs=new u.w,this._subs.add(this._positionInfo.pipe(ei.R(this._internalState.view("dragState").pipe(v.h(E.isSome))),w.b((e=>this._internalState.lens("managedPositionInfo").set(E.some(e))))).subscribe()),this._subs.add(an.R(self,"resize").pipe(w.b((()=>this._internalState.lens("dragState").modify(E.map(fn.t8("viewportSize",(0,r.zG)((0,Jn.C7)(),Un.H6("width","height")))))))).subscribe())}onFocus(e){this._onFocus(e)}onMount(e){this._internalState.lens("assistant").set(E.some(e))}onResize(e){this._internalState.lens("dragState").modify(E.map(fn.t8("assistantSize",(0,r.zG)(e,Un.H6("width","height")))))}onDrag(e){this._internalState.modify((t=>({...t,dragState:(0,r.zG)(t.dragState,E.map((0,r.ls)(fn.t8("translation",e),fn.t8("dragging",!0))),E.alt((()=>(0,r.zG)(t.assistant,E.map((e=>({assistantRect:e.getBoundingClientRect(),viewportSize:(0,r.zG)((0,Jn.C7)(),Un.H6("width","height"))}))),E.map((({assistantRect:t,viewportSize:n})=>({dragging:!0,viewportSize:n,assistantSize:{width:t.width,height:t.height},translation:e,translationOrigin:{bottom:n.height-(t.top+t.height),right:n.width-(t.left+t.width)}})))))))})))}onDragEnd(){this._internalState.lens("dragState").modify(E.map(fn.t8("dragging",!1)))}dispose(){this._subs.unsubscribe()}}function ni(e){return{kind:"dragged",dragging:e.dragging,referencePosition:e.translationOrigin,translation:(0,Xn.N)({...e.assistantSize,top:e.viewportSize.height-e.translationOrigin.bottom-e.assistantSize.height,left:e.viewportSize.width-e.translationOrigin.right-e.assistantSize.width},{left:0,top:0,...e.viewportSize})(e.translation)}}!function(e){e.create=function(e,t,n,i){const o=new _n(e,t),s=new ti(n,i);return{assistant:o,position:s,dispose:()=>{s.dispose(),o.dispose()}}}}($n||($n={}));var ii=n(50949);const oi=({referenceElement:e,placement:t,offset:n,disabled:i,onClick:o})=>{const[s,r]=a.useState(null),{styles:l,attributes:c}=(0,W.D)(e,s,{placement:t,modifiers:n?[{name:"offset",options:{offset:n}}]:[]});return a.createElement("button",{ref:r,style:l.popper,...c.popper,onClick:o,onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},"data-grammarly-part":"text-generation-reply-button",className:ii.replyButton,"data-disabled":i},a.createElement("div",{className:ii.icon}),a.createElement("span",null,"Reply quickly"))};var si=n(53386),ri=n(98642);const ai=({referenceElement:e,placement:t,offset:n,disabled:i,onMagicRewriteClick:o,onOpenRewriteClick:s})=>{const[r,l]=a.useState(null),{styles:c,attributes:u}=(0,W.D)(e,r,{placement:t,modifiers:n?[{name:"offset",options:{offset:n}}]:[]});return a.createElement("div",{ref:l,style:c.popper,...u.popper,onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},"data-grammarly-part":"text-generation-entry-button",className:ri.entryButton,"data-disabled":i},o?a.createElement(si.u,{message:"Improve my writing"},a.createElement("button",{onClick:o,onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},className:ri.entryButtonItem,"data-disabled":i},a.createElement("i",{className:ri.rewriteIcon}))):null,a.createElement(si.u,{message:"Open GrammarlyGO"},a.createElement("button",{onClick:s,onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},className:ri.entryButtonItem,"data-disabled":i},a.createElement("i",{className:ri.openIcon}))))};var li=n(49115);const ci=()=>a.createElement("svg",{className:li.icon,viewBox:"0 0 16 16",fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round"},a.createElement("path",{d:"M8,16C12.418,16 16,12.418 16,8C16,3.582 12.418,0 8,0C3.582,0 0,3.582 0,8C0,12.418 3.582,16 8,16Z",fill:"#0A9A78"}),a.createElement("path",{d:"M4,8L12,8M8,4L8,12",fill:"none",fillRule:"nonzero",stroke:"white",strokeWidth:"1.5px"})),ui=({overflow:e,...t})=>e?a.createElement(pi,{...t}):a.createElement(di,{...t}),di=({left:e,top:t,height:n})=>a.createElement(a.Fragment,null,a.createElement("div",{"data-grammarly-part":"text-generation-quasi-caret",className:li.quasiCaret,style:{left:e,top:t+n,height:n+8}},a.createElement(ci,null))),pi=({left:e,top:t,height:n})=>{const{ref:o,onMount:s}=te.P.useElWatcher(),l=a.useMemo((()=>C.h.create(E.none)),[]),{rect:c,onMount:u}=te.P.useRectWatcher(),d=a.useCallback((e=>{e.style.pointerEvents="all",l.set((0,r.zG)(i.Y(E.option)({rect:E.some(e.getBoundingClientRect()),goodParent:(0,r.zG)(e.getBoundingClientRect(),(e=>({x:e.x+e.width/2,y:e.y+e.height/2})),(({x:e,y:t})=>{var n,i;return E.fromNullable(null===(i=null===(n=document.elementFromPoint(e,t))||void 0===n?void 0:n.shadowRoot)||void 0===i?void 0:i.elementFromPoint(e,t))}),E.filter((t=>t===e||e.contains(t||null))))}),E.fold((()=>E.none),(({rect:e})=>E.some({x:e.x,y:e.y}))))),e.style.pointerEvents="none"}),[]),m=a.useMemo((()=>an.R(document,"scroll",{capture:!0}).pipe(rn.O(null))),[]);return te.P.useSubscriptionTo(p.aj([o.pipe(x.oA),m,c]).pipe(w.b((([e])=>d(e))))),a.createElement(a.Fragment,null,a.createElement("div",{"data-grammarly-part":"text-generation-quasi-caret",className:li.quasiCaret,style:{left:e,top:t+n,height:n+8},ref:e=>{s(e),u(e)}},a.createElement(q.F.div,{style:l.pipe(h.U((e=>(0,r.zG)(e,E.fold((()=>({opacity:1})),(()=>({opacity:0})))))))},a.createElement(ci,null))),a.createElement(q.F.Fragment,null,l.pipe(h.U((e=>(0,r.zG)(e,E.fold(r.gn,(e=>a.createElement("div",{"data-grammarly-part":"text-generation-quasi-caret-fixed-bro",className:li.quasiCaret,style:{transform:"none",position:"fixed",left:e.x,top:e.y,height:n+8}},a.createElement(ci,null))))))))))};var mi=n(95572);function hi(e){var t,n,i,o,s,a,l,c,u,d,p,m,h,f,g;const v=e=>{var t;return null!==(t=null==e?void 0:e.reduce(((e,t)=>{var n;return t.email&&!e.has(t.email)&&e.set(t.email,{name:null!==(n=t.name)&&void 0!==n?n:"",email:t.email}),e}),new Map))&&void 0!==t?t:new Map},y=v(null===(i=null===(n=null===(t=e.parents)||void 0===t?void 0:t[0])||void 0===n?void 0:n.audience)||void 0===i?void 0:i.indirectRecipients),_=v(null===(a=null===(s=null===(o=e.parents)||void 0===o?void 0:o[0])||void 0===s?void 0:s.audience)||void 0===a?void 0:a.undisclosedRecipients),b=v(null===(d=null===(u=null===(c=null===(l=e.parents)||void 0===l?void 0:l[0])||void 0===c?void 0:c.audience)||void 0===u?void 0:u.recipients)||void 0===d?void 0:d.filter((({email:e})=>void 0!==e&&!y.has(e)&&!_.has(e)))),w=v(null===(p=e.audience)||void 0===p?void 0:p.indirectRecipients),k=v(null===(m=e.audience)||void 0===m?void 0:m.undisclosedRecipients),x=v(null===(f=null===(h=e.audience)||void 0===h?void 0:h.recipients)||void 0===f?void 0:f.filter((({email:e})=>void 0!==e&&!w.has(e)&&!k.has(e))));return{previousMessageInfo:(0,r.zG)(e.parents,ne.YM,E.fold((()=>A.H3.PreviousMessageInfo.empty),(e=>({author:(0,r.zG)(e.authors,ne.YM,E.fold((()=>A.H3.Person.empty),(e=>{var t,n;return{name:null!==(t=e.name)&&void 0!==t?t:"",email:null!==(n=e.email)&&void 0!==n?n:""}}))),directRecipients:Array.from(b.values()),text:e.delta?(0,Ce.l)(e.delta,""):""})))),title:null!==(g=e.title)&&void 0!==g?g:"",author:(0,r.zG)(e.authors,ne.YM,E.fold((()=>A.H3.Person.empty),(e=>{var t,n;return{name:null!==(t=e.name)&&void 0!==t?t:"",email:null!==(n=e.email)&&void 0!==n?n:""}}))),directRecipients:Array.from(x.values()),indirectRecipients:Array.from(w.values()),undisclosedRecipients:Array.from(k.values())}}class fi{constructor(e,t,n,i,o,s,l){this._integration=e,this._checkingService=t,this._dapiActions=n,this._dapiSettings=i,this._closeGrammarlyAssistant=o,this._getEnv=s,this._featureFlags=l,this._subs=new u.w,this._log=c.Y.create("TextGenerationFeature"),this._inlineButtonUI=C.h.create(null),this._ideateButtonUI=C.h.create(null),this._assistantUI=C.h.create(null),this._highlightUI=C.h.create(null),this._quasiCaretUI=C.h.create(null),this._nativeCursorHider=C.h.create(E.none),this.inlineButtonUI=this._inlineButtonUI.view(),this.ideateButtonUI=this._ideateButtonUI.view(),this.assistantUI=this._assistantUI.view(),this.highlightUI=this._highlightUI.view(),this.quasiCaretUI=this._quasiCaretUI.view(),this._assistantFocused=C.h.create(!1),this._inlineButtonRecentlyPressed=C.h.create(!1),this._selectionRange=C.h.create(E.none),this._highlightRects=C.h.create([]),this._quasiCaretRect=C.h.create(E.none),this._assistantSession=C.h.create(E.none),this._relevantCAPIEvents=new d.xQ,this._inlineButton=p.aj([this._integration.inlineButtonPlacement,this._selectionRange,m.T(this._integration.selectionRange.pipe(h.U((e=>(0,r.zG)(e,E.isSome)))),this._integration.selectionRange.pipe(f.b(100),g.h(!1))),this._assistantSession.view(E.isNone),this._integration.textMapIsEmpty,this._integration.quickReplyContext]).pipe(h.U((([e,t,n,i,o,s])=>(0,r.zG)(e,E.filter((()=>i)),E.fold(r.gn,(e=>(0,r.zG)(t,E.fold(r.gn,(t=>o&&E.isSome(s)&&this._featureFlags.quickReply?a.createElement(oi,{disabled:!1,referenceElement:e.referenceElement,placement:e.placement,offset:E.toNullable(e.offset),onClick:()=>{this._inlineButtonRecentlyPressed.set(!0),this._startNewAssistantSession(A.z_.Mode.quickReply)}}):t.start!==t.end&&this._featureFlags.rewrite?a.createElement(ai,{disabled:n,referenceElement:e.referenceElement,placement:e.placement,offset:E.toNullable(e.offset),onOpenRewriteClick:()=>{this._inlineButtonRecentlyPressed.set(!0),this._startNewAssistantSession(A.z_.Mode.rewrite)},onMagicRewriteClick:this._featureFlags.magicRewrite?()=>{this._inlineButtonRecentlyPressed.set(!0),this._startNewAssistantSession(A.z_.Mode.quickRewrite)}:void 0}):null))))))))),this._assistant=this._assistantSession.view(E.fold(r.gn,(e=>a.createElement(H,{env:this._getEnv()},U.UI.mount(Xt,function(e){return U.Z.composeKnot({root:ln(e.position,e.assistant),content:(t=e.assistant,U.Z.composeUnion({chat:Wn(t),voiceProfile:Kn(t)},(()=>t.state.view("activeView").view((e=>({kind:"voiceProfile"===e?e:"chat"})))))),toolbar:jn(e.assistant)});var t}(e.viewModels)))))),this._highlight=C.h.combine(this._highlightRects,this._assistantSession.view(E.isSome),this._assistantFocused,((e,t,n)=>t&&n?e.map(((e,t)=>a.createElement(N,{key:`text-generation-highlight-rect-${t}`,top:e.top,left:e.left,width:e.width,height:e.height}))):null)),this._quasiCaret=C.h.combine(this._quasiCaretRect,this._assistantSession.view(E.isSome),((e,t)=>(0,r.zG)(e,E.filter((()=>t)),E.fold((()=>null),(e=>a.createElement(ui,{left:e.left,top:e.top,height:e.height,overflow:this._integration.allowCustomCaretOverflow})))))),this._ideateButton=this._inlineButtonUI.pipe(h.U((e=>(0,r.zG)(e,E.fromPredicate((e=>null===e)),E.filter((()=>this._featureFlags.compose)),E.fold(r.gn,(()=>a.createElement(z,{onClick:()=>this._onClickIdeateButton()}))))))),this._subs.add(this._checkingService.pipe(v.h(E.isSome),y.w((e=>e.value.readyState)),v.h((e=>e===mi.kQ.ready)),_.P()).subscribe((()=>this._init()))),this._subs.add(this._assistantFocused.subscribe((e=>this._log.debug("Assistant "+(e?"focused":"blurred")))))}get isIdeationAssistantOpened(){return this._assistantSession.view(E.isSome)}onRelevantCAPIEvent(e){this._relevantCAPIEvents.next(e)}closeIdeationAssistant(e){this._terminateAssistantSession(e)}_init(){this._subs.add(this._inlineButton.subscribe(b.wW(this._inlineButtonUI))),this._subs.add(this._ideateButton.subscribe(b.wW(this._ideateButtonUI))),this._subs.add(this._assistant.subscribe(b.wW(this._assistantUI))),this._subs.add(this._highlight.subscribe(b.wW(this._highlightUI))),this._subs.add(this._quasiCaret.subscribe(b.wW(this._quasiCaretUI))),this._subs.add(this._updateSelectionRange().subscribe(b.wW(this._selectionRange))),this._subs.add(this._updateHighlightRects().subscribe(b.wW(this._highlightRects))),this._subs.add(this._updateQuasiCaretRect().subscribe(b.wW(this._quasiCaretRect))),this._subs.add(this._updateNativeCursor().subscribe()),this._subs.add(this._closeRewriteAssistantWhenUnfocused().subscribe()),this._subs.add(this._assistantSession.view(E.isSome).subscribe((e=>{e&&this._closeGrammarlyAssistant()})))}_closeRewriteAssistantWhenUnfocused(){return this._assistantFocused.pipe(f.b(100),v.h((e=>!e&&(0,r.zG)(this._assistantSession.get(),E.fold(r.jv,(e=>e.service.session.view((e=>"started"===e.kind&&e.mode===A.z_.Mode.rewrite)).get()))))),w.b((()=>this._terminateAssistantSession(A.z_.EndReason.assistantBlurred))))}_onClickIdeateButton(){E.isSome(this._assistantSession.get())?this._terminateAssistantSession(A.z_.EndReason.closed):this._startNewAssistantSession(A.z_.Mode.ideation)}_updateSelectionRange(){return this._integration.selectionRange.pipe(h.U((e=>({selectionRange:e,assistantIsFocused:this._assistantFocused.get(),inlineButtonRecentlyPressed:this._inlineButtonRecentlyPressed.get()}))),w.b((({inlineButtonRecentlyPressed:e})=>{e&&this._inlineButtonRecentlyPressed.set(!1)})),v.h((({selectionRange:e,assistantIsFocused:t,inlineButtonRecentlyPressed:n})=>!E.isNone(e)||!t&&!n)),h.U((({selectionRange:e})=>e)))}_updateHighlightRects(){return this._selectionRange.pipe(y.w(E.fold((()=>k.of([])),(e=>this._integration.getHighlightRects(e)))))}_updateQuasiCaretRect(){return this._selectionRange.pipe(y.w((e=>(0,r.zG)(e,E.filter(l.SV.isCollapsed),E.fold((()=>k.of([])),(e=>this._integration.getHighlightRects(e)))))),h.U((e=>(0,r.zG)(e,o.c2,E.map((e=>e[e.length-1]))))))}_updateNativeCursor(){return C.h.combine(this._quasiCaretRect,this._assistantSession.view(E.isSome),((e,t)=>(0,r.zG)(i.Y(E.option)({nativeUIHider:E.fromNullable(this._integration.createNativeUIHider),quasiCaretRect:e}),E.filter((()=>t)),S.ew((()=>{this._nativeCursorHider.modify((e=>((0,r.zG)(e,S.bw((e=>e.dispose()))),E.none)))})),S.bw((({nativeUIHider:e})=>{this._nativeCursorHider.modify((t=>((0,r.zG)(t,S.bw((e=>e.dispose()))),E.some(e()))))})))))}_terminateAssistantSession(e){this._assistantSession.modify(E.chain((t=>(t.dispose(e),E.none)))),e!==A.z_.EndReason.closed&&e!==A.z_.EndReason.textInserted&&e!==A.z_.EndReason.assistantBlurred||this._integration.focusTextField()}_startNewAssistantSession(e){this._assistantFocused.set(!0);const t=new P.Hf((e=>this._integration.getText(e)),(()=>(0,r.zG)(this._checkingService.get(),E.map((e=>({cheetahStartSession:t=>s.fromIO((()=>R.vM((()=>e.cheetahStartSession(t))))),cheetahAction:t=>s.fromIO((()=>R.vM((()=>e.cheetahAction(t))))),cheetahInterrupt:t=>s.fromIO((()=>R.vM((()=>e.cheetahInterrupt(t))))),cheetahSetVoice:t=>s.fromIO((()=>R.vM((()=>e.cheetahSetVoice(t))))),cheetahEndSession:()=>s.fromIO((()=>R.vM((()=>e.cheetahEndSession())))),sendUserAction:(t,n)=>s.fromIO((()=>R.vM((()=>e.sendUserAction(t,n))))),setSessionOption:t=>s.fromIO((()=>R.vM((()=>e.setSessionOption(t)))))}))),E.toNullable)),this._relevantCAPIEvents.asObservable(),this._dapiSettings.view((({dialectWeak:e,dialectStrong:t})=>t?A.LA.Dialect.Value.fromString(t):e?A.LA.Dialect.Value.fromString(e):A.LA.Dialect.Value.american)),(e=>{this._dapiActions.changeStrongDialect(e)})),n=A.z_.Mode.isIdeation(e)?{mode:e}:A.z_.Mode.isRewriteOrQuickRewrite(e)?{mode:e,selectedRange:(0,r.zG)(this._integration.selectionRange.get(),E.getOrElseW((()=>({start:0,end:0}))))}:A.z_.Mode.isQuickReply(e)?{mode:e,quickReplyContext:(0,r.zG)(this._integration.quickReplyContext.get(),E.fold((()=>A.H3.empty),hi))}:(0,I.vE)(e);t.startSession(n);const i=$n.create({onFocus:e=>this._assistantFocused.set(e),closeIdeationAssistant:e=>{this._terminateAssistantSession(e)},insertText:(e,n)=>{this._insertText(n),t.trackResultInsert(e),this._terminateAssistantSession(A.z_.EndReason.textInserted)},submitAction:e=>t.submitAction(e),setVoiceProfile:e=>t.setVoiceProfile(e),stopInProgressResult:()=>t.stopInProgressResult(),dismissResult:e=>t.dismissResult(e),regenerateResult:e=>t.regenerateResult(e),trackResultOffensive:e=>t.trackResultOffensive(e),trackVoiceProfileOpen:()=>t.trackVoiceProfileOpen(),trackVoiceProfileSkip:()=>t.trackVoiceProfileSkip(),trackActionsStoreAllIdeasOpen:()=>t.trackActionsStoreAllIdeasOpen(),trackPromptSearch:()=>t.trackPromptSearch()},t.session,this._integration.ideationAssistantPlacement.pipe(x.oA),(e=>this._assistantFocused.set(e))),o={service:t,viewModels:i,dispose:e=>{i.dispose(),t.endSession(e),t.dispose(),this._assistantFocused.set(!1)}};this._assistantSession.set(E.some(o))}_insertText(e){""!==e?this._integration.insertText(e,this._selectionRange.get()):this._log.warn("insert() - attempting to insert empty response, skipping insert.")}dispose(){this._terminateAssistantSession(A.z_.EndReason.disposed),this._subs.unsubscribe(),(0,r.zG)(this._nativeCursorHider.get(),S.bw((e=>e.dispose()))),this._integration.dispose()}}},86620:(e,t,n)=>{n.d(t,{C:()=>c,U:()=>i});var i,o=n(27378),s=n(29511),r=n(33678),a=n(88056),l=n(95574);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...r.a.Flag},e.Context=o.createContext(a.Y.invariantContent("Environment"))}(i||(i={}));class c{constructor(e=(0,s.O)()){this._flags=new Set,this.actions={openUrl:e=>l.vM((()=>{document.location.href=e.toString()})),openPopup:e=>l.vM((()=>{const t=self.open(e.toString(),void 0,"noreferrer");t&&(t.opener=null)}))},e.config.systemInfo.os.isMac&&this._flags.add(i.Flag.isAppleSystem),this._flags.add(i.Flag.supportsSVGDominantBaseline),this._flags.add(i.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}},92132:(e,t,n)=>{n.d(t,{Q:()=>l});var i=n(27378),o=n(15073),s=n(60797),r=n(95300),a=n(5114);const l=({children:e,remSize:t,setter:n})=>(c+=1,i.useEffect((()=>{const e=t.subscribe((e=>{u.next(a.some(e)),n(a.some(e))}));return()=>{e.unsubscribe(),c-=1,0===c&&(u.next(a.none),n(a.none))}}),[t]),i.createElement(o.u.Context.Provider,{value:u.pipe(s.oA)},e));let c=0;const u=new r.X(a.none)},99682:(e,t,n)=>{n.d(t,{h:()=>i,u:()=>_});var i,o=n(57050),s=n(51655),r=n(90361),a=n(76974),l=n(85985),c=n(28043),u=n(66310),d=n(49708),p=n(2834),m=n(77176),h=n(2768),f=n(55721),g=n(41398),v=n(39719),y=n(67434);function _(e=a.of(o.yR)){return(0,o.ls)(l.h(r.fQ),c.x(),u.w((t=>d.R(t,"mousedown").pipe(l.h((e=>!e.button)),p.b((e=>e.preventDefault())),m.U((e=>({element:t,startPos:{x:e.clientX,y:e.clientY}}))),u.w((t=>d.R((0,s.Jj)(t.element),"mousemove").pipe(h.R(d.R((0,s.Jj)(t.element),"mouseup")),f.p(10),m.U((({clientX:e,clientY:n})=>({kind:"dragInProgress",element:t.element,startPos:t.startPos,delta:{x:e-t.startPos.x,y:n-t.startPos.y}}))),g.M(e),m.U((([e,t])=>({...e,delta:t(e.delta)}))),v.l({kind:"dragDone"}))))))),y.R(((e,t)=>"dragDone"===t.kind?{translate:e.translate,lastTranslate:e.translate,dragging:!1,dragStart:!1,dragEnd:e.dragging}:{dragging:!0,dragStart:!e.dragging,dragEnd:!1,lastTranslate:e.lastTranslate,translate:{x:t.delta.x+e.lastTranslate.x,y:t.delta.y+e.lastTranslate.y}}),i.create()))}!function(e){e.create=function(){return{translate:{x:0,y:0},lastTranslate:{x:0,y:0},dragging:!1,dragStart:!1,dragEnd:!1}}}(i||(i={}))},3441:(e,t,n)=>{function i(e,t){return n=>{const i=function(e,t){const n=e.left<t.left?t.left:e.left+e.width>t.left+t.width?t.left+t.width-e.width:e.left,i=e.top<t.top?t.top:e.top+e.height>t.top+t.height?t.top+t.height-e.height:e.top;return{...e,left:n,top:i}}({left:e.left+n.x,top:e.top+n.y,width:e.width,height:e.height},t);return{x:i.left-e.left,y:i.top-e.top}}}n.d(t,{N:()=>i})},3860:(e,t,n)=>{n.d(t,{h:()=>s});var i=n(27378),o=n(24606);const s=i.forwardRef((function({kind:e="transparent-hoverable",...t},n){return i.createElement(o.z,{...t,kind:e,includePadding:!1,ref:n})}))},84488:(e,t,n)=>{n.d(t,{G:()=>s});var i=n(27378),o=n(31542);const s=({children:e,style:t,dataGrammarlyPart:n="ui-kit-iframe",...s})=>{const[r,a]=i.useState(null),l=i.useCallback((e=>{var t,n;let i=null;"contentDocument"in e.target&&(i=null!==(n=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==n?n:null),a(i),i&&(i.style.margin="0",i.style.height="100vh",i.style.overflowY="hidden")}),[]);return i.createElement("iframe",{...s,style:{border:"none",...t},onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":n},r&&(0,o.createPortal)(e,r))}},68370:(e,t,n)=>{n.d(t,{b:()=>o});var i=n(27378);const o=({children:e})=>{const t="string"==typeof e?e:"";return t?i.createElement("style",{dangerouslySetInnerHTML:{__html:t}}):null}},55073:(e,t,n)=>{if(n.d(t,{AQ:()=>p,SO:()=>u,l:()=>m,n:()=>d}),1307!=n.j)var i=n(57050);if(1307!=n.j)var o=n(16105);if(1307!=n.j)var s=n(90361);if(1307!=n.j)var r=n(5114);if(1307!=n.j)var a=n(25938);if(1307!=n.j)var l=n(8709);var c=n(36991);function u(e,t){return(0,i.zG)(function(e){return 2===e.length&&e[0].pos===e[1].pos?e[0]._tag===o.q.Type.del&&e[1]._tag===o.q.Type.ins?r.some([e[0],e[1]]):e[0]._tag===o.q.Type.ins&&e[1]._tag===o.q.Type.del?r.some([e[1],e[0]]):r.none:r.none}(e),r.fold((()=>e),(e=>{const n=t.slice(e[0].pos,e[0].pos+e[0].length);return e[1].text===n?[]:e[1].text.startsWith(n)?[o.q.ins(e[0].pos+n.length,e[1].text.slice(n.length))]:n.startsWith(e[1].text)?[o.q.del(e[1].pos+e[1].text.length,n.length-e[1].text.length)]:e})))}function d(e){return e.reduce(((e,t)=>{switch(t._tag){case o.q.Type.ins:return e.compose(a.RI.ins(t.pos,t.text));case o.q.Type.del:return e.compose(a.RI.del(t.pos,t.length));default:return(0,s.vE)(t)}}),a.RI.delta(new l.i)).delta}function p(e){return e.reduce(((e,t)=>{if(c.s.isInsert(t)&&"string"==typeof t.insert){const n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)}),new l.i)}function m(e,t){return e.reduce(((e,t)=>(c.s.isInsertString(t)?(e.text=`${e.text.substring(0,e.index)}${t.insert}${e.text.substring(e.index)}`,e.index+=t.insert.length):c.s.isDelete(t)?e.text=`${e.text.substring(0,e.index)}${e.text.substring(e.index+t.delete)}`:c.s.isRetain(t)?e.index+=t.retain:function(e){var t;return c.s.isInsertEmbed(e)&&!0===(null===(t=e.insert)||void 0===t?void 0:t.linebreak)}(t)&&(e.text=`${e.text.substring(0,e.index)}\n${e.text.substring(e.index)}`,e.index+=1),e)),{text:t,index:0}).text}},34107:(e,t,n)=>{n.d(t,{n:()=>r,s:()=>a});var i=n(57050),o=n(48044),s=n(5114);function r(e){return(t,n)=>r=>(0,i.zG)(r,o.cq(e)(t,(0,i.ls)(s.some,n)),s.getOrElse((()=>(0,i.zG)(r,o.ZQ(e)(t,n(s.none))))))}function a(e,t){for(const n of e.values())if(t(n))return n;return null}},35765:(e,t,n)=>{var i=n(54933),o=n(93476)(i);o.push([e.id,"._tpyu3-textBox{box-sizing:border-box;border-radius:4px;overflow-y:auto;width:100%;height:100%;border:none;padding:0;background:transparent;resize:none;font-family:Inter,sans-serif;font-size:14px;font-weight:400;color:#161719;}._tpyu3-textBox:-ms-input-placeholder{color:#646b81}._tpyu3-textBox::placeholder{color:#646b81}._tpyu3-textBox:focus{outline:none}",""]),o.locals={textBox:"_tpyu3-textBox"},e.exports=o},35434:(e,t,n)=>{var i=n(54933),o=n(93476)(i);o.push([e.id,"._kGrsI-textareaPlaceholder{position:relative;width:100%;height:100%;}._kGrsI-textareaPlaceholder ._nhSjY-textarea{box-sizing:border-box;border-radius:4px;overflow-y:auto;width:100%;height:100%;border:none;padding:0;background:transparent;resize:none;font-family:Inter,sans-serif;font-size:14px;font-weight:400;color:#161719;}._kGrsI-textareaPlaceholder ._nhSjY-textarea:-ms-input-placeholder{color:#646b81}._kGrsI-textareaPlaceholder ._nhSjY-textarea::placeholder{color:#646b81}._kGrsI-textareaPlaceholder ._nhSjY-textarea:focus{outline:none}._kGrsI-textareaPlaceholder ._k0PXO-placeholder{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;background:transparent;font-family:Inter,sans-serif;font-size:14px;font-weight:400;color:#646b81}",""]),o.locals={textareaPlaceholder:"_kGrsI-textareaPlaceholder",textarea:"_nhSjY-textarea",placeholder:"_k0PXO-placeholder"},e.exports=o},43608:e=>{e.exports={highlightRect:"Hv1Hm"}},27205:e=>{e.exports={ideateButton:"KcDSs",ideateButtonIcon:"wW8vu",spin:"SjtBC"}},17847:e=>{e.exports={button:"jbBtL",noPadding:"mqdwN",primary:"UO93J",secondary:"Lv74l",tertiary:"FHI62",spin:"xcUFO"}},44127:e=>{e.exports={selectContainer:"rtGNp",selectButton:"xznH5",buttonlabel:"FYD6d",chevron:"e2YIq",clearButton:"GKEuQ",closeIcon:"O6RsY",menu:"IE4Qr",option:"QcPld",part:"hHVC0"}},39589:e=>{e.exports={inputContainer:"R2Dxb",clearButton:"TPt8g",closeIcon:"K_gqf",menu:"dwLjC",option:"PqnX6",part:"lC2L_"}},24948:e=>{e.exports={container:"gowNB",content:"pW1Y3",toolbar:"sPawg",overflow:"Nf39c",spin:"mWK9C"}},76723:e=>{e.exports={container:"b4nAE"}},45660:e=>{e.exports={actionBrick:"T5ohE",compact:"vAeMx",standard:"o8ZLy",goAction:"iP2vX",spin:"WIy3y"}},71052:e=>{e.exports={actionGroupContainer:"V4txI",actionGroupHeader:"EWOwV",actionGroupContent:"BSuK5",spin:"x0McA"}},21344:e=>{e.exports={actionGroup:"fxtNb"}},24254:e=>{e.exports={bannerAndActions:"ogmbP",actions:"qCrEI",spin:"MCtdz"}},72684:e=>{e.exports={voiceBanner:"C6HnA",header:"Y5nC_",description:"CUrsT",setVoiceButton:"VZlwP",voiceIcon:"edmEc",spin:"ugADp"}},6427:e=>{e.exports={container:"wxPU9",loadingIcon:"p2iS8",spin:"lJRfr"}},80333:e=>{e.exports={resultContainer:"idk2i",loading:"dGChr",footer:"hdtGG",left:"YJGbO",right:"Z0Ute",insertButton:"qLQO4",rephraseButton:"tFSUF",dismissButton:"_rW1x",reportButton:"ywsCK",result:"gRTna",header:"Ef3nS",headerButton:"qgS8k",headerButtonContentWrapper:"r6asI",edit:"kJSkg",loadingIcon:"ITO2d",spin:"EuHqB",label:"jPQtw",reportMenu:"dV1Y1",reportIcon:"gy9Sp",menuButton:"L1GoA"}},95519:e=>{e.exports={content:"OCycy",history:"r9Ged",actions:"dMFhX",spin:"zFAlB"}},40679:e=>{e.exports={promptContainer:"sByd0",logoIcon:"_wT7Z",loadingIcon:"HciIk",spin:"h2j9m",textBoxContainer:"pbV1Z",withoutIcon:"vguad",goButton:"LZctH",stopButton:"vuaxx"}},96133:e=>{e.exports={container:"RVTpu",header:"LAxBR",spin:"nB4QY"}},35490:e=>{e.exports={actionsStore:"Y63qo"}},45196:e=>{e.exports={menuContainer:"kI62t",collapseButton:"ZHzui",arrowIcon:"BDhmZ",spin:"eiPHe"}},19057:e=>{e.exports={searchResultsGrid:"WlGdH",actions:"ugRRp"}},79132:e=>{e.exports={promptContainer:"vvohm",promptAndMenu:"ZbTj3",placeholder:"dfcWD",spin:"ZKG5t"}},2372:e=>{e.exports={chips:"InffB",spin:"r5l7s"}},99705:e=>{e.exports={chip:"FV1r3",spin:"Oaxoz"}},11478:e=>{e.exports={container:"v0Thn",content:"ngZi6",section:"AerUj",sectionTitle:"At1sZ",sectionDescription:"kJabq",chips:"eZgtD",description:"F5Uho",footer:"gWMkI",applyButton:"GfDdg",skipButton:"cjTuA",roleTypeahead:"NiMuf",dialectSelect:"l6FCa",dialectLabel:"yVlwm",dialectIcon:"Zw0S8",spin:"XbxOz"}},9342:e=>{e.exports={buttonAndLabel:"lmeIt",spin:"EMrLa"}},15753:e=>{e.exports={voiceButton:"iKbxI",voiceIcon:"U45y8",spin:"wh1ek"}},93112:e=>{e.exports={toolbarContent:"iJVSW",backAndVoice:"fRrX4",buttonSeparator:"urbmc",spin:"sVI35"}},98642:e=>{e.exports={entryButton:"XqH8S",entryButtonItem:"gwp_r",rewriteIcon:"xrbcP",openIcon:"xCbHI",spin:"pe1wA"}},50949:e=>{e.exports={replyButton:"elzjD",icon:"YWWJT",spin:"y8U7E"}},49115:e=>{e.exports={quasiCaret:"f67SR",icon:"Uv6ot"}}}]);