(self.webpackChunk=self.webpackChunk||[]).push([[8721,4254,751],{33099:(e,t,i)=>{var a=i(51457),n="chrome-extension://__MSG_@@extension_id__/",s="moz-extension://__MSG_@@extension_id__/",r="safari-web-extension://__MSG_@@extension_id__/",o=self.GR_RESOURCE_ROOT||n,l=self.GR_RESOURCE_ROOT||s,c=self.GR_RESOURCE_ROOT||r;e.exports={__css:a.toString().replace(new RegExp(n,"g"),o).replace(new RegExp(s,"g"),l).replace(new RegExp(r,"g"),c),...a.locals}},20271:(e,t,i)=>{i.d(t,{I:()=>c,O:()=>a});var a,n=i(27378),s=i(50474),r=i(88056),o=i(19429),l=i(35407);!function(e){e.Context=n.createContext(r.Y.invariantContent("AssistantTextResources")),e.holder=o.VF((()=>({setGoalsTooltip:"Set goals to get tailored writing suggestions",proofitTooltip:"Expert writing help"})))}(a||(a={}));const c=l.Pj(l.GG({denali:s.m.holder,assistant:a.holder}))((()=>({denali:{}})))},25442:(e,t,i)=>{i.d(t,{t:()=>V});var a=i(57050),n=i(40273),s=i(90361),r=i(36991);var o=i(34311),l=i(62337),c=i(95384),d=i(63919),u=i(30067),p=i(74850),m=i(32952),g=i(85985),h=i(77176),v=i(93508);class f{constructor(){this._mapByHighlightId=new Map,this._mapByAlertId=new Map,this._highlightDataChanged=new m.xQ,this.highlightDataChanged=this._highlightDataChanged}getByHighlightId(e){return this._mapByHighlightId.get(e)}getByAlertId(e){const t=this._mapByAlertId.get(e)||new Set;return Array.from(t).map((e=>this._mapByHighlightId.get(e))).filter((e=>!!e))}get(e){return this._mapByHighlightId.get(e)}has(e){return this._mapByHighlightId.has(e)}set(e,t){this._mapByHighlightId.set(e,t);const i=this._mapByAlertId.get(t.alertId)||new Set;i.add(e),this._mapByAlertId.set(t.alertId,i),this._highlightDataChanged.next(e)}delete(e){const t=this._mapByHighlightId.get(e);if(t){const i=this._mapByAlertId.get(t.alertId);void 0!==i&&(i.delete(e),0===i.size&&this._mapByAlertId.delete(t.alertId)),this._mapByHighlightId.delete(e)}this._highlightDataChanged.next(e)}forEach(e){this._mapByHighlightId.forEach(e)}getHighlightDataObs(e){return this._highlightDataChanged.pipe(g.h((t=>t===e)),h.U((()=>this.getByHighlightId(e))),v.O(this.getByHighlightId(e)))}}class w{constructor(e,t,i,a,n=(()=>d.E9.zero),s=p.Y.create(w.name)){this._denaliHighlights=e,this._getFluidHighlights=t,this._getTextMap=i,this._getParentRect=a,this._getParentScroll=n,this._log=s}register(e,t,i,a){if(null!==e){if(this._denaliHighlights.has(e))return this.update(e,t,i,a);{const n=new c.Fd(e,t,this._getFluidHighlights(),this._getParentRect,this._getParentScroll),s={id:e,alertId:a.alertId,mark:n,visualization:i};this._denaliHighlights.set(e,s);const r=this._getTextMap().getPlainText();return this._getFluidHighlights().addHighlight(e,(0,u.rX)((0,u.mp)(n.range),r),a),s}}return null}remove(e){this._denaliHighlights.has(e)?(this._getFluidHighlights().removeHighlights([e]),this._denaliHighlights.delete(e)):this._log.warn(`can't remove mark #${e}, doesn't exist`)}update(e,t,i,a){const n=this._denaliHighlights.get(e);if(n){this._denaliHighlights.set(e,{...n,visualization:i});const s=this._getTextMap().getPlainText();return this._getFluidHighlights().updateHighlight(e,(0,u.rX)(t.meta.range(),s),a),n}return this._log.warn("cannot update not existing highlight",e),null}clearAll(){this._denaliHighlights.forEach((e=>{this._getFluidHighlights().removeHighlights([e.id])}))}}var b=i(55073),S=i(5817),y=i(25938),E=i(8709),C=i(59443),k=i(24645),_=i(51374),A=i(9922),I=i(24209),T=i(40151),M=i(76974),x=i(95300),R=i(77150),F=i(80900),L=i(50628),P=i(95195),N=i(5114),B=i(22232),U=i(71249),D=i(95574);class V{constructor(e,t,i,n,s,r,d=p.Y.create(V.name),u,v){this._highlights=e,this._textObserver=t,this._replacementService=i,this._layout=n,this._scroller=s,this._selectedHighlightsTracker=r,this._log=d,this._requestAwaitService=u,this._formattingService=v,this._subs=new A.w.Keeper,this._disposed=!1,this._highlightedAlertId=null,this._marks=new Map,this._highlightsDataStore=new f,this._highlightUpdater=new w(this._highlightsDataStore,(()=>this._highlights),(()=>this._textObserver.getTextSource()),(()=>{const e=this._layout.textField.rect.getApproximate();return l.Pf.create({...e.client,...e.size})}),(()=>this._layout.textField.scroll.getApproximate())),this.highlightHoverProvider={getHoveredStateBehavior:e=>this._highlightsDataStore.getHighlightDataObs(e).pipe(h.U((e=>e&&e.visualization.type===c.sO.Change.VisualState.Type.highlighted?{[c.sO.Change.VisualState.Source.sidebar]:o.pc.hoveredNeedsAttention,[c.sO.Change.VisualState.Source.text]:o.pc.hovered,[c.sO.Change.VisualState.Source.api]:this._highlightedAlertId===e.alertId?o.pc.hovered:o.pc.none}[e.visualization.source]:o.pc.none)))},this._updateContentsBuffer=new m.xQ,this._flushUpdater=new m.xQ,this.getContents=(e,t)=>{if(this._log.trace(`getContents, ${String(e)}, ${String(t)}`),this._formattingService){const i=this._textObserver.getTextSource().getRichText();return y.RI.unsafeRes(void 0!==e?i.slice(e,void 0!==t?e+t:void 0):i)}{const i=void 0!==e?this.getText().slice(e,void 0!==t?e+t:void 0):this.getText();return y.RI.resFromText(i)}},this.changes=I.T((0,a.zG)(y.RI.res(this.getContents().delta),P.g_((()=>T.E),(e=>M.of(e)))),this._textObserver.contentChanges.async.pipe(g.h((e=>e.changes.length>0)),h.U((({deltaChange:e})=>e)))),this.activeMarks=new x.X(N.none),this.contentUpdated=new m.xQ,this.hoveredMarks=new x.X(N.none),this.textChangedAfterPaste=new m.xQ,this.activeWord=new x.X(N.none),this.clickedWord=new x.X(N.none),this.ongoingSelection=new x.X(!1),this._log.info(`${V.name} created`),this._subs.push(this._subscribeToContentUpdates(),this._subscribeToSelectedHighlight(),this._trackFocusedAlert())}_trackFocusedAlert(){return this._highlightsDataStore.highlightDataChanged.pipe(h.U((e=>this._highlightsDataStore.getByHighlightId(e))),g.h((e=>!!e))).subscribe((e=>{this._highlightedAlertId===e.alertId||e.visualization.type!==c.sO.Change.VisualState.Type.highlighted||e.visualization.source!==c.sO.Change.VisualState.Source.text&&e.visualization.source!==c.sO.Change.VisualState.Source.sidebar?e.alertId===this._highlightedAlertId&&e.visualization.type===c.sO.Change.VisualState.Type.visible&&(this._highlightedAlertId=null,this._log.trace(`Mark ${e.id} unfocused - alertId ${e.alertId}`)):(this._highlightedAlertId=e.alertId,this._log.trace(`Mark ${e.id} focused - alertId ${e.alertId}`))}))}pushChanges(e,t){this._log.trace("pushChanges",{change:e,source:t}),y.RI.isFlush(e)?this._flushUpdater.next():y.RI.isReset(e)?this._log.warn("Got unknown reset"):this._updateContents(e.delta,t)}getText(){return this._log.trace("getText"),this._formattingService?(0,b.l)(this._textObserver.getTextSource().getRichText(),""):this._textObserver.getTextSource().getPlainText()}getTextLength(){return this._log.trace("getTextLength"),this.getText().length}flushChanges(){this._log.trace("flushChanges")}getCursor(){return this._log.trace("getCursor"),C.Y1.empty}setCursor(e,t,i){return this._log.trace("setCursor",{_index:e,_length:t,_source:i}),P.F2(void 0)}getLastPossibleCursorPosition(){return this._log.trace("getLastPossibleCursorPosition"),0}_doMarkAction(e){const t=o.y$.Id.createFromMark(e.id),i=e.meta.capiAlertId;switch(e.action){case k.v.Change.ActionType.create:{const a=this._highlightUpdater.register(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),n=(null==a?void 0:a.mark)||null;return n&&this._marks.set(n.id,n),n}case k.v.Change.ActionType.update:{const a=this._highlightUpdater.update(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),n=(null==a?void 0:a.mark)||null;return n&&this._marks.set(n.id,n),n}case k.v.Change.ActionType.remove:return this._highlightUpdater.remove(t),this._marks.delete(e.id),null;default:(0,B.vE)(e)}}changeMarks(e){return this._disposed?(this._log.debug("changeMarks called after disposed, returning empty result"),k.v.Change.Result.getEmpty()):(this._log.trace("changeMarks",{rawMarks:e}),e.reduce(((e,t)=>{switch(t.action){case k.v.Change.ActionType.create:e.created.set(t.id,P.ij(new Error("Cannot create mark"))(this._doMarkAction(t)));break;case k.v.Change.ActionType.update:e.updated.set(t.id,P.ij(new Error("Cannot update mark"))(this._doMarkAction(t)));break;case k.v.Change.ActionType.remove:this._doMarkAction(t),e.removed.set(t.id,P.F2(void 0))}return e}),k.v.Change.Result.getEmpty()))}scrollToMark(e,t){var i;const a=null!==(i=this._marks.get(e))&&void 0!==i?i:null;return this._log.trace("scrollToMark",{markId:e,mark:a,opts:t}),a?this._scroller.scrollToMark(a,t):(this._log.warn(`Tried to scroll to nonexistent mark with id: ${e}`),T.E)}_subscribeToContentUpdates(){return this._updateContentsBuffer.pipe(R.R((()=>I.T(F.H((0,S.Xd)(20)),this._flushUpdater).pipe(L.P()))),g.h((e=>e.length>0)),h.U((e=>e.reduce(((e,t)=>e.compose(t)),new E.i)))).subscribe((e=>{const t=this._replacementService.performBatchReplacements((i=e,i.reduce((({actions:e,index:t},i)=>{const a=e[0];return r.s.isInsertString(i)?(e.unshift({pos:{start:t,end:t},value:i.insert}),{actions:e,index:t}):r.s.isInsertEmbed(i)?{actions:e,index:t+1}:r.s.isRetain(i)?{actions:e,index:t+i.retain}:r.s.isDelete(i)?(a&&a.pos.start===a.pos.end&&a.pos.end===t?a.pos={...a.pos,end:a.pos.end+i.delete}:e.unshift({pos:{start:t,end:t+i.delete},value:""}),{actions:e,index:t+i.delete}):void(0,s.vE)(i)}),{actions:[],index:0}).actions.reduce(((e,t)=>(e.length&&e[e.length-1].value&&e[e.length-1].pos.start===t.pos.start?e[e.length-1].value=`${t.value}${e[e.length-1].value}`:e.push(t),e)),[]))).then((()=>{const t=(e=>e.reduce((({formattings:e,index:t},i)=>n.m.hasFormatting(i)?r.s.isInsertString(i)?(e.push({range:{start:t,end:"\n"===i.insert?t:t+i.insert.length},formatting:i.attributes}),{formattings:e,index:t+i.insert.length}):r.s.isInsertEmbed(i)?{formattings:e,index:t+1}:r.s.isRetain(i)?(e.push({range:{start:t,end:t+i.retain},formatting:i.attributes}),{formattings:e,index:t+i.retain}):{formattings:e,index:t}:r.s.isInsertString(i)?{formattings:e,index:t+i.insert.length}:r.s.isInsertEmbed(i)?{formattings:e,index:t+1}:r.s.isRetain(i)?{formattings:e,index:t+i.retain}:r.s.isDelete(i)?{formattings:e,index:t}:void(0,s.vE)(i)),{formattings:[],index:0}).formattings)(e);this._formattingService&&t.length&&(this._log.trace("Have formattings, applying",t),t.forEach((e=>{this._formattingService&&this._formattingService.apply(e.range,e.formatting)})))}),(()=>{this._log.warn("Failed to apply batch replacements")}));var i;this._requestAwaitService&&this._requestAwaitService.addRequest(t)}))}_subscribeToSelectedHighlight(){return this._selectedHighlightsTracker.pipe(h.U((0,a.ls)(U.UI((e=>{var t;return(0,a.zG)(N.fromNullable(null===(t=this._highlightsDataStore.get(e))||void 0===t?void 0:t.mark),N.filter((e=>(0,a.zG)(e.range(),P.g_(a.W8,(0,a.ff)(_.x.isEnclosingView))))))})),U.oA))).subscribe((e=>this.activeMarks.next(N.some(e))))}_updateContents(e,t){this._updateContentsBuffer.next((0,b.AQ)(e))}getSelectionRect(){throw this._log.trace("getSelectionRect"),Error("not implemented")}setContents(e){this._log.trace("setContents",{_value:e})}getHTML(){return this._log.trace("getHTML"),""}getPossibleCursorPosition(e,t){return this._log.trace("getPossibleCursorPosition",{_x:e,_y:t}),D.vM((()=>{throw new Error("Not implemented")}))}dispose(){this._highlightUpdater.clearAll(),this._subs.dispose(),this._log.info(`${V.name} disposed`),this._disposed=!0}}},25913:(e,t,i)=>{i.d(t,{Y:()=>p,q:()=>m});var a=i(57050),n=i(41398),s=i(77176),r=i(93508),o=i(46861),l=i(55419),c=i(10720),d=i(66896),u=i(5114);const p=(e,t)=>{const i=(0,c.ux)(e.lensState,e.cardsListScrollManager,e.capabilities),a=Math.max(600,t.size.height+o.O.headerHeight+o.O.panelHeight);return i.pipe((0,n.M)(e.predictionsPreviewViewModel.previewState),(0,s.U)((([e,t])=>{if(t.kind!==l.fA.visible)return e;const i=[t.readersAttention,t.tone].filter(u.isSome).length;return i>0?e+o.O.predictionsPreviewHeaderHeight+o.O.predictionInsightHeight*i+o.O.predictionInsightBottomMargin:e})),(0,r.O)(0),(0,s.U)((e=>Math.max(e+o.O.headerHeight,a))),(0,s.U)((e=>Math.min(e,750))))},m=(e,t,i)=>n=>{const s=e(),r=e=>e*i(),o=r(1),l=r(2.25);return(0,a.zG)(t(),u.map((e=>e-(0,c.US)(s))),u.map((e=>d.R.isMainLens(s)&&n?e-l-o:e-o)),u.map((e=>e-r(1))),u.filter((e=>e>0)))}},18126:(e,t,i)=>{i.d(t,{f:()=>o});var a=i(95300),n=i(2844),s=i(66310),r=i(34311);class o{constructor(e){this._originalHoverProvider=e,this._assistantHoverProviderSbj=new a.X(null)}setAssistantHover(e){this._assistantHoverProviderSbj.next(e)}removeAssistantHover(){this._assistantHoverProviderSbj.next(null)}getHoveredStateBehavior(e){const t=this._originalHoverProvider.getHoveredStateBehavior(e);return this._assistantHoverProviderSbj.pipe((0,s.w)((i=>null==i?t:(0,n.aj)(t,i.getHoveredStateBehavior(e),((e,t)=>t!==r.pc.none?t:e)))))}}},8467:(e,t,i)=>{i.d(t,{t:()=>c});var a=i(40327),n=i(30067),s=i(95384),r=i(91402),o=i(44586),l=i(95195);function c({scrollToMarkRect:e,scrollToRange:t}){return{scrollToMark:(i,c)=>(0,a.pipe)(s.Fd.getMarkRect(i),l.vx((()=>(t((0,n.mp)(i.range)),s.Fd.getMarkRect(i)))),l.g_((e=>r._(new Error(`Cannot get mark's rect: ${i.id}: ${e.message}`))),(t=>new o.y((i=>{i.next(void 0),e(t,c)})))))}}},61018:(e,t,i)=>{i.r(t),i.d(t,{AssistantController:()=>wo,AssistantControllerImpl:()=>Eo,AssistantControllerInjectedParams:()=>a.AssistantControllerInjectedParams,AssistantService:()=>Po,AssistantServiceInjectedParams:()=>n.AssistantServiceInjectedParams,LocalAssistantHighlightCollection:()=>s.c});var a={};i.r(a),i.d(a,{e:()=>wo,Z:()=>Eo});var n={};i.r(n),i.d(n,{e:()=>Po});var s=i(45662),r=i(40327),o=i(27378),l=i(74850),c=i(88921),d=i(523),u=i(25913),p=i(25734),m=i(9781),g=i(75003),h=i(57050),v=i(50622),f=i(9671),w=i(19654),b=i(59456),S=i(19043),y=i(31536),E=i(84286),C=i(88661),k=i(14601),_=i(77176),A=i(28043),I=i(2844),T=i(98403),M=i(38983);class x{constructor(e,t,i,a){if(this._cardsViewModel=t,this._subs=new k.w,this._successReportFooterBulkDismissAlertsCount=M.h.create(0),this.showBulkDismissFeed=()=>{this._cardsViewModel.actionEvents.next(E.f.create([{type:"pushAssistantFeed",feedId:E.D.AssistantFeed.BULK_DISMISS_CARD_FEED_ID}]))},a.isGateEnabled(C.K.SduiBulkDismiss)){const t=e.pipe(_.U(E.D.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),_.U((e=>e.size)),A.x());this._subs.add(I.aj([t,i.pipe(A.x())]).pipe(_.U((([e,t])=>t?e:0))).subscribe(T.wW(this._successReportFooterBulkDismissAlertsCount)))}}get successReportFooterBulkDismissAlertsCount(){return this._successReportFooterBulkDismissAlertsCount.view()}dispose(){this._subs.unsubscribe()}}var R,F=i(35214),L=i(74660),P=i(16892),N=i(48521),B=i(35416),U=i(6100),D=i(5114),V=i(45701),O=i(8125),H=i(34217),G=i(52976),W=i(91605),j=i(58954),z=i(60984),q=i(52726);!function(e){const t=e=>(0,r.pipe)(B.In.getActiveItemOfType(a)(e),D.chain(G.P.Capabilities.toAlertItem));function i(e){return B.nL.Items.mapper((e=>e.kind),{[G.P.Kind]:e})}function a(e){return e.kind===G.P.Kind}function n(){return{viewState:()=>e=>(e.kind,G.P.Kind,{view:e,kind:"alertRefSDUI"})}}e.isSelectableItem=a,e.getActiveItemWithAlert=function(e){return t(e)},e.getActiveAlignableItem=e=>t(e),e.getActiveFocusableItem=e=>t(e),e.checksFeedItemsMapper=i,e.isAlertRefSDUI=a,e.defaultOrd=t=>(0,F.fold)(V.getMonoid())([(0,r.pipe)(V.ordBoolean,V.contramap((0,O.ff)(G.P.Item.isBulkAcceptSDUI))),(0,r.pipe)(V.ordBoolean,V.contramap(G.P.Item.isBulkDismissSDUI)),e.getByActiveAlertPositionOrd(t)]),e.sduiToChecksFeedOrd=function(t){return i=>V.fromCompare(((a,n)=>W.e.isSDUIItem(a)&&W.e.isSDUIItem(n)?W.e.getOrd(i).compare(a,n):e.getByActiveAlertPositionOrd(t).compare(a,n)))},e.getByActiveAlertPositionOrd=e=>(0,F.fold)(V.getMonoid())([(0,r.pipe)(L.h$.ordHRange,V.contramap((t=>(0,r.pipe)(e.hasActiveAlert(t),D.map((e=>e.alert)),D.getOrElse((()=>({getHighlightRanges:()=>[{start:0,end:0}]})))))))]),e.item=e=>H.UI.Union.make("kind",{alertRefSDUI:j.p.SingleCard(e),empty:z.Q.Empty}),e.viewState=n,e.createCardListFlow=q.p,e.listItemOrd=e=>V.contramap((e=>e.cell.item.view))(e).compare;const s={equals:(e,t)=>e.kind===t.kind&&P.s.eqById.equals(e,t)},o=e=>({equals:(t,i)=>{const a={[G.P.Kind]:e};return s.equals(t,i)&&function(e,t){return(i,a)=>t[e(i)].equals(i,a)}((e=>e.kind),a)(t,i)}});function l(){return{changePosition:e=>i(G.P.Capabilities.changePosition(e))}}function c(){return{completeTransition:e=>i(G.P.Capabilities.animatable.completeTransition(e)),transitionTo:e=>i(G.P.Capabilities.animatable.transitionTo(e)),changeVisualState:e=>i(G.P.Capabilities.animatable.changeVisualState(e))}}function d(){return{select:(e,t)=>i(G.P.Capabilities.select.select(e,t)),selectByAlert:(e,t,a)=>i(G.P.Capabilities.select.selectByAlert(e,t,a)),unselect:(e,t)=>i(G.P.Capabilities.select.unselect((0,h.MZ)(e),t))}}function u(){return{removeAlertFromItem:(e,t)=>i((i=>i.id===E.D.SuccessReport.ID?i:G.P.Capabilities.removeAlert.removeAlertFromItem(e,t)(i)))}}function p(){return{remove:(e,t)=>i(G.P.Capabilities.remove.remove(e,t))}}function m(){return{updateWithAlerts:e=>i(h.yR)}}function g(){return{nextAlert:i((()=>D.none)),prevAlert:i((()=>D.none))}}function v(){return{updateUserInput:e=>i(h.yR)}}e.equatable={structEq:o(G.P.eq),idEq:o(s),visualStateEq:o(G.P.eq)},e.changePosition=l,e.disposable={isScheduledToDispose:i(G.P.Capabilities.disposable.isScheduledToDispose)},e.hidable={isHidden:i(N.o.isHidden)},e.animatableItem=c,e.hasAlertsQueries={isSelectableByAlert:e=>i(G.P.Capabilities.hasAlerts.isSelectableByAlert(e)),hasAlert:e=>i(G.P.Capabilities.hasAlerts.hasAlert(e)),hasActiveAlert:i(G.P.Capabilities.hasAlerts.hasActiveAlert)},e.changePositionStrategyQueries={useReferenceHeightOnRemove:i(h.jv)},e.select=d,e.removeAlert=u,e.remove=p,e.updateWithAlert=m,e.releaseAlert=()=>U.v.Capabilities.getAlertReleaser({...u(),...e.disposable}),e.unselectable=()=>U.v.Capabilities.getUnselectable(B.In.getActiveItem,d()),e.selectableByAlert=()=>U.v.Capabilities.getSelectableByAlert(B.In.getActiveItem,{...e.hasAlertsQueries,...d(),...U.v.Capabilities.getHasChecksFeed()}),e.selectableById=()=>U.v.Capabilities.getSelectableById(B.In.getActiveItem,d()),e.updateMeta=()=>({updateMeta:U.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=e=>U.v.Capabilities.getAnimatable(e,{...u(),...c(),...U.v.Capabilities.getHasChecksFeed()}),e.hasPriorityToggle=()=>U.v.WithPriority.getHasPriorityToggle({...c(),...e.hasAlertsQueries,...e.disposable}),e.alignable={isValidToAlign:i((t=>!e.disposable.isScheduledToDispose(t)))},e.alertIterator=g,e.itemReleaser=()=>U.v.Capabilities.getItemReleaser(),e.hasAlerts=U.v.Capabilities.getHasAlerts,e.hasUserInput=v,e.verifiable=()=>U.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>({clone:i(P.s.Capabilities.getPojoCloneable().clone)});const f={getFeatures:i((e=>G.P.Item.isBulkDismissSDUI(e)?[G.P.Features.BulkDismiss]:G.P.Item.isBulkAcceptSDUI(e)?[G.P.Features.BulkAccept]:[]))};e.getCapabilities=function(t,i){return{...n(),...e.disposable,...e.hidable,...e.equatable,...v(),...e.cloneable(),...l(),...c(),...d(),...p(),...u(),...m(),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t),...e.unselectable(t),...e.selectableByAlert(t),...e.selectableById(t),...e.updateMeta(t),...e.animatableFeed(t),...e.hasPriorityToggle(t),...e.itemReleaser(),...f,...e.verifiable(),...e.cloneable(),...e.hasAlerts(g(),i,(()=>e.isSelectableItem),{...e.hasAlertsQueries,...e.disposable})}}}(R||(R={}));var K=i(60797),Z=i(41398),X=i(71249);class J{constructor(e,t){this._sub=new k.w;const i=(0,r.pipe)(e,_.U((0,h.ls)((e=>e.actions),X.Ew((e=>"openCreateSnippetModal"===e.type)))),K.oA);this._sub.add((0,r.pipe)(i,Z.M(t.pipe(_.U(D.getOrElseW((()=>null)))))).subscribe((([e,t])=>{t&&t.showSnippetsEditor(e.snippetContent)})))}dispose(){this._sub.unsubscribe()}}var Q,Y=i(78594);class ${constructor(e,t){this._domain=e,this._gnar=t}getDomain(){return this._domain}submitFeedback(e){this._gnar.assistantFeedbackSubmitButtonClick("single_card_assistant",e.domain,e.text,(0,Y.dK)(e)?e.score:void 0)}}!function(e){e.AccountCreation="accountCreation",e.Tour="tour",e.TryWebsite="tryWebsite",e.ViewApps="viewApps"}(Q||(Q={}));const ee={completedItems:[]};class te{constructor(e,t,i,a){this.anonymous=e,this.state=t,this.gnar=i,this._dapiActions=a,this.actions={updateChecklistState:e=>{var t;this._dapiActions.setGetStartedChecklistState((t=e,encodeURI(JSON.stringify({...t,completedItems:t.completedItems.filter((e=>null!=e&&"string"==typeof e))}))))}}}get checklistState(){return this.state.dapi["DN:getStartedChecklistSettings"]?(e=>{try{const t=decodeURI(e),i=JSON.parse(t);if("completedItems"in i&&Array.isArray(i.completedItems)){const e=i.completedItems.filter((e=>null!==e&&"string"==typeof e));return{...i,completedItems:e}}}catch(e){return ee}return ee})(this.state.dapi["DN:getStartedChecklistSettings"]):ee}}var ie,ae=i(14532);!function(e){e.correct="correct",e.incorrect="incorrect",e.neutral="neutral"}(ie||(ie={}));class ne{constructor(e,t,i,a,n){this._learnMoreInfo=M.h.create(null),this._sub=new k.w;const s=(0,r.pipe)(a,_.U((0,h.ls)((e=>e.actions),X.Ew((e=>"openLearnMore"===e.type||"switchView"===e.type&&"learn-more"===e.selected)))),K.oA);this._sub.add((0,r.pipe)(s,Z.M(e),_.U((([e,a])=>{let s=null;if(B.nL.hasItems(a)){const o=(0,r.pipe)(n(a.currentLens),D.getOrElseW((()=>null))),l=o?(0,r.pipe)(t.getById(o.activeAlert.id),D.getOrElseW((()=>null))):null,d=(0,r.pipe)(D.fromNullable(l),D.chain(L.bZ.getRawId),D.getOrElseW((()=>null))),u=d?i.alerts.getAlertById(d):null;u&&c.S.isCapiAlert(u)&&(s={title:u.todo,showTitleOnContent:"switchView"===e.type,details:u.details||u.explanation,examples:(0,r.pipe)(ae.J.parse(u.examples,u.point.includes("Italicization")),D.map((e=>e.map((e=>e.map((e=>({type:e.color===ae.J.Color.green?ie.correct:e.color===ae.J.Color.red?ie.incorrect:ie.neutral,title:(0,r.pipe)(e.title,D.map((e=>`${e}:`)),D.getOrElseW((()=>null))),text:e.text,useItalicText:!e.hasItalic}))))).flat())),D.getOrElseW((()=>[])))})}return s}))).subscribe(T.wW(this._learnMoreInfo)))}get learnMoreInfo(){return this._learnMoreInfo.view()}dispose(){this._sub.unsubscribe()}}var se=i(32952),re=i(9922),oe=i(2834);class le{get header(){return this._header}constructor(e,t){this.popView=new se.xQ,this._header=M.h.create(D.none),this._subs=new re.w.Keeper,this._subs.push((0,h.zG)(this.popView,Z.M(I.aj([t.sduiManager.state,t.sduiFeedManager.feed])),_.U((([e,[t,i]])=>E.D.AssistantFeed.Header.getSelectedViewBackButtonActions(t,i.feedId))),K.oA,oe.b((t=>e.actionEvents.next(E.f.create(t))))).subscribe()),this._subs.push(t.sduiFeedManager.header.pipe(_.U(D.of)).subscribe(T.wW(this._header)))}dispose(){this._subs.dispose()}}var ce=i(95572),de=i(73763),ue=i(15646);class pe{constructor(e,t,i,a,n,s){this._cardEvents=e,this._alertProcessor=t,this._pageState=i,this._actions=a,this._experimentClient=n,this._gnar=s,this._subs=new k.w,this.currentCard=M.h.create(void 0),this._getExtraFooterOutcomeType=e=>{var t,i;if(e){const a=this._alertProcessor.alerts.getAlertById(e.toString());if(a&&c.S.isCapiAlert(a)){const e=a.outcome;if((0,ce.wF)(e)&&!(null===(i=null===(t=this._pageState.get().lifetimeAlertStats)||void 0===t?void 0:t.seen)||void 0===i?void 0:i[e]))return this._actions.setHasSeenSuggestionType(e),e}}},this.onShow=()=>{var e;this._gnar.firstAcceptFooterShow(null!==(e=this.extraFooterOutcomeType.get())&&void 0!==e?e:"other","assistant")},this._pageState.get().showFirstSuggestionFooters&&"test"===this._experimentClient.getTreatment(de.p.ProgressiveExposure)?(this._subs.add(this._cardEvents.subscribe((e=>{if(e.type===ue.eI.Kind.completeTransitionTo){const t=e.id;"number"!=typeof t&&"string"!=typeof t||this.currentCard.set(t)}}))),this.extraFooterOutcomeType=this.currentCard.view((e=>this._getExtraFooterOutcomeType(e)))):this.extraFooterOutcomeType=M.h.create(void 0)}dispose(){this._subs.unsubscribe()}}var me=i(66310),ge=i(40151),he=i(95195),ve=i(18208),fe=i(40330),we=i(79880);class be{constructor(e,t,i,a,n,s){this._sduiManager=e,this._sduiManagerFactory=i,this._statisticsService=a,this._upgradeHookCardExists=s,this._subs=new k.w,this.focusSuccessReportStateTransformer=({state:e,metadata:t})=>{if(!B.nL.hasCards(e))return he.t$({state:e,metadata:t});const i=B.nL.Prism.getLens();return he.t$({state:i.modify((e=>D.isSome(e.cardIndex)||e.items.size>1||(0,r.pipe)(e.items.getAt(0),D.map((e=>e.id!==E.D.SuccessReport.ID)),D.getOrElse(h.jv))?e:{...e,cardIndex:D.some(0)}),e),metadata:t})};const o=this._sduiManager.state.pipe(_.U((e=>E.D.GButton.getPushAssistantFeedAction(e,E.D.GButton.DEFAULT_GBUTTON_ID))),K.oA,_.U((e=>e.feedId))),l=n.pipe(_.U((e=>B.nL.hasSuccess(e)&&B.nL.hasItems(e)&&(0===e.currentLens.items.size||(0,r.pipe)(e.currentLens.items.getAt(0),D.map((e=>e.id===E.D.SuccessReport.ID)),D.getOrElse(h.jv)))))),c=t.feed.pipe(Z.M(o),_.U((([e,t])=>e.feedId===t)));this.isSuccess=I.aj([l,c]).pipe(_.U((([e,t])=>e&&t)))}_getSuccessMessages(e,t){return{title:t<2?"Looking good so far":e>0?`${e} ${ve._6(e,"issue addressed","issues addressed")}`:"Nice job!",subTitle:t<2?"Keep writing to see suggestions.":e>0?"All clear!":"You made that look easy!"}}_getSuccessReportSDUI(e,t,i){const{title:a,subTitle:n}=this._getSuccessMessages(e,t);return{type:"assistantCard",id:E.D.SuccessReport.ID,child:{type:"viewStack",id:"card-viewStack",views:{"default-suggestion":{type:"column",id:fe.JX.from("column"),children:[{type:"block",id:fe.JX.from("block"),parts:[{type:"image",id:fe.JX.from("image"),name:fe.yL.unknown("success_report_image"),url:"https://assets.grammarly.com/icons/v1/notification-ok.svg",width:2,height:2,meta:{}}],name:fe.yL.unknown("success_report_image_block"),spacing:{top:we.T.D1,right:we.T.D0,bottom:we.T.D075,left:we.T.D0},horizontalAlign:we.Kq.Center},{type:"block",id:fe.JX.from("block"),parts:[{type:"text",id:fe.JX.from("text"),size:we.yH.Regular,text:a,textColor:we.Il.CoreNeutral90,format:[we.SQ.Bold],meta:{}}],name:fe.yL.unknown("success_report_title_block"),horizontalAlign:we.Kq.Center},{type:"block",id:fe.JX.from("block"),parts:[{type:"text",id:fe.JX.from("text"),size:we.yH.Regular,text:n,textColor:we.Il.CoreNeutral50,format:[],meta:{}}],name:fe.yL.unknown("success_report_subtitle_block"),horizontalAlign:we.Kq.Center},{type:"block",id:fe.JX.from("block"),parts:[],name:fe.yL.unknown("success_report_subtitle_space_1_block"),spacing:{top:we.T.D0,right:we.T.D0,bottom:we.T.D1,left:we.T.D0}},{type:"block",id:fe.JX.from("block"),parts:[],name:fe.yL.unknown("success_report_subtitle_space_2_block"),spacing:{top:we.T.D0,right:we.T.D0,bottom:we.T.D1,left:we.T.D0}},{type:"block",id:fe.JX.from("block"),parts:[],name:fe.yL.unknown("success_report_subtitle_space_3_block"),spacing:{top:we.T.D0,right:we.T.D0,bottom:we.T.D1,left:we.T.D0}},{type:"block",id:fe.JX.from("block"),parts:[],name:fe.yL.unknown("success_report_subtitle_space_4_block"),spacing:{top:we.T.D0,right:we.T.D0,bottom:we.T.D1,left:we.T.D0}}],name:fe.yL.unknown("success_report_content_column")},"tone-insights":{type:"nativeToneInsightsModal",id:"card-nativeToneInsightsModal"},feedback:{type:"nativeFeedbackModal",id:"card-nativeFeedbackModal"},settings:{type:"nativeSettingsModal",id:"card-nativeSettingsModal"}},selected:"default-suggestion"},onFocus:[{type:"switchView",where:"openToneDetectorButton-viewStack",selected:"show-open-tone-detector-button"},{type:"switchView",where:"card-viewStack",selected:"default-suggestion"},{type:"switchView",where:"header-viewStack",selected:"default-suggestion"},{type:"notify",userAction:we.nz.Focus}],meta:{},properties:i}}initSuccessReportSDUIEmulation(){const e=this._statisticsService.sessionStats.view((e=>e?e.alertsStats.accepted.total:0));this._subs.add(I.aj([this.isSuccess.pipe(A.x()),this._sduiManager.state.pipe(_.U(E.D.SuccessReport.findSuccessReportSduiItem),_.U(D.isSome),A.x()),this._upgradeHookCardExists]).pipe(Z.M(this._sduiManagerFactory.sduiCardPropsForDefaultFeed),_.U((([[e,t,i],a])=>{var n,s;if(!e||i||t)return!(e||!t)&&(this._sduiManagerFactory.pushCapiSduiEvent({kind:"sdui_remove",rev:0,sduiRootId:E.D.SuccessReport.ID}),!1);{const e=null!==(s=null===(n=this._statisticsService.sessionStats.get())||void 0===n?void 0:n.alertsStats.accepted.total)&&void 0!==s?s:0,t=this._statisticsService.wordsCount.get(),i=this._getSuccessReportSDUI(e,t,a);return this._sduiManagerFactory.pushCapiSduiEvent({kind:"sdui_add",rev:0,sduiRootId:E.D.SuccessReport.ID,sdui:i}),!0}})),me.w((t=>t?I.aj([e,this._statisticsService.wordsCount,this._sduiManagerFactory.sduiCardPropsForDefaultFeed]).pipe(oe.b((([e,t,i])=>{const a=this._getSuccessReportSDUI(e,t,i);this._sduiManagerFactory.pushCapiSduiEvent({kind:"sdui_update",rev:0,sduiRootId:E.D.SuccessReport.ID,sdui:a})}))):ge.E))).subscribe())}dispose(){this._subs.unsubscribe()}}i(9088);const Se=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;var ye=i(73582),Ee=i(62111),Ce=i(4390),ke=i(85985),_e=i(24209),Ae=i(83078);const Ie={"Style/ToneImprovement/ConfidentRewrite/ToneAI":"1f91d","Style/ToneImprovement/PersonableRewrite/ToneAI":"1f917","Style/ToneImprovement/PositiveFraming/ToneAI":"1f64c"},Te=["Style/Sensitivity/SupportUkraine/WarLanguage","Style/Sensitivity/ExtremelySensitive/SuicideIdeation"],Me=e=>e.patternName.startsWith("Style/Sensitivity")&&!Te.some((t=>e.patternName===t));var xe;!function(e){e.isToneImprovementSuggestionInfo=function(e){return"emojiId"in e},e.isInclusiveLanguageToneSuggestionInfo=function(e){return"iconId"in e&&"inclusive_language"===e.toneCategory},e.createToneImprovementSuggestionUphookInfo=function(e){const t=e._raw.minicardTitle||e._raw.title||"",i=t.replace(Se,"").trim(),a=t.match(Se),n=a&&a.length?a[0]:null,s=Ie[e.patternName];return{...n?{emojiLiteral:n}:s?{emojiId:s}:{},title:i,alertId:e.id,toneCategory:i,patternName:e.patternName,isUphook:!0}},e.isToneImprovementSuggestionUphookInfo=function(e){return"isUphook"in e&&e.isUphook}}(xe||(xe={}));class Re{constructor(e,t,i,a,n,s,r,o,l,c){this._alertsReader=e,this._getSessionUuid=i,this._gnar=a,this.emogenieService=s,this._upgradeViewModel=r,this._cardActions=l,this._sduiItems=c,this._toneSuggestionInfo=M.h.create(void 0),this._sub=new k.w;const d=this._sduiItems.view(E.D.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),u=M.h.combine(t,d,((e,t)=>Ce.p.reduce([],((e,i)=>(t.has(i.id)||e.push(i.alert),e)))(e))),p=s.viewState.view("isBrandTonesEnabled"),m=o.view("isPremium"),g=M.h.combine(u,p,m,((e,t,i)=>Re.getToneSuggestionInfoFromAlerts(e,t,i))),h=g.pipe(ke.h((e=>void 0===e||!xe.isToneImprovementSuggestionUphookInfo(e)))),v=g.pipe(ke.h((e=>void 0!==e&&xe.isToneImprovementSuggestionUphookInfo(e)&&"test"===n.getTreatment(de.p.ToneDetectorUphook))));this._sub.add(_e.T(h,v).subscribe(T.wW(this._toneSuggestionInfo))),this.toneSuggestionInfo=this._toneSuggestionInfo.view()}static getToneSuggestionInfoFromAlerts(e,t,i){let a;if(i){a=e.filter((e=>e.patternName.startsWith("Style/ToneImprovement")||Me(e))).map((e=>{var t,i,a;return Me(e)?{iconId:null!==(t=e._raw.extra_properties.icon_id)&&void 0!==t?t:"",title:e.miniCardTitle,alertId:e.id,toneCategory:"inclusive_language",patternName:e.patternName}:{emojiId:null!==(i=e._raw.extra_properties.emoji_id)&&void 0!==i?i:"",title:L.bZ.isToneAI(e)?e.miniCardTitle:e.miniCardTitle.replace(Se,"").trim(),alertId:e.id,toneCategory:null!==(a=e._raw.extra_properties.tone)&&void 0!==a?a:"",patternName:e.patternName}}))}else{a=e.filter((e=>e._raw.hidden&&(e=>e.patternName.startsWith("Style/ToneImprovement"))(e))).map(xe.createToneImprovementSuggestionUphookInfo)}const n=new Set(a.map((e=>e.toneCategory))),s=a[0],r=t?"Want to sound more on-brand?":n.size>1?"Strike the right tone":null==s?void 0:s.title;return s?{...s,title:r}:s}_getCurrentSessionUuid(){return(0,r.pipe)(this._getSessionUuid(),D.getOrElse((()=>"")))}onShowToneSuggestionInfo(e){const t=xe.isToneImprovementSuggestionInfo(e)?e.emojiId:xe.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=xe.isToneImprovementSuggestionUphookInfo(e);this._gnar.toneDetectorToneSuggestionInfoShow(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i&&(this._gnar.getPremiumButtonShow("toneDetector",void 0,void 0,void 0,void 0,"toneDetector","emogenieReport"),(0,Ee.T)().upgradeHooks.showUpgradeHook("toneDetector","emogenieReport"))}onClickToneSuggestionInfoCta(e){const t=xe.isToneImprovementSuggestionInfo(e)?e.emojiId:xe.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=xe.isToneImprovementSuggestionUphookInfo(e);if(this._gnar.toneDetectorToneSuggestionInfoCtaClick(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i)this._gnar.getPremiumButtonClick("toneDetector",void 0,void 0,void 0,void 0,"toneDetector","emogenieReport"),(0,Ee.T)().upgradeHooks.clickUpgradeHook("toneDetector","emogenieReport"),this._upgradeViewModel.openUpgradeUrl(ye.L.Place.toneSuggestion);else{const t=this._sduiItems.get(),i=(0,r.pipe)(this._alertsReader.getById(e.alertId),D.chain(L.bZ.getRawId),D.chain((e=>E.D.getByAlertId(t,e))),Ae.MH);this._cardActions.next(E.f.create([E.D.AssistantFeed.createPushAssistantFeedAction(E.D.AssistantFeed.TONE_INSIGHTS_SUGGESTIONS_FEED_ID,i.id)]))}}dispose(){this._sub.unsubscribe()}}var Fe=i(66896),Le=i(60682),Pe=i(50628),Ne=i(73975),Be=i(22232);const Ue=e=>{switch(e){case Fe.R.Type.Critical:case Fe.R.Type.Correctness:return we.Il.CoreRed50;case Fe.R.Type.Clarity:return we.Il.CoreBlue50;case Fe.R.Type.Engagement:return we.Il.CoreGreen60;case Fe.R.Type.Delivery:return we.Il.CorePurple40;case Fe.R.Type.Vox:return we.Il.CoreNeutral50;case Fe.R.Type.Plagiarism:return we.Il.CoreCyan50;case Fe.R.Type.Advanced:case Fe.R.Type.Other:case Fe.R.Type.KnowledgeHub:return;default:return(0,Be.vE)(e)}},De=(e,t)=>{var i;const a=(i=e,Object.values(i.reduce(((e,t)=>{const i=t.lensType;return e[i]?e[i]={...e[i],lensNames:X.jj(Ne.w4)([...e[i].lensNames,t.lensName]),alertsCount:e[i].alertsCount+1}:e[i]={lensNames:[t.lensName],lensType:t.lensType,alertsCount:1},e}),{}))).map((e=>{var t;return fe.X2.create([{type:"block",fraction:1,horizontalAlign:we.Kq.Center,id:fe.JX.from("block"),name:fe.yL.unknown("upgrade_hook_counter"),parts:[fe.XF.create(e.alertsCount.toString(),null!==(t=Ue(e.lensType))&&void 0!==t?t:we.Il.CoreNeutral50)]},{type:"block",fraction:11,id:fe.JX.from("block"),name:fe.yL.unknown("upgrade_hook_alert_group"),parts:[fe.xv.create(ve.kC(e.lensType),we.yH.Regular,[],we.Il.CoreNeutral90,void 0,void 0),fe.xv.create(` · ${e.lensNames.join(", ")}`,we.yH.Regular,[],we.Il.CoreNeutral50,void 0,void 0)]}],[],fe.Ki.create("0.5","0.25","0.25","0.75"),we.g$.Middle)})),n=fe.sg.create([fe.X2.create([fe.gO.create("title",void 0,void 0,fe.xv.create("Premium suggestions available:",we.yH.Regular,[we.SQ.Bold],we.Il.CoreNeutral90,void 0,void 0))],[],fe.Ki.create("0.75","0.25","0.5","0.75"),we.g$.Middle),fe.gO.create("content",void 0,void 0,...a),fe.X2.create([{...fe.gO.create("actions",void 0,fe.n4.create("0.5","0"),{type:"button",id:fe.JX.from("goPremium"),name:fe.yL.unknown("goPremium"),shape:we.jL.Square,actions:[{type:"upgradeToPremium"},{type:"notify",userAction:we.nz.Click}],kind:we.Lv.Primary,state:we.BN.Enabled,label:{...fe.gO.create("",fe.Ki.create("0","0.5","0","0.25"),fe.n4.create("0.25","0.25"),fe.JO.create(fe.JO.Source.createKnown(we.Tb.Diamond),void 0),fe.xv.create("Unlock Premium",we.yH.Regular,[],we.Il.CoreYellow80,void 0,void 0)),verticalAlign:we.g$.Middle},meta:{}},{type:"button",id:fe.JX.from("button"),name:fe.yL.unknown("dismiss"),shape:we.jL.Square,actions:[{type:"removeRoot"},{type:"notify",userAction:we.nz.Click}],kind:we.Lv.Secondary,state:we.BN.Enabled,label:fe.gO.create("",fe.Ki.create("0","0.5","0","0.5"),{horizontal:we.T.D025,vertical:we.T.D0},fe.xv.create("Dismiss",we.yH.Regular,[],we.Il.CoreNeutral50,void 0,void 0)),meta:{}}),verticalAlign:we.g$.Middle}],[fe.gO.create("navigation-arrows",void 0,void 0,fe.zx.createIcon(we.MU.ButtonPrev,fe.JO.Source.createKnown(we.Tb.ArrowLeft),[{type:"prevCard"},{type:"transition",fromName:"content",toName:"content",animateFrom:we.c1.SlideRight,animateTo:we.c1.SlideRight},{type:"transition",fromName:"title",toName:"title",animateFrom:we.c1.SlideRight,animateTo:we.c1.SlideRight},{type:"notify",userAction:we.nz.Click}],we.Lv.Secondary,"Previous suggestion"),fe.zx.createIcon(we.MU.ButtonNext,fe.JO.Source.createKnown(we.Tb.ArrowRight),[{type:"nextCard"},{type:"notify",userAction:we.nz.Click}],we.Lv.Secondary,"Next suggestion"))],fe.Ki.create("0.5","0.25","1","0.75"),we.g$.Middle)]);return{id:E.D.NativeUpgradeHook.ID,type:"assistantCard",child:{...fe.XJ.create("default-suggestion",{"default-suggestion":n,feedback:{type:"nativeFeedbackModal",id:"card-nativeFeedbackModal"},settings:{type:"nativeSettingsModal",id:"card-nativeSettingsModal"},"tone-insights":{type:"nativeToneInsightsModal",id:"card-nativeToneInsightsModal"}}),id:"card-viewStack"},onFocus:[{type:"switchView",where:"openToneDetectorButton-viewStack",selected:"show-open-tone-detector-button"},{type:"switchView",where:"card-viewStack",selected:"default-suggestion"},{type:"switchView",where:"header-viewStack",selected:"default-suggestion"},{type:"notify",userAction:we.nz.Focus}],properties:{...t,"feed-order":1},meta:{}}};class Ve{constructor(e){this._subs=new k.w,this._upgradeHookCard=M.h.create(D.none),this._upgradeHookCardFocused=M.h.create(!1),this.processUpgradeHookSduiCardActions=(e,t)=>e.pipe(Z.M(this._upgradeHookCard),_.U((([{actions:e,cardId:i},a])=>{e.forEach((e=>{"upgradeToPremium"===e.type?t.openUpgradeUrl(ye.L.Place.assistantCardList):"notify"===e.type&&e.userAction===we.nz.Focus&&(0,h.zG)(a,D.fold(h.jv,(e=>e.id.toString()===i)),(e=>this._upgradeHookCardFocused.set(e)))}))}))).subscribe(),this._subs.add(e.pipe(_.U(E.D.StrongAlertRef.findStrongAlertRefUpgradeHookSduiItem)).subscribe(T.wW(this._upgradeHookCard)))}get upgradeHookCardExists(){return this._upgradeHookCard.view(D.isSome)}get upgradeHookCardFocused(){return this._upgradeHookCardFocused.view()}dispose(){this._subs.unsubscribe()}}var Oe=i(48660),He=i(36018),Ge=i(29511),We=i(21059),je=i(64757),ze=i(12187);const qe=[{id:Q.AccountCreation,title:"Create an account",description:"Sign up for free or sign in to an existing account to start receiving writing insights."},{id:Q.Tour,title:"Take a quick tour",description:"Want to see how Grammarly works?"},{id:Q.TryWebsite,title:"Try writing with Grammarly",description:"Get suggestions wherever you write online with the browser extension."},{id:Q.ViewApps,title:"Explore other Grammarly products",description:"Get suggestions from Grammarly when you write on all your favorite platforms and devices."}],Ke=[{id:"gmail",text:"Try it in Gmail",icon:"gmail",href:"https://mail.google.com/#compose"},{id:"outlook",text:"Try it in Microsoft Outlook",icon:"outlook",href:"https://outlook.live.com/mail"},{id:"gDocs",text:"Try it in Google Docs",icon:"gdocs",href:"https://docs.google.com"}],Ze=[{id:"desktop",text:"Grammarly for Desktop",href:"https://www.grammarly.com/desktop"},{id:"keyboard",text:"The Grammarly Keyboard",href:"https://www.grammarly.com/mobile"}];var Xe=i(57618);const Je=({label:e,href:t,onClick:i})=>o.createElement(je.zx.Primary,{className:Xe.link,"data-part":e.toLowerCase().split(" ").join("-"),onClick:i,target:t?"_blank":"_self",href:t},e),Qe=({items:e,onClick:t})=>o.createElement(o.Fragment,null,e.map((({id:e,text:i,icon:a,href:n})=>o.createElement(je.zx,{key:e,className:Xe.externalLink,"data-part":`try-${e}`,"aria-label":e,name:`get-started-${e}`,styleType:Oe.Z.Type.Base,href:n,target:"_blank",onClick:()=>t(e)},a&&o.createElement("div",{...(0,ze.Sh)(Xe.icon,Xe[a])}),o.createElement("span",null,i))))),Ye=(e,t)=>{const i=e.find((e=>!t.has(e.id)));return null==i?void 0:i.id};var $e=i(34257);const et=({completed:e,total:t})=>o.createElement("div",{className:$e.progressBarBg},o.createElement("div",{"data-name":"progress-bar","aria-label":"completionProgress",className:$e.progressBar,role:"progressbar","aria-valuenow":e,style:{width:(e<=t&&e>=0?e/t*100:e<0?0:100)+"%"}}));var tt=i(25416);const it=({getStartedChecklistViewModel:e,notify:t})=>{const{anonymous:i,checklistState:a,gnar:n,actions:s}=e,[r,l]=o.useState((()=>{const e=new Set([...a.completedItems,...i?[]:[Q.AccountCreation]]);return{items:e,count:e.size}})),[c,d]=o.useState(((e,t)=>{const i=Ye(e,t);return i?new Set([i]):new Set})(qe,r.items)),u=(e,i)=>{const o=new Set,c=new Set(r.items);if(n.getStartedChecklistActionLinkClick(i,c.size,qe.length),e!==Q.AccountCreation){r.items.has(e)||(c.add(e),l({items:c,count:c.size}),Object.values(Q).every((e=>c.has(e)))&&t());const i=Ye(qe,c);o.delete(e),i&&o.add(i),d(o),s.updateChecklistState({...a,completedItems:[...c]})}};return o.useEffect((()=>{n.getStartedChecklistShow()}),[]),o.createElement("div",{className:tt.getStartedChecklist},o.createElement("div",{className:tt.logo}),o.createElement(Oe.Z.H3,{className:tt.title},"Welcome! Here are a few steps to get you started."),o.createElement(Oe.Z.Base,{className:tt.progressCaption},"You’ve completed ",o.createElement("strong",null,r.count)," out of"," ",o.createElement("strong",null,qe.length)," steps."),o.createElement(et,{total:qe.length,completed:r.count}),o.createElement(He.W,{allChecklistItems:qe,completedItems:r,expandedItems:c,onExpandItem:e=>{const t=new Set,a=i?Q.AccountCreation:e;if(n.getStartedChecklistSectionClick(e),0===c.size)t.add(a),n.getStartedChecklistSectionExpand(a);else{const[i]=c;i!=e?(t.add(a),n.getStartedChecklistSectionCollapse(i),n.getStartedChecklistSectionExpand(a)):n.getStartedChecklistSectionCollapse(i)}d(t)},getCTA:e=>((e,t)=>{switch(e){case"accountCreation":return o.createElement(Je,{label:"Sign up",href:"https://www.grammarly.com/signup",onClick:()=>t(Q.AccountCreation,Q.AccountCreation)});case"tour":return o.createElement(Je,{label:"Start tour",onClick:()=>{t(Q.Tour,Q.Tour),(0,Ge.O)().bgRpc.api.sendToFocusTab({kind:We.B.Kind.showOnboardingDialog})}});case"tryWebsite":return o.createElement(Qe,{items:Ke,onClick:e=>t(Q.TryWebsite,e)});case"viewApps":return o.createElement(Qe,{items:Ze,onClick:e=>t(Q.ViewApps,e)});default:return null}})(e,u)}))};var at=i(31699);const nt=({htmlToSanitize:e,...t})=>o.createElement("div",{...t,dangerouslySetInnerHTML:{__html:(0,at.sanitize)(e)}});var st=i(34238);const rt=({title:e,details:t,examples:i})=>o.createElement("div",{className:st.learnMore},void 0!==e?o.createElement("div",{className:st.learnMoreTitle},ve.kC(e)):null,o.createElement(nt,{htmlToSanitize:t}),i.map(((e,t)=>{const i=e.type===ie.correct,a=e.type===ie.incorrect,n=i||a?o.createElement("div",{...(0,ze.Sh)(st.learnMoreExampleIcon,i?st.learnMoreExampleCorrectIcon:null,a?st.learnMoreExampleIncorrectIcon:null)}):null;return o.createElement("div",{className:st.learnMoreExample,key:`learn-more-example-${t}`},e.title?o.createElement(o.Fragment,null,o.createElement("div",{className:st.learnMoreExampleIconAndTitle},n,o.createElement("div",{className:st.learnMoreExampleTitle},e.title)),o.createElement(nt,{...(0,ze.Sh)(n?st.learnMoreExampleTextMarginLeft:null,e.useItalicText?st.learnMoreExampleTextItalic:null),htmlToSanitize:e.text})):o.createElement(nt,{...(0,ze.Sh)(e.useItalicText?st.learnMoreExampleTextItalic:null),htmlToSanitize:e.text}))})));var ot=i(19703);const lt=({learnMoreInfo:e})=>o.createElement(ot.F.Fragment,null,e.view((e=>e?o.createElement(rt,{title:e.showTitleOnContent?e.title:void 0,details:e.details,examples:e.examples}):null)));var ct=i(32613),dt=i(83350),ut=i(88326);const pt=({children:e,popActiveView:t,panelClassName:i,contentClassName:a,footer:n,onClickBack:s,hideBackButton:r=M.h.create(!1),dataPartName:l})=>o.createElement("div",{className:dt.viewOverlay,"data-grammarly-part":"assistant-view-overlay"},o.createElement(ot.F.Fragment,null,r.view((e=>!e&&o.createElement(ut.M,{className:dt.viewOverlayGoBack,clickHandler:()=>s?s():t(),dataGrammarlyPart:"assistant-go-back"},"<- Back")))),o.createElement("div",{className:i||dt.defaultViewOverlayPanel},o.createElement("div",{className:a||dt.content,"data-grammarly-part":l},e),n&&o.createElement("div",{className:dt.footer},n)));var mt=i(86705);const gt=({popActiveView:e,browser:t,onClickBack:i,children:a})=>{const[n,s]=o.useState(!1);return o.createElement(pt,{dataPartName:"proofit-view-overlay",popActiveView:e,panelClassName:ct.proofitViewOverlayPanel,onClickBack:i},o.createElement("div",{className:ct.proofitViewOverlayContent,tabIndex:-1,ref:e=>{null===e||n||(e.focus(),s(!0))}},o.createElement("div",{className:dt.defaultViewOverlayHeader},o.createElement("div",{className:ct.proofitViewOverlayHeader},"Expert Writing Help",o.createElement(mt.v,{browser:t,className:ct.proofitViewOverlayHeaderBetaBadge}))),a))};var ht=i(10247),vt=i(24606),ft=i(31944),wt=i(81108);var bt=i(49972),St=i(20228),yt=i(79918);const Et=({turnaroundTime:e})=>o.createElement("div",{className:St.proofitHowItWorksSteps},o.createElement("div",{...(0,ze.Sh)(St.proofitHowItWorksStep,St.proofitHowItWorksStepOne)},"Your draft will be minimized and shared with writing experts.",o.createElement("div",{...(0,ze.Sh)(St.proofitHowItWorksStepNumberContainer,St.proofitHowItWorksStepOneNumberContainer)},o.createElement("div",{...(0,ze.Sh)(St.proofitHowItWorksStepNumber,St.proofitHowItWorksStepOneNumber)},"1"))),o.createElement("div",{...(0,ze.Sh)(St.proofitHowItWorksStep,St.proofitHowItWorksStepTwo)},"You will see progress indication. The average turnaround is ",e," seconds.",o.createElement("div",{...(0,ze.Sh)(St.proofitHowItWorksStepNumberContainer,St.proofitHowItWorksStepTwoNumberContainer)},o.createElement("div",{...(0,ze.Sh)(St.proofitHowItWorksStepNumber,St.proofitHowItWorksStepTwoNumber)},"2"))),o.createElement("div",{...(0,ze.Sh)(St.proofitHowItWorksStep,St.proofitHowItWorksStepThree)},"Your draft will re-open with revisions highlighted.",o.createElement("div",{...(0,ze.Sh)(St.proofitHowItWorksStepNumberContainer,St.proofitHowItWorksStepThreeNumberContainer)},o.createElement("div",{...(0,ze.Sh)(St.proofitHowItWorksStepNumber,St.proofitHowItWorksStepThreeNumber)},"3")))),Ct=({turnaroundTime:e,freeTrialQuota:t,onSubmit:i,disabledInfo:a=null,isLoading:n=!1,style:s,onTogglePrivacyInfo:r,showPrivacyInfo:l,disableHowItWorksInfo:c=!1,onDisableHowItWorksInfo:d,showHowItWorksInfo:u,onShowHowItWorksInfo:p})=>{const[m,g]=o.useState(null!=l&&l),[h,v]=o.useState(null!=u&&u),f=t>0?t:0;var w,b;o.useEffect((()=>{null==r||r(m)}),[m]),o.useEffect((()=>{g(null!=l&&l)}),[l]),o.useEffect((()=>{v(null!=u&&u)}),[u]),w=()=>null==p?void 0:p(),b=h,o.useEffect((()=>{b&&w()}),[b]);const S=o.useCallback((()=>{c||h?i():v(!0)}),[c,h,i]);return o.createElement("div",{"data-grammarly-part":"proofit-request-form",style:{width:"100%",height:"100%",...s}},o.createElement("div",{className:yt.proofitRequestForm},m?o.createElement(o.Fragment,null,o.createElement("div",{className:yt.proofitRequestFormPrivacyInfoTitle},"How we protect you"),o.createElement("div",{className:yt.proofitRequestFormPrivacyInfoDescription},o.createElement("div",{className:yt.proofitRequestFormPrivacyInfoDescriptionItem},o.createElement("div",{className:yt.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),o.createElement("div",{className:yt.proofitRequestFormPrivacyInfoDescriptionItemText},"Our writing experts will see only your current email draft—no prior messages or contact details.")),o.createElement("div",{className:yt.proofitRequestFormPrivacyInfoDescriptionItem},o.createElement("div",{className:yt.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),o.createElement("div",{className:yt.proofitRequestFormPrivacyInfoDescriptionItemText},"We will not sell, rent, or make public any of your personal data."))),o.createElement(vt.z,{kind:"outlined",onClick:()=>g(!1)},"Continue")):o.createElement(o.Fragment,null,h?o.createElement(Et,{turnaroundTime:e}):o.createElement(o.Fragment,null,o.createElement("div",{className:yt.proofitRequestFormImg}),o.createElement("div",{className:yt.proofitRequestFormTitle},"Get instant writing help"),o.createElement("div",{className:yt.proofitRequestFormDescription},"Our writing experts are standing by to review your email."),o.createElement("div",{className:yt.proofitRequestFormCostAndTime},o.createElement("div",{className:yt.proofitRequestFormCost},o.createElement("div",{className:yt.proofitRequestFormCostAndTimeTitle},f," free ",ve._6(f,"review","reviews")),o.createElement("div",{className:yt.proofitRequestFormCostAndTimeSubtitle},"left this month",o.createElement("sup",null,"*"))),o.createElement("div",{className:yt.proofitRequestFormTime},o.createElement("div",{className:yt.proofitRequestFormCostAndTimeTitle},e," seconds"),o.createElement("div",{className:yt.proofitRequestFormCostAndTimeSubtitle},"average turnaround")))),o.createElement(vt.z,{kind:"primary",className:yt.proofitRequestFormRequestBtn,disabled:Boolean(a||n),onClick:S},n?o.createElement("div",{className:bt.proofitRequestFormBtnLoadingSpinner}):c||h?"Start review":"Request now"),a||n?a?o.createElement("div",{className:yt.proofitRequestFormUnavailableMsg},o.createElement(wt.Q,{info:a})):null:o.createElement(vt.z,{kind:"link",onClick:()=>g(!0)},"Learn how we protect your privacy"),o.createElement("div",{...(0,ze.Sh)(yt.proofitRequestFormFootnote,h?yt.proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:yt.proofitRequestFormFootnoteFreeTrial)},h?o.createElement(ft.J,{labelId:"proofit-request-form-how-it-works-dont-show-again",onChange:d},"Don't show this again"):o.createElement("span",null,o.createElement("sup",null,"*")," included with your Premium subscription")))))};var kt=i(9526);const _t=({proofitVM:e,...t})=>{const i=(0,kt.fW)(),[a,n]=o.useState(!1),[s,r]=o.useState(!1),l=o.createElement(ot.F.Fragment,null,(0,I.aj)([e.feature.layoutCreated,e.feature.requestInfo,e.feature.turnaroundTime,e.feature.quotaRemaining,e.feature.requestDisabledInfo,e.feature.disableHowItWorksInfo]).pipe((0,_.U)((([t,l,c,d,u,p])=>t&&l.status!==ht.eE.REVIEWING?o.createElement(Ct,{turnaroundTime:c,freeTrialQuota:d,onSubmit:()=>e.onSubmitRequest(i),style:{height:"calc(100% - 48px)"},disabledInfo:u,isLoading:l.status===ht.eE.PREPARING||l.status===ht.eE.PRE_SUBMIT,showPrivacyInfo:a,onTogglePrivacyInfo:n,disableHowItWorksInfo:p,onDisableHowItWorksInfo:t=>e.feature.onDisableHowItWorksInfo(t),showHowItWorksInfo:s,onShowHowItWorksInfo:()=>r(!0)}):null))));return t.insideSingleCardAssistant?l:o.createElement(gt,{popActiveView:t.popActiveView,browser:t.browser,onClickBack:()=>{a?n(!1):s?r(!1):t.popActiveView()}},l)};var At=i(71636);const It=({suggestionsMade:e,onAccept:t,onFeedbackFormSubmitted:i})=>o.createElement("div",{className:At.proofitReviewForm,"data-grammarly-part":"proofit-review-form"},o.createElement("div",{className:At.proofitReviewFormTitle},"Our experts made ",e," ",ve._6(e,"suggestion","suggestions")),o.createElement("div",{className:At.proofitReviewFormDescription},"Are you satisfied with the suggestions that our experts provided?"),o.createElement("div",{className:At.proofitFeedbackForm},o.createElement(Y.q5,{hideLogo:!0,hideTitle:!0,hideTextBoxTitle:!0,withScore:!0,placeholderText:"How can we improve?",onSubmit:i,showPostSubmitScreen:!1})),o.createElement("div",{className:At.proofitDoneButton},o.createElement(vt.z,{kind:"link",onClick:t},"Done"))),Tt=({proofitVM:e,...t})=>{const i=(0,kt.fW)(),a=o.createElement(ot.F.Fragment,null,(0,I.aj)([e.feature.layoutCreated,e.feature.requestInfo]).pipe((0,_.U)((([t,a])=>t&&a.status===ht.eE.REVIEWING?o.createElement(It,{suggestionsMade:a.suggestionsMade,onAccept:()=>e.onCompleteRequest(i),onFeedbackFormSubmitted:t=>{e.onSubmitFeedback(t),e.onCompleteRequest(i)}}):null))));return t.insideSingleCardAssistant?a:o.createElement(gt,{popActiveView:t.popActiveView,browser:t.browser},a)};var Mt=i(5178),xt=i(22679),Rt=i(53386),Ft=i(47960),Lt=i(53112),Pt=i(80719);const Nt=({feedbackVM:e,entryPoint:t})=>o.createElement(Rt.u,{showDelay:xt.gk,message:"Leave feedback"},o.createElement("div",{className:Pt.feedbackButton,onClick:()=>e.openFeedback(t),"data-grammarly-part":"assistant-feedback-btn"},o.createElement(Ft.A,{color:Lt.Z.blue50}),"Anything we can improve?"));var Bt=i(19106),Ut=i(5872),Dt=i(76547),Vt=i(24258),Ot=i(50034),Ht=i(99446);const Gt=()=>o.createElement("svg",{width:"11",height:"12",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M4 1H2.5C1.39543 1 0.5 1.89543 0.5 3V9C0.5 10.1046 1.39543 11 2.5 11H8.5C9.60457 11 10.5 10.1046 10.5 9V7.5M5.5 6L10.5 1M10.5 1H6.5M10.5 1V5",stroke:"#4A6EE0",strokeLinecap:"round"}));var Wt=i(67563);let jt;function zt(){return void 0===jt&&(jt=!!document.querySelector(".popup"),self.IS_POPUP=jt),jt}i(8375);var qt=i(92783),Kt=i(37896),Zt=i(49708),Xt=i(61055),Jt=i(43398),Qt=i(50783),Yt=i(31542),$t=i(71879),ei=i(47855),ti=i(77757);const ii=e=>(0,ei.Lt)(e)||(0,ti.c)(e)||(e=>e.isGateEnabled(C.K.KnowledgeHubSlack))(e);var ai=i(17939);const ni=/^http(s?)\:\/\/docs\.google\.com\/document/;var si=i(2378),ri=i(28035),oi=i(43903),li=i(49468),ci=i(25234),di=i(82782),ui=i(30287),pi=i(32138),mi=i(24372);const gi=()=>o.createElement("div",{className:di.signUpFooter},o.createElement("div",{className:di.title},"Sign in to get key Grammarly features"),o.createElement("div",{className:di.subtitle},"Access Grammarly's full functionality, including an easy-to-use editing experience and personalized dictionary."),o.createElement(ui.fX,{handleClick:e=>{const t="signup"===e?(0,pi.Xc)("signupHook","toolbarMenu"):(0,pi.s7)();self.open(t),mi.J.gdocsRegisterPromptButtonClick(e)}})),hi=({openWebEditor:e,isDocsDisabled:t})=>o.createElement("div",{className:di.footer},!t&&o.createElement("div",{onClick:()=>{mi.J.newDocumentButtonClick("settingsToolbar"),e(!0)},className:di.footer_btn},o.createElement("div",{className:di.footer_icon_doc},o.createElement(fi,null)),"New Document"),o.createElement("div",{onClick:()=>{mi.J.myGrammarlyButtonClick("settingsToolbar"),e()},className:di.footer_btn},o.createElement("div",{className:di.footer_icon_home},o.createElement(vi,null)),"My Grammarly")),vi=()=>o.createElement("svg",{width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M6.563 21.438v-9.625L14 5.686l7.438 6.125v9.626m-9.625 0v-4.813c0-1.208.979-2.188 2.187-2.188v0c1.208 0 2.188.98 2.188 2.188v4.813",strokeWidth:".875",strokeLinecap:"round",strokeLinejoin:"round"})),fi=()=>o.createElement("svg",{width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M14.438 10.063v8.75m4.374-4.375h-8.75m13.126 0a8.75 8.75 0 1 1-17.5 0 8.75 8.75 0 0 1 17.5 0z",strokeWidth:".875",strokeLinecap:"round",strokeLinejoin:"round"}));var wi=i(82385);const bi=()=>o.createElement("div",{className:wi["footer-ios"]},"Grammarly for Safari helps with spelling, grammar, and punctuation. To get advanced suggestions, use the Grammarly Keyboard.");var Si=i(75675),yi=i(71732);const Ei=e=>{var t;return o.createElement("div",{className:yi["header-ios"]},o.createElement("div",{className:yi.logo},o.createElement("div",{className:yi.mark},o.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M27,16C27,22.075 22.075,27 16,27C9.925,27 5,22.075 5,16C5,9.925 9.925,5 16,5C22.075,5 27,9.925 27,16Z",fill:"rgb(21,195,154)"}),o.createElement("path",{d:"M17.438,18.375C17.503,18.735 17.841,18.982 18.207,18.982L19.36,18.982L20.028,18.888C18.959,20.456 17.103,21.178 15.073,20.86C13.422,20.6 12.003,19.483 11.404,17.922C10.045,14.378 12.633,10.995 16.005,10.995C17.762,10.995 19.303,12.024 20.187,13.266C20.422,13.604 20.887,13.728 21.226,13.494C21.547,13.271 21.641,12.847 21.448,12.515C20.225,10.606 18.029,9.385 15.558,9.551C12.342,9.766 9.74,12.398 9.554,15.616C9.34,19.361 12.31,22.419 16.005,22.419C17.946,22.419 19.683,21.574 20.867,20.206L20.727,20.991L20.727,21.7C20.727,22.065 20.973,22.404 21.333,22.469C21.806,22.554 22.217,22.193 22.217,21.736L22.217,17.491L18.17,17.491C17.713,17.491 17.352,17.903 17.438,18.375Z",fill:"white"}))),o.createElement("div",{className:yi.type},o.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 87 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M1.917,14.95C1.471,14.78 1.179,14.42 1.179,13.941C1.179,13.359 1.659,12.88 2.244,12.88C2.415,12.88 2.552,12.914 2.673,12.965C3.429,13.308 4.235,13.513 5.215,13.513C7.001,13.513 7.842,12.658 7.842,11.014L7.842,10.569C7.069,11.494 6.228,12.058 4.837,12.058C2.69,12.058 0.749,10.501 0.749,7.78L0.749,7.746C0.749,5.007 2.724,3.467 4.837,3.467C6.262,3.467 7.103,4.066 7.807,4.836L7.807,4.819C7.807,4.117 8.391,3.536 9.113,3.536C9.834,3.536 10.417,4.117 10.417,4.836L10.417,10.741C10.417,12.384 10.023,13.582 9.25,14.352C8.391,15.207 7.069,15.584 5.283,15.584C4.064,15.584 2.999,15.379 1.917,14.95ZM7.842,7.78L7.842,7.746C7.842,6.496 6.863,5.623 5.592,5.623C4.322,5.623 3.36,6.496 3.36,7.746L3.36,7.78C3.36,9.046 4.322,9.902 5.592,9.902C6.863,9.902 7.842,9.029 7.842,7.78Z",fill:"rgb(76,76,76)"}),o.createElement("path",{d:"M11.895,4.836C11.895,4.117 12.479,3.536 13.201,3.536C13.922,3.536 14.505,4.117 14.505,4.836L14.505,5.246C14.884,4.357 15.501,3.536 16.275,3.536C17.082,3.536 17.545,4.066 17.545,4.801C17.545,5.486 17.099,5.897 16.567,6.017C15.244,6.325 14.505,7.335 14.505,9.183L14.505,11.613C14.505,12.332 13.922,12.914 13.201,12.914C12.479,12.914 11.895,12.332 11.895,11.613L11.895,4.836Z",fill:"rgb(76,76,76)"}),o.createElement("path",{d:"M17.236,10.176L17.236,10.142C17.236,8.139 18.764,7.215 20.946,7.215C21.873,7.215 22.543,7.369 23.196,7.591L23.196,7.437C23.196,6.359 22.525,5.76 21.221,5.76C20.499,5.76 19.915,5.863 19.417,6.017C19.263,6.068 19.16,6.086 19.04,6.086C18.439,6.086 17.958,5.623 17.958,5.024C17.958,4.562 18.249,4.169 18.662,4.014C19.486,3.706 20.379,3.536 21.598,3.536C23.023,3.536 24.054,3.912 24.706,4.562C25.393,5.246 25.703,6.257 25.703,7.489L25.703,11.664C25.703,12.367 25.136,12.914 24.432,12.914C23.676,12.914 23.178,12.384 23.178,11.836L23.178,11.818C22.543,12.52 21.667,12.982 20.396,12.982C18.662,12.982 17.236,11.99 17.236,10.176ZM23.23,9.577L23.23,9.115C22.783,8.909 22.2,8.772 21.564,8.772C20.447,8.772 19.761,9.217 19.761,10.039L19.761,10.073C19.761,10.775 20.345,11.186 21.186,11.186C22.406,11.186 23.23,10.518 23.23,9.577Z",fill:"rgb(76,76,76)"}),o.createElement("path",{d:"M27.094,4.836C27.094,4.117 27.678,3.536 28.4,3.536C29.121,3.536 29.705,4.117 29.705,4.836L29.705,4.939C30.305,4.169 31.096,3.467 32.418,3.467C33.62,3.467 34.53,3.997 35.011,4.922C35.818,3.981 36.78,3.467 38.033,3.467C39.974,3.467 41.142,4.631 41.142,6.839L41.142,11.613C41.142,12.332 40.558,12.914 39.837,12.914C39.116,12.914 38.531,12.332 38.531,11.613L38.531,7.694C38.531,6.462 37.982,5.829 37.003,5.829C36.024,5.829 35.423,6.462 35.423,7.694L35.423,11.613C35.423,12.332 34.84,12.914 34.118,12.914C33.397,12.914 32.813,12.332 32.813,11.613L32.813,7.694C32.813,6.462 32.264,5.829 31.285,5.829C30.305,5.829 29.705,6.462 29.705,7.694L29.705,11.613C29.705,12.332 29.121,12.914 28.4,12.914C27.678,12.914 27.094,12.332 27.094,11.613L27.094,4.836Z",fill:"rgb(76,76,76)"}),o.createElement("path",{d:"M42.551,4.836C42.551,4.117 43.135,3.536 43.856,3.536C44.578,3.536 45.162,4.117 45.162,4.836L45.162,4.939C45.762,4.169 46.553,3.467 47.875,3.467C49.077,3.467 49.987,3.997 50.468,4.922C51.275,3.981 52.237,3.467 53.49,3.467C55.431,3.467 56.599,4.631 56.599,6.839L56.599,11.613C56.599,12.332 56.015,12.914 55.293,12.914C54.572,12.914 53.988,12.332 53.988,11.613L53.988,7.694C53.988,6.462 53.439,5.829 52.46,5.829C51.481,5.829 50.88,6.462 50.88,7.694L50.88,11.613C50.88,12.332 50.296,12.914 49.575,12.914C48.853,12.914 48.27,12.332 48.27,11.613L48.27,7.694C48.27,6.462 47.72,5.829 46.741,5.829C45.762,5.829 45.162,6.462 45.162,7.694L45.162,11.613C45.162,12.332 44.578,12.914 43.856,12.914C43.135,12.914 42.551,12.332 42.551,11.613L42.551,4.836Z",fill:"rgb(76,76,76)"}),o.createElement("path",{d:"M57.458,10.176L57.458,10.142C57.458,8.139 58.987,7.215 61.167,7.215C62.095,7.215 62.765,7.369 63.417,7.591L63.417,7.437C63.417,6.359 62.748,5.76 61.442,5.76C60.721,5.76 60.137,5.863 59.639,6.017C59.485,6.068 59.382,6.086 59.262,6.086C58.66,6.086 58.179,5.623 58.179,5.024C58.179,4.562 58.472,4.169 58.883,4.014C59.708,3.706 60.601,3.536 61.82,3.536C63.246,3.536 64.276,3.912 64.928,4.562C65.615,5.246 65.924,6.257 65.924,7.489L65.924,11.664C65.924,12.367 65.358,12.914 64.654,12.914C63.898,12.914 63.4,12.384 63.4,11.836L63.4,11.818C62.765,12.52 61.888,12.982 60.618,12.982C58.883,12.982 57.458,11.99 57.458,10.176ZM63.452,9.577L63.452,9.115C63.005,8.909 62.421,8.772 61.786,8.772C60.669,8.772 59.983,9.217 59.983,10.039L59.983,10.073C59.983,10.775 60.566,11.186 61.408,11.186C62.627,11.186 63.452,10.518 63.452,9.577Z",fill:"rgb(76,76,76)"}),o.createElement("path",{d:"M67.316,4.836C67.316,4.117 67.9,3.536 68.621,3.536C69.343,3.536 69.926,4.117 69.926,4.836L69.926,5.246C70.304,4.357 70.922,3.536 71.696,3.536C72.502,3.536 72.966,4.066 72.966,4.801C72.966,5.486 72.519,5.897 71.987,6.017C70.665,6.325 69.926,7.335 69.926,9.183L69.926,11.613C69.926,12.332 69.343,12.914 68.621,12.914C67.9,12.914 67.316,12.332 67.316,11.613L67.316,4.836Z",fill:"rgb(76,76,76)"}),o.createElement("path",{d:"M73.756,1.516C73.756,0.797 74.34,0.215 75.061,0.215C75.783,0.215 76.367,0.797 76.367,1.516L76.367,11.613C76.367,12.332 75.783,12.914 75.061,12.914C74.34,12.914 73.756,12.332 73.756,11.613L73.756,1.516Z",fill:"rgb(76,76,76)"}),o.createElement("path",{d:"M78.445,15.361C78.067,15.225 77.62,14.916 77.62,14.284C77.62,13.65 78.118,13.222 78.651,13.222C78.857,13.222 78.977,13.256 79.08,13.29C79.303,13.359 79.441,13.394 79.63,13.394C80.093,13.394 80.317,13.308 80.557,12.845L80.643,12.64L77.501,5.384C77.432,5.212 77.363,4.956 77.363,4.785C77.363,4.049 77.93,3.536 78.651,3.536C79.303,3.536 79.681,3.895 79.904,4.51L81.897,9.851L83.82,4.528C84.026,3.981 84.403,3.536 85.074,3.536C85.743,3.536 86.31,4.049 86.31,4.734C86.31,4.939 86.241,5.23 86.19,5.35L82.978,13.034C82.206,14.899 81.433,15.601 79.87,15.601C79.286,15.601 78.874,15.516 78.445,15.361Z",fill:"rgb(76,76,76)"})))),o.createElement("a",{className:yi.link,href:null!==(t=e.deeplink)&&void 0!==t?t:(0,qt.Um)().iOSApp,onClick:()=>{mi.J.openAppButtonClick("settingsPopup")}},"Open App"))};var Ci=i(73655);const ki=({actions:e,domain:t})=>o.createElement("div",{className:Ci.wrapper},o.createElement("div",{className:Ci.heading},"Enable Grammarly on ",o.createElement("span",{className:Ci.domain},t),"?"),o.createElement("div",{className:Ci.description},"Grammarly needs access to the text you ",o.createElement("br",null),"write in order to provide suggestions."),o.createElement(vt.z,{kind:"success",onClick:()=>{e.enableOnceClickToRun(),mi.J.clickToRunOptionButtonClick("allow_once")}},"Allow once"),o.createElement(vt.z,{kind:"success",onClick:()=>{e.toggleSite(!0,t,!0),mi.J.clickToRunOptionButtonClick("allow_on_website")}},"Always allow on this website"),o.createElement(vt.z,{kind:"success",onClick:()=>{e.enableClickToRunOnAllSites(),mi.J.clickToRunOptionButtonClick("allow_on_all_websites")}},"Always allow on every website"));var _i=i(88642);const Ai=({heading:e,enabled:t,children:i})=>t?o.createElement(o.Fragment,null,o.createElement("div",{className:_i.heading},e),o.createElement("div",null,i)):o.createElement(o.Fragment,null,i);var Ii=i(72831),Ti=i(22617),Mi=i(90361),xi=i(68365);const Ri=({children:e,blocked:t,wrapperClassName:i,disabledText:a="Sign in to use this feature"})=>t?o.createElement(Rt.u,{message:a,position:"top"},o.createElement("div",{className:i},o.createElement("div",{className:xi.hover_blocker,onClick:Mi.EI,onDoubleClick:Mi.EI},e))):o.createElement(o.Fragment,null,e);class Fi extends o.Component{constructor(){super(...arguments),this.handleChange=e=>{(this.props.skipTrustedCheck||e.isTrusted)&&this.props.onChange(e)}}render(){return o.createElement("div",{...(0,ze.Sh)(this.props.extraClassName,Ti.setting_item,this.props.disabled&&Ti.disabled)},o.createElement("label",{className:(0,Ut.cs)(Ti.select_checkbox,this.props.centered?Ti.centered:void 0),"data-grammarly-part":this.props.dataGrammarlyPart},o.createElement("div",{className:Ti.select_children},this.props.children,this.props.beta&&o.createElement("span",{className:(0,qt.G6)()?Ti.new:Ti.beta}),this.props.alpha&&o.createElement("span",{className:(0,qt.G6)()?Ti.new:Ti.alpha}),this.props.new&&o.createElement("span",{className:Ti.new})),o.createElement(Ri,{wrapperClassName:Ti.checkbox_control_wrapper,blocked:this.props.disabled,disabledText:this.props.disabledText}),o.createElement("input",{className:Ti.checkbox,onChange:this.props.disabled?Mi.EI:this.handleChange,checked:this.props.checked,type:"checkbox"}),o.createElement("div",{...(0,ze.Sh)(Ti.checkbox_check,this.props.grayOut&&Ti.grayOut,this.props.checked?Ti.on:Ti.off)},o.createElement("div",{...(0,ze.Sh)(Ti.on_off)},this.props.checked?"ON":"OFF"),o.createElement("div",{className:Ti.checkbox_check_round}))))}}const Li=e=>{const t="docs.google.com"===e.domain,i=t?"Google Docs":e.domain,a=t&&!(0,qt.Am)(),{enabledInConfig:n,siteSwitcherChecked:s,favicon:r}=e,l=s.checked&&n,c=n?"Check for writing suggestions":"Checking is not supported";return o.createElement(Fi,{grayOut:!n,onChange:e=>s.update(e.target.checked),checked:l,extraClassName:Dt.site_switcher,dataGrammarlyPart:"siteSwitcher",skipTrustedCheck:e.skipTrustedCheck,centered:!!e.centeredToggle},o.createElement("div",{"data-test-attr":"siteControlsLabelText"},c,o.createElement("br",null)," ",o.createElement("span",{...(0,ze.Sh)(Dt.domain,e.centeredToggle&&Dt.centered)},o.createElement("span",{className:Dt.thin_text},"on")," ",r&&o.createElement("span",{className:Dt.favicon},o.createElement("img",{width:"16px",height:"16px",src:r})),i,a&&o.createElement("span",{className:Ti.beta}))))};var Pi=i(76134);const Ni=e=>{var t;const{actions:i,activeTab:a,config:n,settings:s,user:r,siteCategory:l,className:c}=e,{experiments:d}=r,u=e.siteSwitcherChecked||{checked:!!s.enabled,update:e=>{i.toggleSite(e,n.domain),mi.J.checkingToggleClick("toolbar",l,e?"on":"off"),(0,Ee.T)().toggleExtension(e,"toolbar",(0,Ii.FN)(n.domain))}};return o.createElement("div",{className:(0,Ut.cs)(Pi.settingsContent,Pi.fullWidth,c)},o.createElement(Ai,{heading:"SITE SETTINGS"},o.createElement(Li,{domain:n.domain,enabledInConfig:null!==(t=n.enabled)&&void 0!==t&&t,siteSwitcherChecked:u,favicon:null==a?void 0:a.favIconUrl,siteCategory:l,experiments:d,centeredToggle:!0})))};class Bi extends o.Component{constructor(){super(...arguments),this.handleClick=()=>{ja().bgRpc.api.logout(),this.props.close()}}render(){return o.createElement("div",{className:Dt.userPanel},o.createElement("span",{className:Dt.email},this.props.email),"·",o.createElement("span",{className:Dt.link},o.createElement(ut.M,{clickHandler:this.handleClick},"Log out")))}}class Ui{static isEnabled(){return!1}}var Di=i(4120),Vi=i(82785);class Oi extends o.Component{constructor(e){super(e),this._toggleSiteWrap=(e,t,i)=>{const{actions:a,reloadTab:n,gdocsIsActiveTab:s}=this.props;a.toggleSite({enabled:e,domain:t,clickToRunEnabled:i}),s&&n()},this.state={mounted:!1}}get footer(){const{state:e,openWebEditor:t}=this.props;return e.user.anonymous?o.createElement(gi,null):o.createElement(hi,{openWebEditor:t,isDocsDisabled:Di.n5.isDocsDisabled(e.user)})}get settingsContent(){const{state:e,actions:t,openSubscriptionDialog:i,openGBLanding:a,isChrome:n,isSafariIOS:s,isReaderSupported:r,citationBuilderSessionId:l,isCitationBuilderManualInvocationEnabled:c,isKnowledgeHubSupported:d,isIndianEnglishDialectSupported:u,isSerengetiSupported:p}=this.props,m=this.props.gdocsIsActiveTab?Vi.y.gdocs:Vi.y.other;return s?[o.createElement(Ni,{key:"content",className:Dt.settingsContent,actions:{...t,toggleSite:this._toggleSiteWrap},activeTab:e.activeTab,config:e.config,settings:e.settings,user:e.user,dynamicConfig:e.dynamicConfig,siteCategory:m})]:[o.createElement(fn,{key:"content",className:Dt.settingsContent,actions:{...t,toggleSite:this._toggleSiteWrap},activeTab:e.activeTab,config:e.config,settings:e.settings,user:e.user,dapi:e.dapi,dynamicConfig:e.dynamicConfig,siteCategory:m,openSubscriptionDialog:i,openGBLanding:a,openUrl:this.props.openUrl,showGBUpHook:n,placement:"popup",enableRenderingHack:!0,isReaderSupported:r,citationBuilderSessionId:l,isCitationBuilderManualInvocationEnabled:c,isKnowledgeHubSupported:d,isIndianEnglishDialectSupported:u,isSerengetiSupported:p})]}get styleByUserType(){const{user:e}=this.props.state;return Di.n5.doesUserBelongToBusinessInstitution(e)?(0,Ut.cs)(Dt.upgraded,Dt.business):Di.n5.doesUserBelongToEDUInstitution(e)?(0,Ut.cs)(Dt.upgraded,Dt.edu):e.premium?(0,Ut.cs)(Dt.upgraded):(0,Ut.cs)(Dt.free)}render(){const{state:e,close:t,isSafari:i,actions:a,isSafariIOS:n}=this.props;if(Ui.isEnabled()&&!e.settings.enabledClickToRun)return o.createElement(ki,{actions:{...a,toggleSite:this._toggleSiteWrap},domain:e.config.domain});{const a=(0,Ut.cs)(Dt.gr_popup_settings,{[this.styleByUserType]:!n,[Dt.iOS]:n,[Dt.not_supported]:!e.config.enabled,[Dt.has_favicon]:e.activeTab&&!!e.activeTab.favIconUrl}),s=i&&!n;return o.createElement("div",{className:a},o.createElement("div",{className:Dt.content},n?o.createElement(Ei,null):o.createElement(Si.h,{hideDelimiter:s}),s&&o.createElement(Bi,{email:e.user.email,close:t}),o.createElement("div",{"data-grammarly-part":"settings-popup-content",className:(0,Ut.cs)(this.state.mounted?Dt.settingsContentWrapper:void 0,n?Dt.withBackground:void 0)},this.settingsContent),n?o.createElement(bi,null):this.footer))}}componentDidMount(){this.setState({mounted:!0})}}var Hi=i(4278);let Gi;function Wi(){return null!=Gi?Gi:Gi={permissions:["cookies"],origins:[(0,qt.Vi)()]}}var ji=i(46104);function zi({dynamicConfig:e,checkPermissions:t=(()=>async function(e){var t;if(!0!==(null==e?void 0:e.requireAuthCookieAccess))return!0;const i=null===(t=ja().browserApi.permissions)||void 0===t?void 0:t.contains;if(!i)return!0;return await i(Wi())}(e)),requestPermissions:i=(()=>async function(e){var t;if(!0!==(null==e?void 0:e.requireAuthCookieAccess))return!0;const i=null===(t=ja().browserApi.permissions)||void 0===t?void 0:t.request;if(!i)return!0;return await i(Wi())}(e))}={}){const{bindSignIn:a,...n}=(0,ji.z)({checkPermissions:t,requestPermissions:i});return{...n,bindSignIn:a,onSignIn:a((()=>{const e=ja().browserApi;e.beginOAuth?e.beginOAuth():e.openUrl((0,pi.s7)())})),onSignUp:a((()=>{const e=ja().browserApi;e.beginOAuth?e.beginOAuth():e.openUrl((0,pi.Xc)("signupHook","toolbarMenu"))}))}}const qi=({onSignIn:e,onSignUp:t,hideSupplementaryLink:i})=>o.createElement(o.Fragment,null,o.createElement("div",{className:Hi.buttonWrapper},o.createElement("span",{onClick:t,"data-fire":"login-attempt, settings_toolbar_sign_up","data-test-attr":"signUpLink",className:Hi.auth_button,role:"button"},"Sign up")),o.createElement("div",{className:Hi.footer},!i&&o.createElement("div",null,"Already have an account?"," ",o.createElement("span",{onClick:e,"data-fire":"login-attempt, settings_toolbar_sign_in","data-test-attr":"signInLink",className:Hi.signin_link},"Sign in")))),Ki=({onSignIn:e,onSignUp:t,hideSupplementaryLink:i})=>o.createElement(o.Fragment,null,o.createElement("div",{className:Hi.buttonWrapper},o.createElement("span",{onClick:e,"data-fire":"login-attempt, settings_toolbar_sign_in","data-test-attr":"signInLink",className:Hi.auth_button,role:"button"},"Sign in")),o.createElement("div",{className:Hi.footer},!i&&o.createElement("div",null,"Don't have an account?"," ",o.createElement("span",{onClick:t,"data-fire":"login-attempt, settings_toolbar_sign_up","data-test-attr":"signUpLink",className:Hi.signin_link},"Sign up")))),Zi=({onRequestPermissions:e,requestingPermissions:t})=>o.createElement(o.Fragment,null,o.createElement("div",{className:Hi.buttonWrapper},o.createElement("span",{onClick:e,"data-fire":"login-attempt, settings_toolbar_sign_in","data-test-attr":"signInLink",className:Hi.auth_button,role:"button"},"Allow ",o.createElement("span",{className:Hi.secondary_text},"and continue to sign in"))),o.createElement("div",{className:Hi.footer},t?o.createElement(o.Fragment,null,"We are requesting your browser to grant permission."):o.createElement(o.Fragment,null,"Next, your browser will ask you to grant permission."))),Xi=({dynamicConfig:e,...t})=>{const{bindSignIn:i,...a}=zi({dynamicConfig:e});return o.createElement(Ji,{...t,...a})},Ji=e=>{const{loginButtonFirst:t,onSignIn:i,onSignUp:a,needPermissions:n,requestingPermissions:s,onRequestPermissions:r,isSafariIOS:l,isBusiness:c,gnar:d}=e,u=c?o.createElement("div",{className:Hi.gb_banner},"You're signed out of Grammarly Business."):n?null:o.createElement("div",{className:Hi.banner},"Grammarly is active, but key features are missing"),p=n?o.createElement("div",{className:Hi.descr},o.createElement("div",{className:Hi.descr_title},(0,qt.G2)()," requires your permission to let Grammarly sign you in"),o.createElement("div",{className:Hi.descr_text},"Please follow your browser′s prompts to allow Grammarly to read grammarly.com site data.")):c?o.createElement("div",{className:Hi.gb_descr},o.createElement("div",{className:Hi.descr_title},"Sign in to access:"),o.createElement("ul",null,o.createElement("li",null,"Writing suggestions"),o.createElement("li",null,"Style Guide"),o.createElement("li",null,"Brand Tones"),o.createElement("li",null,"Snippets"))):o.createElement("div",{className:Hi.descr},o.createElement("div",{className:Hi.descr_title},"Sign up now to unlock the following:"),o.createElement("ul",null,o.createElement("li",null,"Personal dictionary "),o.createElement("li",null,"Save and access your documents"),o.createElement("li",null,"Get weekly writing statistics and tips"))),m=n?o.createElement(Zi,{requestingPermissions:s,onRequestPermissions:r}):c?o.createElement(Ki,{onSignIn:()=>{d.businessToolBarSigninButtonClick("toolbar"),i()},onSignUp:a,hideSupplementaryLink:!0}):t?o.createElement(Ki,{onSignIn:i,onSignUp:a}):o.createElement(qi,{onSignIn:i,onSignUp:a}),g=(0,Ut.cs)(n?Hi.permission:Hi.signin,{[Hi.iOS]:l});return o.createElement("div",{className:g},o.createElement(Si.h,{hideDelimiter:!0,isBusiness:c}),o.createElement("div",{className:(0,Ut.cs)(Hi.content,{[Hi.business]:c})},u,p,m))};var Qi=i(5503),Yi=i(57271),$i=i(5817);Yi.bL;const ea={"drive.google.com":{title:"Google Drive Not Supported",get message(){return`We hope to support Google Drive apps<br/> in the future, but for now please use your</br> <a class="openGrammarly" href="${(0,qt.Um)().app}">Grammarly Editor</a>.`}},"docs.google.com":{title:"Grammarly Isn't Available for this Google Product",get message(){return`We hope to support this Google product<br/> in the future, but for now please use your</br> <a class="openGrammarly" href="${(0,qt.Um)().app}">Grammarly Editor</a>.`}},"chrome.google.com":{title:"Web Store Not Supported"}},ta=(0,$i.LK)(10),ia=((0,$i.LK)(5),ta);(0,$i.LK)(10),(0,$i.LK)(60),(0,$i.i4)(3),(0,$i.an)(12),(0,$i.an)(1),(0,$i.an)(365);var aa=i(20377);const na=(e="")=>(0,Ut.cs)(aa.line,aa.unsupported_item,e),sa=({domain:e,customTitle:t,customMessage:i})=>{const a=t?o.createElement("span",{dangerouslySetInnerHTML:{__html:(0,at.sanitize)(t)}}):o.createElement("span",null,o.createElement("span",{className:aa.domain},e)," is not supported"),n=i?(0,at.sanitize)(i):`For technical reasons, we currently do not check your text on this website. Please use your <a class="openGrammarly" href="${(0,qt.Um)().app}">Grammarly Editor</a> instead.`;return o.createElement("div",{className:na()},o.createElement("div",{className:aa.warning}),o.createElement("span",{className:aa.unsupported_title},a),o.createElement("div",{dangerouslySetInnerHTML:{__html:n}}))},ra=({domain:e})=>{const t=o.createElement("span",null,"Checking Down on ",o.createElement("span",{className:aa.domain},e));return o.createElement("div",{className:na()},o.createElement("div",{className:aa.warning}),o.createElement("span",{className:aa.unsupported_title},t),o.createElement("div",null,"There appears to be a temporary glitch affecting Grammarly’s performance on ",e,". Functionality should return soon."))},oa=()=>o.createElement("div",{className:na(aa.unsupported_grammarly)},o.createElement("div",{className:aa.ok}),o.createElement("span",{className:aa.unsupported_title},"You Can’t Improve on Perfection"),o.createElement("br",null),o.createElement("span",{className:aa.unsupported_grammarly_text},"Naturally, Grammarly’s browser extension is disabled while you use the Grammarly Editor."));function la({domain:e,temporary:t,grammarlyEditor:i,unsupportedMessage:a}){const n=ea[e];let s;return s=i?"grammarly_editor":n&&n.message||a&&a.message?"custom_message":t?"temporary":"default",s}class ca extends o.PureComponent{componentDidMount(){const{config:{domain:e,temporary:t,grammarlyEditor:i}}=this.props,a=la({domain:e,grammarlyEditor:null!=i&&i,temporary:null!=t&&t});(0,Ee.T)().settingsUsupportedShow(a)}render(){const{config:{domain:e,temporary:t,grammarlyEditor:i,unsupportedMessage:a},isSafariIOS:n}=this.props,s=(0,Ut.cs)(aa.gr_popup_unsupported,{[aa.iOS]:n}),r=function(e,t,i){const a=i||ea[e];switch(t){case"grammarly_editor":return o.createElement(oa,null);case"temporary":return o.createElement(ra,{domain:e});default:return o.createElement(sa,{domain:e,customTitle:a&&a.title,customMessage:a&&a.message})}}(e,la({domain:e,grammarlyEditor:null!=i&&i,temporary:null!=t&&t,unsupportedMessage:a}),a);return o.createElement("div",{className:s},o.createElement("div",{className:(0,Ut.cs)(aa.content,aa.unsupported_site)},n?o.createElement(Ei,null):o.createElement(Si.h,null),r,n?null:o.createElement(hi,{openWebEditor:this.props.openWebEditor,isDocsDisabled:Di.n5.isDocsDisabled(this.props.user)})))}}var da=i(39354),ua=i(87965),pa=i(50663),ma=i(33678),ga=i(72914);class ha extends o.Component{constructor(){super(...arguments),this._sub=[]}componentDidUpdate(){if(this.props.resize(),this.element&&(0,qt.n0)()){const e=(0,da.SL)(),t=this.element.clientHeight,i=this.element.clientWidth;e.setPopupSize&&e.setPopupSize(i,t)}}componentDidMount(){this.props.resize({force:!0}),this._sub.push(Ut.on.call(document,"visibilitychange",(e=>{document.hidden||this.props.resize()})));const{user:e,settings:t}=this.props.state;this._isGdocsPossible()&&(0,ri.M)(e,t)&&ja().bgRpc.api.sendToFocusTab({kind:We.B.Kind.hideGdocsSigninPopupMessage,option:{_tag:si.f0.hide}}),this._sub.push(Ut.on.call((0,Yt.findDOMNode)(this),"click",(e=>{const t=e.target,i="A"===t.nodeName?t:t.parentNode&&"A"===t.parentNode.nodeName?t.parentNode:null;i&&(e.preventDefault(),this.processHrefClick(i))})))}componentWillUnmount(){this._sub.forEach((e=>e.off()))}_gdocsIsActiveTab(){const{activeTab:e}=this.props.state,t=e&&"url"in e?e.url:void 0;return!!t&&ni.test(t)}_isGdocsPossible(){return this._gdocsIsActiveTab()&&!(0,qt.Am)()&&((0,qt.CB)()||(0,qt.pZ)()||(0,qt.G6)())}_isDataControlActive(){return"data_control"===this.props.state.extensionFSM.stage}processHrefClick({href:e,dataset:t}){const i=(0,da.SL)(),{fire:a}=t;if(a){const[e,t]=a.split(", ");if("login-attempt"===e&&("settings_toolbar_sign_up"===t&&mi.J.signUpButtonClick(),"settings_toolbar_sign_in"===t&&mi.J.signInButtonClick(),i.beginOAuth))return i.beginOAuth(),void va()}e&&ba(e)}get settingsPopup(){return o.createElement(Oi,{actions:this.props.actions,state:this.props.state,close:this.props.close,openUrl:this.props.openUrl,openWebEditor:this.props.openWebEditor,openSubscriptionDialog:this.props.openSubscriptionDialog,openGBLanding:this.props.openGBLanding,reloadTab:this.props.reloadTab,gdocsIsActiveTab:this._gdocsIsActiveTab(),isSafari:(0,qt.G6)(),isChrome:(0,qt.i7)(),isSafariIOS:(0,qt.Am)(),isReaderSupported:this.props.getTreatmentRelatedProps().isReaderSupported,isKnowledgeHubSupported:this.props.getTreatmentRelatedProps().isKnowledgeHubSupported,citationBuilderSessionId:this.props.getTreatmentRelatedProps().citationBuilderSessionId,isCitationBuilderManualInvocationEnabled:this.props.getTreatmentRelatedProps().isCitationBuilderManualInvocationEnabled,isIndianEnglishDialectSupported:this.props.getTreatmentRelatedProps().isIndianEnglishDialectSupported,isSerengetiSupported:this.props.getTreatmentRelatedProps().isSerengetiSupported})}render(){const e=this.props,{actions:t,state:i}=e,{user:a,config:n,settings:s,dynamicConfig:r,activeTab:l}=i,{anonymous:c}=a,{enabled:d,servicePage:u}=n,p=this._isDataControlActive()?o.createElement("div",{className:(0,Ut.cs)(Jt.newDataControl,Jt.settings)},o.createElement(Xt.DataControlPopupDefault,{openAcceptPage:ya})):e.getTreatmentRelatedProps().isStandWithUkraine?o.createElement(Qi.I,{trackPopupShow:()=>{mi.J.standWithUkraineSuspendSettingsPopupShow()},onLearnMore:()=>{var e;(0,$t.RU)(null===(e=r.standWithUkraineGrammarlySuspendedPopup)||void 0===e?void 0:e.popupLearnMoreButtonLink),mi.J.standWithUkraineSuspendLearnMoreButtonClick()},popupDynamicConfig:r.standWithUkraineGrammarlySuspendedPopup}):a.edc&&Di.n5.isEdcBlocked(a)?o.createElement(Qt.w,{institutionName:a.edc.institutionName,ssoUrl:a.edc.ssoUrl}):this._gdocsIsActiveTab()?this._isGdocsPossible()&&d?c?o.createElement(si.b_,{openSigninPage:e=>{const t=(0,da.SL)();t.beginOAuth?t.beginOAuth():self.open(e)},onClick:t.gdocsOptedIn}):this.settingsPopup:o.createElement(ca,{activeTab:l,user:a,config:n,isSafariIOS:(0,qt.Am)(),openWebEditor:e.openWebEditor}):(0,qt.Am)()||!c||Ui.isEnabled()&&!s.enabledClickToRun?d||u?this.settingsPopup:o.createElement(ca,{activeTab:l,user:a,config:n,isSafariIOS:(0,qt.Am)(),openWebEditor:e.openWebEditor}):o.createElement(Xi,{dynamicConfig:r,loginButtonFirst:!0===s.showLoginReminder,isSafariIOS:(0,qt.Am)(),gnar:mi.J,isBusiness:s.authenticatedUserWasBusinessAccount&&this.props.getTreatmentRelatedProps().isGBSigninEnabled}),m=a.edc;return o.createElement(li.o,{ref:e=>this.element=e,"data-grammarly-part":"settingsPopup"},p,m&&o.createElement(ci.N,{...m}))}}function va(){const e=(0,da.SL)();e.closePopup?e.closePopup():(0,Ut.ZT)("close-popup")}function fa({force:e}={}){(0,Ut.ZT)("update-window-size",{force:e})}function wa(){ja().bgRpc.api.sendToFocusTab({kind:We.B.Kind.reloadTab}),va()}function ba(e){(0,da.SL)().openUrl(e),va()}function Sa(e){ba(e?(0,qt.Um)().newDoc:(0,qt.Um)().app)}function ya(){ja().bgRpc.api.openDataControl()}function Ea(e){(0,da.SL)().openPopupSubscriptionDialog(e),va()}function Ca(e){mi.J.getGBButtonClick("gbExtUphookPopup","ExploreGrammarlyBusiness");ba((0,pi.Z4)(e,"gbExtensionSettingsToolbar"))}function ka(e,t,i){return t&&i&&e.isGateEnabled(C.K.GrammarlyBusinessLoggedOutUser)}var _a=i(60415),Aa=i(90605),Ia=i(12126);function Ta(e,t){var i;const a=e[t],n=null===(i=null==a?void 0:a.enabled)||void 0===i||i;return{...e.common,...a,enabled:n}}var Ma=i(33376),xa=i(42352),Ra=i(87918),Fa=i(54259);const La=l.Y.create("universal.popup");let Pa=!1;function Na(){let e=!1;(0,Ut.cn)(document.documentElement,"gr-"+(0,qt.qs)()),(0,qt.ED)()&&(0,Ut.cn)(document.documentElement,"windows"),(0,qt.n0)()&&(0,Ut.cn)(document.body,"gr-safari"),(0,qt.Am)()&&(0,Ut.cn)(document.body,"gr-safari-ios");const{enableHistoryLoggerInProd:t,bgRpc:i,browserApi:{preferences:a}}=ja(),n=new Ra.h(a),s=(r=i,n.view().pipe(me.w((e=>{var t;const i=null!==(t=e.activeTab)&&void 0!==t?t:_a.pN,a=(0,Yi.KK)(i.url);return Ia.D((async()=>({pageConfig:await r.api.getPageConfig(a,i.url)}))()).pipe(_.U((({pageConfig:t})=>{var n,s,r,o,l,c;const d=null!==(n=e.extensionSettings)&&void 0!==n?n:_a.he;return{user:null!==(s=e.user)&&void 0!==s?s:Di.n5.defaultUser,tabs:{active:i},dynamicConfig:null!==(r=e.dynamicConfig)&&void 0!==r?r:Aa.cS,config:{...t,domain:a},settings:Ta(d,a),dapi:null!==(o=e.dapi)&&void 0!==o?o:{},connection:null!==(l=e.connection)&&void 0!==l?l:{},activeTab:i,extensionFSM:null!==(c=e.extensionFSM)&&void 0!==c?c:_a.uS}})))}))));var r;const l=(0,Fa.q)(n),c=(0,xa.M2)(i),d=(0,Ma.z)(i);n.view("extensionSettings").view((e=>null==e?void 0:e.common.historyLoggerEnabled)).subscribe((e=>{t(e)}));const u=s.subscribe((t=>{e||c.fetchTreatments().finally((()=>{e=!0,function(e,t,i,a){La.warn("RENDER FROM",{currentState:e,actions:i}),function(e,t,i){const a=new za;(0,Yt.render)(o.createElement(oi.mM,{config:e.pipe(_.U((e=>e.settings.grammarlyThemeConfig)))},(n=>o.createElement(oi.fm,{config:n,experimentClient:i},o.createElement(ma.a.Context.Provider,{value:a},o.createElement(ua.p,null,o.createElement(ot.F.Fragment,null,e.pipe(_.U((e=>o.createElement(ha,{state:e,actions:t,close:va,resize:fa,openUrl:ba,openWebEditor:Sa,openSubscriptionDialog:Ea,openGBLanding:Ca,reloadTab:wa,getTreatmentRelatedProps:()=>({isReaderSupported:(0,ai.Jr)(e.config.domain,ja().config.bundleInfo.browser,e.dynamicConfig,i)===ai.gt.full,isKnowledgeHubSupported:ii(i),isGBSigninEnabled:ka(i,e.user.anonymous,!!e.settings.authenticatedUserWasBusinessAccount),isStandWithUkraine:i.isGateEnabled(C.K.StandWithUkraineGrammarlySuspended),citationBuilderSessionId:(0,Ot.Td)(e.config.domain,e.dynamicConfig,i.isGateEnabled(C.K.CitationBuilderManualInvocation),e.settings)?(0,Ot.Cr)():void 0,isCitationBuilderManualInvocationEnabled:i.isGateEnabled(C.K.CitationBuilderManualInvocation),isIndianEnglishDialectSupported:i.isGateEnabled(C.K.IndianEnglishDialect)||i.isGateEnabled(C.K.IndianEnglishDialectInternal),isSerengetiSupported:ga.o.isSerengetiSupported(i,e.user,e.dynamicConfig,ja().config.bundleInfo.browser)})}))))),o.createElement(pa.G,null)))))),document.querySelector(".popup"))}(t,i,a),document.hidden||Ba(e);if(Ua)return;Ua=!0,(0,Zt.R)(self,"keyup").pipe(Z.M(t)).subscribe((([e,t])=>{["Semicolon","KeyD"].includes(e.code)&&e.altKey&&e.shiftKey&&e.ctrlKey&&ja().bgRpc.api.toggleDebugMenu(!t.settings.isDebugMenuVisible)})),(0,qt.n0)()&&document.addEventListener("visibilitychange",(()=>{document.hidden||(Ba(e),ja().message.sendBackground("tab-connected",{tab:"popup"}))}))}(t,s,{...l.quickSettings,...l.gdocs,...l.reader,...l.settings,...l.tabs,...d},c)}))}));ja().message.sendBackground("tab-connected",{tab:"popup"}),(0,Kt.Zk)((()=>{e||(Pa?(0,Ee.T)().settingsPopupTimeout():(Pa=!0,u.unsubscribe(),Na()))}),2e3)}function Ba(e){const{config:t,user:i,settings:a}=e,{enabled:n}=t,s=!1===a.enabledClickToRun?"click_to_run":n?"supported":"unsupported";mi.J.toolbarButtonClick("browser",s),i.anonymous}let Ua=!1;var Da,Va=i(3855),Oa=i(37096),Ha=i(32510),Ga=i(60113);class Wa extends Va.O{static getInstance(){if(void 0===this._instance)throw new Error("Env not inited yet");return this._instance}static get isInited(){return void 0!==this._instance}static init(e){if(void 0!==this._instance)throw new Error("Env already inited");const t=new Wa(e);if(this._instance=t,Va.O.initShared(t),!zt)throw new Error("Not a popup");Na()}constructor(e){super({browser:e.browser,extensionType:e.extensionType,deploymentType:e.deploymentType,context:"popup",historyLoggerExtraArgs:{maxEventsToStore:100}}),(0,Oa.wp)(),this.browserApi=e.browserApi,this.message=new Ha.w(e.browserApi.message),(0,da.AD)(e.browserApi),this.bgRpc=new Wt.c(this.message),this.telemetryCallProvider=(0,Ga._)(this.bgRpc)}}function ja(){return Wa.getInstance()}!function(e){e.Flag=ma.a.Flag}(Da||(Da={}));class za{constructor(){this._flags=new Set,this.actions={openUrl:()=>{throw new Error("Not implemented")},openPopup:()=>{throw new Error("Not implemented")}}}has(e){return this._flags.has(e)}}var qa=i(50756);const Ka=({showTitle:e,showBackground:t,openGBLanding:i})=>o.createElement("div",{...(0,ze.Sh)(qa.container,t?qa.containerWithBackground:null)},o.createElement("div",{className:qa.content},e&&o.createElement("div",{className:qa.title},"Grammarly for your team"),o.createElement("div",null,"Help your team make your business look great with top-notch writing."),o.createElement(vt.z,{size:"medium",onClick:()=>{i((0,qt.Um)().businessHomepage),(0,Ee.T)().gGbUpHookClick()},className:qa.button},"Explore Grammarly Business")));class Za extends o.Component{constructor(){super(...arguments),this.onEnableDefsClick=e=>{const{toggleDefs:t}=this.props,i=e.target.checked;t(i),mi.J.definitionToggleClick(i?"on":"off"),(0,Ee.T)().toggleExtensionDefs(i)}}render(){const{enabledDefs:e,disabled:t}=this.props;return o.createElement(Fi,{onChange:this.onEnableDefsClick,checked:e,extraClassName:Dt.def_switcher,dataGrammarlyPart:"definitionAndSynonymsSwitcher",disabled:t,skipTrustedCheck:this.props.skipTrustedCheck},"Show definitions and synonyms ",o.createElement("br",null),"via double clicks (all sites)")}}var Xa=i(1731),Ja=i(90083);const Qa=()=>o.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M13.9207 15L15.5 17.2562L17.0793 15H13.9207Z",stroke:"#6D758D",strokeWidth:"2"}));var Ya=i(42210),$a=i(80162);const en={american:o.createElement((()=>o.createElement("div",{className:Ja.american,role:"presentation"})),null),australian:o.createElement((()=>o.createElement("div",{className:Ja.australian,role:"presentation"})),null),british:o.createElement((()=>o.createElement("div",{className:Ja.british,role:"presentation"})),null),canadian:o.createElement((()=>o.createElement("div",{className:Ja.canadian,role:"presentation"})),null),indian:o.createElement((()=>o.createElement("div",{className:Ja.indian,role:"presentation"})),null)},tn=e=>{return o.createElement(o.Fragment,null,en[e.dialect],o.createElement("span",{"data-test-attr":`dialect_${e.dialect}`,className:$a.label},(t=e.dialect).charAt(0).toUpperCase()+t.slice(1)+" English"));var t};class an extends o.Component{render(){const e=this.props.dropdownOnTop?{customPosition:{top:`-${32*(this.props.dialects.length-1)+4}px`,left:"0"},vAlign:"top"}:{customPosition:{top:"36px",left:"0"}};return o.createElement(Ya.L,{...e,showDelay:0,closeDelay:150,appearanceBehavior:"mouseClick",name:"dialect",label:o.createElement(je.zx.White,{name:"dialect.box",style:{padding:"0"}},o.createElement("div",{className:$a.selected},o.createElement(tn,{dialect:this.props.dialect}),o.createElement(Qa,null)))},this.props.dialects.filter((e=>e!==this.props.dialect)).map((e=>o.createElement(je.zx.Flat,{name:e,key:e,onClick:t=>(null==t?void 0:t.isTrusted)&&this.props.onSetDialect(e)},o.createElement("div",{className:$a.option},o.createElement(tn,{dialect:e}))))))}}class nn extends o.Component{constructor(){super(...arguments),this.setDialect=e=>{const{changeStrongDialect:t,dialectWeak:i}=this.props;t(e);const a=e+"English";mi.J.languageSettingUpdate(a,"user",i&&e===i)}}render(){const e=this.props.dialectStrong||this.props.dialectWeak||"american";return o.createElement("div",{...(0,ze.Sh)(Xa.line,this.props.disabled&&Xa.disabled)},o.createElement("div",null,"I write in"),o.createElement(Ri,{blocked:this.props.disabled},o.createElement("div",{className:Xa.dialectPicker},o.createElement(an,{dialect:e,dialects:this.props.dialects,onSetDialect:this.setDialect,dropdownOnTop:!!this.props.dropdownOnTop}))))}}var sn=i(63089);const rn=o.createContext({}),on=e=>{const t=o.useContext(rn),{registrationDate:i}=e.user,a=(0,Kt.p6)(i);return o.useEffect((()=>{mi.J.getPremiumButtonShow(e.isAssistant?"assistantSettings":"settingsToolbar","GoPremiumToEnableAdvancedFixes",void 0,void 0,void 0,"extensionSettings",e.isAssistant?"assistantSettingsPopup":"browserToolbar"),(0,Ee.T)().upgradeHooks.showUpgradeHook("extensionSettings",e.isAssistant?"assistantSettingsPopup":"browserToolbar")}),[]),o.createElement("div",{className:sn.line},o.createElement("div",{className:sn.content},a&&o.createElement("div",{"data-test-attr":"checked_since"},"Grammarly has been correcting your text since ",a,"."),o.createElement("div",{"data-grammarly-part":"settings-upgrade-button",className:sn.upgrade,onClick:()=>{e.openSubscriptionDialog({utmSource:"upHook",utmCampaign:"extensionSettingsToolbar"}),mi.J.getPremiumButtonClick(e.isAssistant?"assistantSettings":"settingsToolbar","GoPremiumToEnableAdvancedFixes",void 0,void 0,void 0,"extensionSettings",e.isAssistant?"assistantSettingsPopup":"browserToolbar"),(0,Ee.T)().upgradeHooks.clickUpgradeHook("extensionSettings",e.isAssistant?"assistantSettingsPopup":"browserToolbar"),(0,Ee.T)().userUpgradeClick("settingsToolbar")},style:{fontSize:t.ctaFontSize}},"Go Premium to Enable Advanced Fixes")))},ln=e=>o.createElement(Fi,{onChange:t=>{e.toggle(t.target.checked)},checked:e.enabled,extraClassName:Dt.def_switcher},"Correct spelling automatically"),cn=e=>o.createElement(Fi,{checked:!e.enabled,extraClassName:Dt.def_switcher,onChange:t=>{e.toggle(!t.target.checked)},dataGrammarlyPart:"disableDesktopIntegrationToggle"},o.createElement("div",{className:Dt.llamaTitle},"Check text with browser extension"),e.enabled&&o.createElement("div",{className:Dt.llamaDescription},"Grammarly's browser extension was deactivated since you're using Grammarly's desktop application.")),dn=e=>o.createElement(Fi,{onChange:t=>{e.toggle(t.target.checked)},beta:!0,checked:e.enabled,extraClassName:Dt.def_switcher},"Show phrasal predictions"),un=e=>o.createElement(Fi,{onChange:t=>{e.toggle(t.target.checked)},checked:e.enabled,extraClassName:Dt.def_switcher,dataGrammarlyPart:"settings-toggle-show-emoji-for-detected-tones"},"Show emoji for detected tones"),pn=e=>o.createElement(Fi,{onChange:t=>{e.toggle(t.target.checked)},checked:e.enabled,extraClassName:Dt.def_switcher,dataGrammarlyPart:"settings-toggle-include-serengeti-context"},"Use organizational context in GrammarlyGO"),mn=e=>o.createElement(Fi,{onChange:t=>{e.toggle(t.target.checked)},beta:!0,checked:e.enabled,extraClassName:Dt.def_switcher},"Show email recaps"),gn=e=>o.createElement(Fi,{onChange:t=>{e.toggle(t.target.checked)},beta:!0,checked:e.enabled,extraClassName:Dt.def_switcher},"Show Knowledge Hub"),hn=e=>o.createElement(Fi,{onChange:t=>{e.toggle(t.target.checked)},new:!0,checked:e.enabled,extraClassName:Dt.def_switcher},"Show “Get citation” button on ",o.createElement("br",null),e.domain),vn=e=>o.createElement(o.Fragment,null,o.createElement("div",{className:Pi.separator}),o.createElement("div",{className:Pi.debugMenu},o.createElement("div",{className:Pi.heading},o.createElement("div",null,"Debug Menu"),o.createElement(vt.z,{kind:"transparent",onClick:()=>{ja().bgRpc.api.toggleDebugMenu(!1)}},o.createElement("span",null,"Hide"))),o.createElement(Fi,{onChange:e=>{e.target.checked?ja().bgRpc.api.enableHistoryLoggerUntil(-1):ja().bgRpc.api.disableHistoryLogger()},checked:e.isEnabled,extraClassName:Dt.def_switcher},"Logging"),o.createElement("div",{className:Pi.separator}),o.createElement(Fi,{onChange:e=>{e.target.checked?ja().bgRpc.api.enableAdvancedHistoryLoggerUntil(Date.now()+36e5):ja().bgRpc.api.disableAdvancedHistoryLogger()},checked:e.isAdvancedEnabled,extraClassName:Dt.def_switcher,disabled:!e.isEnabled,disabledText:"Enable logging first"},"Advanced Logging"," ",e.isAdvancedEnabled&&e.advancedHistoryLoggerEnabledUntil&&o.createElement("span",{className:Pi.timer},Math.ceil((e.advancedHistoryLoggerEnabledUntil-Date.now())/6e4)," mins left")),o.createElement("div",{className:Pi.separator}),o.createElement(vt.z,{className:Pi.downloadBtn,kind:"transparent",disabled:!e.isEnabled,onClick:()=>{ja().bgRpc.api.sendToFocusTab({kind:We.B.Kind.downloadLogs})}},o.createElement("span",null,"Download Logs")))),fn=e=>{var t,i,a,n;const{actions:s,activeTab:r,config:l,settings:c,dapi:d,user:u,siteCategory:p,openSubscriptionDialog:m,openGBLanding:g,showGBUpHook:h,placement:v,dynamicConfig:f,enableRenderingHack:w=!1,isReaderSupported:b=!1,showCitationBuilderToggle:S=!0,citationBuilderSessionId:y,isCitationBuilderManualInvocationEnabled:E=!1,isKnowledgeHubSupported:C=!1,isIndianEnglishDialectSupported:k=!1,isSerengetiSupported:_=!1,className:A}=e;w&&o.useEffect((()=>{(0,qt.CB)()&&(self.screenLeft<0||self.screenTop<0||self.screenLeft>self.screen.width||self.screenTop>self.screen.height)&&chrome.runtime.getPlatformInfo((e=>{if("mac"===e.os){const e=new CSSStyleSheet;e.insertRule("\n            @keyframes redraw {\n              0% {\n                opacity: 1;\n              }\n              100% {\n                opacity: .99;\n              }\n            }\n          "),e.insertRule("\n            html {\n              animation: redraw 1s linear infinite;\n            }\n          "),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}))}),[]);const{premium:I,experiments:T,anonymous:M}=u,x=h&&I&&!Di.n5.doesUserBelongToInstitution(u),R=I||M,F=["british","american","australian","canadian",...k?["indian"]:[]],L=e.siteSwitcherChecked||{checked:!!c.enabled,update:t=>{const{siteCategory:i}=e;s.toggleSite(t,l.domain),mi.J.checkingToggleClick("toolbar",i,t?"on":"off"),(0,Ee.T)().toggleExtension(t,"toolbar",(0,Ii.FN)(l.domain))}},P=o.useCallback((e=>{const t=r&&new URL(r.url).pathname;s.toggleCitationBuilderForDomain({domain:l.domain,enabled:e,pathName:t,inAllowList:r&&(0,Ot.eC)(new URL(r.url),f)}),e||mi.J.citePopupButtonDisable(l.domain,"permanent",y||"","toolbar",E&&!0===(0,Ot.gO)(l.domain,c))}),[null==r?void 0:r.url,l.domain,y]);return o.createElement("div",{className:(0,Ut.cs)(Pi.settingsContent,A),"data-grammarly-part":"settings"},o.createElement("div",{className:Pi.heading},o.createElement("div",null,"Quick Settings"),o.createElement(vt.z,{kind:"link",onClick:()=>{e.openUrl((0,qt.Um)().allSettings),mi.J.allSettingsButtonClick(v)}},o.createElement("div",{className:Pi.allSettings},o.createElement("span",null,"All Settings"),o.createElement(Gt,null)))),Ht.q.showSettingPopupToggle(d,c,f,null==r?void 0:r.url)&&o.createElement(o.Fragment,null,o.createElement(cn,{toggle:e=>{s.setDesktopIntegration(e),mi.J.desktopIntegrationToggleClick(e?"on":"off")},enabled:c.isDesktopIntegrationEnabled}),o.createElement("div",{className:Pi.separator})),o.createElement(Li,{domain:l.domain,enabledInConfig:null!==(t=l.enabled)&&void 0!==t&&t,siteSwitcherChecked:L,favicon:null==r?void 0:r.favIconUrl,siteCategory:p,experiments:T}),o.createElement("div",{className:Pi.separator}),S&&(0,Ot.r4)(l.domain,f,E)&&o.createElement(o.Fragment,null,o.createElement(hn,{enabled:(0,Ot.Td)(l.domain,f,E,c),domain:l.domain,toggle:P}),o.createElement("div",{className:Pi.separator})),C&&o.createElement(o.Fragment,null,o.createElement(gn,{enabled:null===(a=null===(i=c.knowledgeHubSettings)||void 0===i?void 0:i.enabled)||void 0===a||a,toggle:e=>{s.toggleKnowledgeHub(e),mi.J.knowledgeHubFeatureToggleClick("popup",Vt.JJ.fromDomain(l.domain),e?"on":"off")}}),o.createElement("div",{className:Pi.separator})),o.createElement(Za,{disabled:M,enabledDefs:c.enabledDefs,toggleDefs:s.toggleDefs}),o.createElement("div",{className:Pi.separator}),o.createElement(ln,{enabled:c.autocorrectEnabled||!1,toggle:e=>{s.toggleAutocorrect(e),mi.J.autocorrectToggleClick(e?"on":"off")}}),o.createElement("div",{className:Pi.separator}),o.createElement(dn,{enabled:c.autocompleteEnabled||!1,toggle:e=>{s.toggleAutocomplete(e),mi.J.autocompleteFeatureToggleClick("popup",e?"on":"off")}}),o.createElement("div",{className:Pi.separator}),o.createElement(un,{enabled:"hide"!==d.emogenieEmojiState,toggle:e=>{s.setEmogenieEmojiState(!0===e?"show":"hide"),mi.J.settingsShowEmojiForDetectedTonesToggleClick(l.domain,!0===e?"on":"off")}}),_&&o.createElement(o.Fragment,null,o.createElement("div",{className:Pi.separator}),o.createElement(pn,{enabled:"enabled"===d.serengetiState,toggle:e=>{s.setSerengetiState(!0===e?"enabled":"disabled")}})),b&&o.createElement(o.Fragment,null,o.createElement("div",{className:Pi.separator}),o.createElement(mn,{enabled:!1!==(null===(n=c.readerV1)||void 0===n?void 0:n.enabled),toggle:e=>{s.readerToggleFeature({enabled:e}),mi.J.readerV1FeatureToggleClick(e?"on":"off")}})),o.createElement("div",{className:Pi.separator}),o.createElement(nn,{dialects:F,changeStrongDialect:s.changeStrongDialect,dialectStrong:d.dialectStrong,dialectWeak:d.dialectWeak,dropdownOnTop:R,disabled:M}),!R&&o.createElement(on,{user:u,openSubscriptionDialog:m,isAssistant:"assistant"===v}),x&&o.createElement(Ka,{openGBLanding:g,showTitle:"popup"===v,showBackground:"popup"===v}),c.isDebugMenuVisible&&o.createElement(vn,{isAdvancedEnabled:c.advancedHistoryLoggerEnabled,isEnabled:c.historyLoggerEnabled,advancedHistoryLoggerEnabledUntil:c.advancedHistoryLoggerEnabledUntil}))};var wn=i(89433);const bn=({assistantSettingsViewModel:e,upgradeViewModel:t,experimentClient:i,assistantFeedbackViewModel:a,onClose:n,children:s})=>{const{domain:r,actions:l,state:c}=e,[d,u]=o.useState(!!c.view("page","enabled").get()),p={checked:d,update:u};return s({content:o.createElement(ot.F.Fragment,null,c.view((({user:e,page:a,dynamicConfig:n,dapi:s})=>o.createElement(rn.Provider,{value:{ctaFontSize:13}},o.createElement(fn,{actions:l,config:{enabled:!0,domain:r},settings:a,user:e,dapi:s,dynamicConfig:n,siteCategory:Vi.y.other,openSubscriptionDialog:()=>t.openUpgradeUrl(ye.L.Place.extensionSettingsAssistant),openGBLanding:e=>{const t=(0,pi.Z4)(e,"gbExtensionSettingsAssistant");self.open(t),Bt.J.getGBButtonClick("gbExtAssistantSettings","ExploreGrammarlyBusiness")},openUrl:e=>self.open(e),showGBUpHook:(0,qt.i7)(),placement:"assistant",showCitationBuilderToggle:!1,siteSwitcherChecked:p,isIndianEnglishDialectSupported:i.isGateEnabled(C.K.IndianEnglishDialect)||i.isGateEnabled(C.K.IndianEnglishDialectInternal)})))),a?o.createElement(Nt,{feedbackVM:a,entryPoint:Mt.Q.settings}):null),onDone:()=>{l.toggleSite(d,r),Bt.J.checkingToggleClick("assistant",Vi.y.other,d?"on":"off"),(0,Ee.T)().toggleExtension(d,"assistant",(0,Ii.FN)(r)),null==n||n()}})},Sn=({viewModels:e,experimentClient:t})=>o.createElement(bn,{onClose:()=>e.assistantLayoutViewModel.popActiveView(),assistantSettingsViewModel:e.assistantSettingsViewModel,upgradeViewModel:e.upgradeViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,experimentClient:t},(({content:t,onDone:i})=>o.createElement(pt,{dataPartName:"settings-view-overlay",popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),panelClassName:wn.settingsViewOverlayPanel,contentClassName:wn.settingsViewOverlayContent,footer:o.createElement(vt.z,{className:wn.settingsViewDoneButton,kind:"success",type:"submit",onClick:i},"Done")},t)));var yn=i(80895),En=i(86133),Cn=i(64826);const kn=({message:e,children:t,placement:i,size:a,hideAfter:n,onClose:s,dataGrammarlyPart:r="ui-kit-popover-notification"})=>{const[l,c]=o.useState(!1);return o.useEffect((()=>{let e;return n>0&&(c(!0),e=self.setTimeout((()=>{c(!1),null==s||s()}),n)),()=>{e&&self.clearTimeout(e)}}),[n]),o.createElement(En.J,{dataGrammarlyPart:r,isOutsideReferenceElement:!1,headerContent:o.createElement("div",{className:Cn.popoverNotificationMessage},e),mainContent:null,show:l,placement:i,size:a,onClose:()=>{c(!1),null==s||s()},showArrow:!1,includeMainContentPadding:!1},t)};var _n=i(79921),An=i(64229),In=i(3860),Tn=i(63513),Mn=i(31278),xn=i(18568);const Rn=({emotion:e,isBrandTonesEnabled:t,index:i,onFeedback:a})=>{const[n,s]=o.useState(0),r=o.createElement(Rt.u,{message:`${e.prevalence} intensity`,showDelay:300},o.createElement("div",{className:xn.emogenieReportItemEmotionIntensity},[0,1,2,3,4].map((t=>{const i=t/5<=e.confidence;return o.createElement("div",{key:`${e.name}-intensity-${t}`,...(0,ze.Sh)(xn.emogenieReportItemEmotionIntensityDot,i&&xn.emogenieReportItemEmotionIntensityDotActive)})})))),l=o.createElement(Rt.u,{message:e.brandToneDescription,showDelay:300},o.createElement("div",null,o.createElement(Mn.JO.Info,{width:10,className:"off"===e.brandToneLabel?xn.emogenieBrandToneInfoIconOff:xn.emogenieBrandToneInfoIconOn}))),c=o.createElement(yn.C,{title:o.createElement(o.Fragment,null,e.brandToneLabel,"-BRAND ",l),kind:"off"===e.brandToneLabel?"error":"primary"}),d=e.brandToneLabel?c:r;return o.createElement(ot.F.div,{...(0,ze.Sh)(xn.emogenieReportItem,t?xn.emogenieReportItemBrandTone:null),"data-grammarly-part":"tone-detector-emotion","data-tone-detector-emotion-name":e.name},o.createElement("div",{role:`emotion-${i}-${e.name}`},o.createElement("div",{className:xn.emogenieReportItemEmotion},o.createElement("div",{className:xn.emogenieReportItemEmotionEmojiAndNameContainer},o.createElement(kn,{dataGrammarlyPart:"tone-detector-emotion-feedback-notification",message:"Thank you for the feedback!",hideAfter:n,placement:"right",onClose:()=>s(0),size:"medium"},o.createElement("div",{className:xn.emogenieReportItemEmotionEmojiAndName},o.createElement(_n.dy,{size:"small-medium",unicodeHexArray:[e.emojiId],unicodeLiteral:e.emoji,className:xn.emogenieReportItemEmotionEmoji}),o.createElement("span",{className:xn.emogenieReportItemEmotionName},e.name)))),o.createElement("div",{className:xn.emogenieReportItemEmotionBadgeOrIntensity},d),o.createElement(An.m,{dataGrammarlyPart:"tone-detector-emotion-actions-menu",ariaMenuId:`${e.name}-emotion-actions-menu`,ariaMenuLabel:`${e.name} Emotion Actions Menu`,sections:[{title:"Help us improve",items:[{id:"tone-detector-emotion-actions-menu-item-like",icon:o.createElement("div",{className:xn.emogenieReportItemEmootionActionsMenuThumsUpIcon}),label:"Tone seems correct",onClick:()=>{a({emotionName:e.name,feedbackType:Tn.y_.EMOTION_LIKE}),s(1200)}},{id:"tone-detector-emotion-actions-menu-item-dislike",icon:o.createElement("div",{className:xn.emogenieReportItemEmootionActionsMenuThumsDownIcon}),label:"Tone seems incorrect",onClick:()=>{a({emotionName:e.name,feedbackType:Tn.y_.EMOTION_DISLIKE}),s(1200)}}]}],size:"medium",placement:"left"},o.createElement(In.h,{dataGrammarlyPart:"tone-detector-emotion-actions-menu-button",className:xn.emogenieReportItemEmotionActionsMenuButton},o.createElement("div",{className:xn.emogenieReportItemEmotionActionsMenuIcon}))))))};var Fn=i(50307);const Ln=({emotions:e,isBrandTonesEnabled:t,toneSuggestionInfo:i,onMount:a,onReportEmotionFeedback:n,...s})=>{let r;switch(o.useEffect(a,[]),!0){case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel&&e.confidence>.75)):r="Your tone may sound off to readers";break;case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel)):r="Something sounds slightly off...";break;case e.some((e=>e.brandToneLabel&&"on"===e.brandToneLabel)):r=t?"You're on-brand! Great job!":"Your writing sounds clear and aligned. Great job!";break;default:r="How this may sound to readers:"}return o.createElement("div",{className:Fn.emogenieReport,"data-grammarly-part":"tone-detector"},o.createElement("div",{className:Fn.emogenieReportHeader},o.createElement("div",{className:Fn.emogenieReportHeaderTitle},r),s.showBetaLabel?o.createElement(mt.v,{browser:s.browser}):null),o.createElement("div",{className:Fn.emogenieReportItems,"data-grammarly-part":"tone-detector-emotions"},e.map(((e,i)=>o.createElement(Rn,{key:e.name,index:i,emotion:e,isBrandTonesEnabled:t,onFeedback:n})))),i?o.createElement(Pn,{...i}):null)},Pn=({onMount:e,emojiId:t,emojiLiteral:i,iconId:a,title:n,onClickCta:s,ctaText:r})=>(o.useEffect(e,[]),o.createElement("div",{className:Fn.emogenieReportToneSuggestionInfo},o.createElement("div",{className:Fn.emogenieReportToneSuggestionInfoEmojiAndTitle},t?o.createElement(_n.dy,{size:"small-medium",unicodeHexArray:[t],unicodeLiteral:null,className:Fn.emogenieReportToneSuggestionInfoEmoji}):i?o.createElement(_n.dy,{size:"small-medium",unicodeHexArray:null,unicodeLiteral:i,className:Fn.emogenieReportToneSuggestionInfoEmoji}):a?o.createElement("img",{alt:a,src:`https://assets.grammarly.com/icons/v1/${a}.svg`,style:{width:20,height:20},className:Fn.emogenieReportToneSuggestionInfoEmoji}):null,o.createElement("div",null,n)),o.createElement(vt.z,{kind:"primary",onClick:s,dataGrammarlyPart:"tone-detector-tone-suggestion-info-cta"},r)));var Nn=i(87737);const Bn=({emogenieService:e,toneSuggestionInfo:t,onShowToneSuggestionInfo:i,onClickToneSuggestionInfoCta:a,showBetaLabel:n,browser:s})=>o.createElement(ot.F.Fragment,null,M.h.combine(e.viewState,null!=t?t:M.h.create(void 0),(({report:t,isBrandTonesEnabled:r},l)=>{let c;if(l&&(c={title:l.title,onMount(){null==i||i(l)},onClickCta(){null==a||a(l)},ctaText:"See suggestions"},xe.isToneImprovementSuggestionUphookInfo(l)&&(c={...c,ctaText:o.createElement(o.Fragment,null,o.createElement(Mn.JO.Paid,{className:Nn.diamondIcon,width:20}),o.createElement("span",null,"Unlock Premium")),emojiId:l.emojiId,emojiLiteral:l.emojiLiteral}),c=xe.isInclusiveLanguageToneSuggestionInfo(l)?{...c,iconId:l.iconId}:{...c,emojiId:l.emojiId}),t&&Array.isArray(t.emotions)){const i={emotions:t.emotions,isBrandTonesEnabled:r,onMount:()=>e.actions.trackReportShow(r),onReportEmotionFeedback:t=>e.actions.reportEmotionFeedback(t),toneSuggestionInfo:c};return n?o.createElement(Ln,{...i,showBetaLabel:!0,browser:s}):o.createElement(Ln,{...i,showBetaLabel:!1})}return null})));var Un=i(77678),Dn=i(94632),Vn=i(89894),On=i(46324),Hn=i(50833),Gn=i(62661);const Wn=({children:e})=>o.createElement("div",{className:Gn.gbUpsellFooter},e),jn=()=>o.createElement("svg",{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.271 3.5c-1.254 0-2.287 1.04-2.287 2.342v1.421c0 1.303 1.033 2.342 2.287 2.342s2.287-1.04 2.287-2.342v-1.42c0-1.304-1.033-2.343-2.287-2.343zM4.984 5.842C4.984 4.006 6.446 2.5 8.27 2.5s3.287 1.506 3.287 3.342v1.421a3.358 3.358 0 01-1.393 2.732c.001.217.005.328.018.428a2.2 2.2 0 001.024 1.589c.114.07.25.133.605.294l1.194.541a.5.5 0 01-.412.911l-1.228-.556c-.31-.141-.51-.231-.685-.34a3.2 3.2 0 01-1.499-2.387 3.243 3.243 0 01-1.817.002 3.2 3.2 0 01-1.302 2.336c-.206.15-.445.272-.818.462l-1.119.57c-.426.218-.589.303-.722.4a2.2 2.2 0 00-.876 1.43 2.362 2.362 0 00-.025.325h3.33a.5.5 0 010 1H2a.5.5 0 01-.5-.5v-.045c0-.418 0-.686.04-.938a3.2 3.2 0 011.274-2.08c.206-.15.445-.272.818-.462l1.12-.57c.425-.218.588-.303.722-.4a2.2 2.2 0 00.876-1.43c.02-.132.026-.277.027-.58a3.358 3.358 0 01-1.393-2.732v-1.42z",fill:"#05735A"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.529 8c1.254 0 2.287 1.04 2.287 2.342v1.421c0 1.303-1.033 2.342-2.287 2.342s-2.287-1.04-2.287-2.342v-1.42C13.242 9.038 14.275 8 15.529 8zm3.287 2.342C18.816 8.506 17.354 7 15.53 7s-3.287 1.506-3.287 3.342v1.421c0 1.837 1.462 3.342 3.287 3.342.315 0 .618-.045.906-.128a3.2 3.2 0 001.302 2.336c.206.15.445.272.818.462l1.119.57c.426.218.589.303.723.4a2.2 2.2 0 01.875 1.43 2.3 2.3 0 01.025.325h-3.33a.5.5 0 100 1H21.8a.5.5 0 00.5-.5v-.045c0-.418 0-.686-.04-.938a3.2 3.2 0 00-1.274-2.08c-.206-.15-.445-.272-.818-.462l-.04-.02-1.08-.55c-.425-.218-.588-.303-.722-.4a2.2 2.2 0 01-.876-1.43 3.835 3.835 0 01-.027-.58 3.358 3.358 0 001.393-2.732v-1.42z",fill:"#05735A"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.471 8c-1.254 0-2.287 1.04-2.287 2.342v1.421c0 1.303 1.033 2.342 2.287 2.342s2.287-1.04 2.287-2.342v-1.42C17.758 9.038 16.725 8 15.471 8zm-3.287 2.342C12.184 8.506 13.646 7 15.47 7s3.287 1.506 3.287 3.342v1.421c0 1.837-1.462 3.342-3.287 3.342-.315 0-.618-.045-.906-.128a3.2 3.2 0 01-1.302 2.336c-.206.15-.445.272-.818.462l-1.119.57c-.426.218-.589.303-.722.4a2.2 2.2 0 00-.876 1.43 2.365 2.365 0 00-.025.325h8.73a.5.5 0 010 1H9.2a.5.5 0 01-.5-.5v-.045c0-.418 0-.686.04-.938a3.2 3.2 0 011.274-2.08c.206-.15.445-.272.818-.462l.04-.02 1.08-.55c.425-.218.588-.303.722-.4a2.2 2.2 0 00.876-1.43c.02-.132.026-.277.027-.58a3.358 3.358 0 01-1.393-2.732v-1.42z",fill:"#05735A"})),zn=e=>(o.useEffect((()=>{e.trackShow()}),[]),o.createElement(Wn,null,o.createElement("div",{className:Gn.icon},o.createElement(jn,null)),o.createElement("div",null,"Want your team to save time and write more consistently? Explore style guides in"," ",o.createElement("span",{className:Gn.clickableLink,onClick:e.onClick},"Grammarly Business.")))),qn=e=>(o.useEffect((()=>{e.trackShow()}),[]),o.createElement(Wn,null,o.createElement("div",null,"Want your team to use a consistent brand voice wherever they write? Explore brand tones in"," ",o.createElement("span",{className:Gn.clickableLink,onClick:e.onClick},"Grammarly Business."))));var Kn=i(4135);const Zn={...On.o_,...(0,Dn.T)({default:{},hovered:{backgroundColor:Un.CoreNeutral10},clicked:{},disabled:{},toggled:{},hidden:{}})},Xn=Vn.ux.stylesheet({main:[Zn],primary:[On.U8],toggle:[On.hc],round:[On.$O],yellow:On.g2});const Jn=({children:e})=>o.createElement("div",{className:Kn.singleCardAssistantNativeContentWithPadding},e),Qn=({children:e,maxHeight:t})=>o.createElement("div",{style:{maxHeight:t,overflowY:"auto"}},e),Yn=Vn.ux.style(On.o_,(0,Dn.T)({default:{backgroundColor:Un.CoreYellow20,color:Un.CoreYellow80,lineHeight:Vn.ux.rem(2),transitionDuration:".2s",$nest:{"& span":{color:Un.CoreYellow80}}},hovered:{backgroundColor:Un.CoreYellow30,$nest:{"& i":{fill:Un.CoreYellow80,stroke:Un.CoreYellow80},"& span":{color:Un.CoreYellow80}}},disabled:{},clicked:{},toggled:{},hidden:{}}),{$nest:{"& i":{fill:Un.CoreYellow80,stroke:Un.CoreYellow80},"& span":{color:Un.CoreYellow80}}}),$n=()=>{const e=(0,On.ND)(),t=e.primary;return{...e,primary:e=>"goPremium"===e.name?o.createElement(je.zx.Primary,{name:e.name,onClick:e.onClick,className:Yn},e.text):o.createElement(t,{...e})}};var es=i(77394),ts=i(86620),is=i(16868),as=i(40081),ns=i(62346),ss=i(44618),rs=i(13313),os=i(21619),ls=i(54216),cs=i(54466),ds=i(92485),us=i(20594),ps=i(35607),ms=i(4890),gs=i(73841),hs=i(89770),vs=i(39920),fs=i(66866),ws=i(76974),bs=i(55935),Ss=i(95574),ys=i(42040),Es=i(84174),Cs=i(8821),ks=i(64998);class _s{constructor(e,t,i,a){this._gnar=e,this.experimentClient=t,this.user=i,this.toneDetectorViewModel=a,this.shouldShowGBUpgradeFooter=e=>this.user.isPremium&&!this.user.institutionInfo&&"test"===this.experimentClient.getTreatment(e),this.onClick=(e,t)=>{this._gnar.getGBButtonClick(e,void 0,this.hasToneSuggestions(e)),self.open((0,pi.Z4)(t,e))},this.trackShow=e=>{this._gnar.getGBButtonShow(e,this.hasToneSuggestions(e))}}hasToneSuggestions(e){return"gbToneDetector"===e?void 0!==this.toneDetectorViewModel.toneSuggestionInfo.get():void 0}}const As=(e,t,i,a,n,s,l,u,p,C,F,P,N,V,O,H,W,j,z,q,K,X,Q,ee,ie,ae,re)=>{const ce=ys.C8.Logging.getLogger("SingleCardAssistant.ViewModels"),ue=M.h.create(rs.A.defaultState),ve=ls.t.create(ls.t.defaultLensFilters,{...ls.t.defaultTextFilters,[Fe.R.SpecialId.Closed]:h.jv,[Fe.R.SpecialId.AllAlerts]:L.bZ.belongsToAllAlerts}),fe=rs.A.get(e.alertsList.state,e.alertsList.lensesScores,ve).subscribe(T.wW(ue)),Se=new as.t(ue.view("lenses"),ve,e.sessionModel.scoreStatus),Ce=(0,ds.$y)((0,ss.a)(t).getContents),_e={features:new Set([us.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:ms.j.Density.minimal,shouldAnimateAlertApply:us.IG.Default.shouldAnimateAlertApply,cardVisualMode:M.h.create(ms.j.CardVisualMode.RegularLightMode)},Ie=(0,us.Ls)(Ce,e.alertsReader,_e,(()=>ws.of(D.none)),e.mutingAlertsReader),Te=M.h.create(16),Me=R.getCapabilities(Ie,e.alertsReader),xe=new hs.oq(e.alertsList.state,e.alertsReader,ue.view("lenses"),e.positionManager,Se,new vs.gi(R.equatable.structEq,R.defaultOrd(Me)),(()=>()=>h.yR),Me,ve),Ne=M.h.create(xe.emptyState(Fe.R.SpecialId.AllAlerts).patch({alertSource:L.l$.sidebar}));i.next({kind:es.R.ChangeLens,selectedLens:"all"});const Be=new ts.C(W()),Ue=new cs.Xx({flush:()=>t.flushChanges()},new se.xQ,Ie,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,h.zG)(e.mutedAlertsCategoriesModel,D.map((e=>({model:e,openSuggestionsManagement:()=>self.open((0,qt.Um)().suggestionsSettings)})))),D.some(w.B.getCardsViewModelSendToURLExperiment(Be,l)),h.jv,R.getActiveItemWithAlert,Me,Ne,Be,{bufferTransitions:!0,showGbPrompt:w.B.shouldShow(p.get())}),Oe=new Es.q(K.sduiFeedbackService,Me,Ne,K.sduiManager,K.sduiFeedManager,e.alertsReader,e.getByRawAlertId,Ue,Be),He=Oe.sduiActionEvents.subscribe((({actions:e})=>e.forEach((e=>{"closeCard"===e.type&&C()})))),Ge=new $(u,l),We=new f.y(Ue.actionEvents,l,e.alertsReader),je=new ps.o((()=>he.F2(void 0))),ze=M.h.create(!1),qe=new ye.x(e.alertsList,Ne,3),Ke=M.h.create(!1),Ze=(e=>"test"!==e.peekTreatment(de.p.UpgradeCardFromCAPI))(j),Xe=new Ve(K.sduiManager.state),Je=Ze?((e,t,i,a,n)=>Le.B.getPremiumAlerts(e,t).pipe(A.x(((e,t)=>{const i=new Set(e.map((e=>e.id)));return e.length===t.length&&t.every((e=>i.has(e.id)))})),Z.M(a.pipe(_.U(E.D.NativeUpgradeHook.findUpgradeHookSduiItem),_.U(D.isSome)),n,i.sduiCardPropsForDefaultFeed),oe.b((([e,t,a,n])=>{if(0===e.length&&t)i.pushCapiSduiEvent({kind:"sdui_remove",rev:0,sduiRootId:E.D.NativeUpgradeHook.ID});else if(e.length>0&&!a){let a;a=t?"sdui_update":"sdui_add",i.pushCapiSduiEvent({kind:a,rev:0,sduiRootId:E.D.NativeUpgradeHook.ID,sdui:De(e,n)})}}))).subscribe())(e.alertsList.state,Ne,K.sduiManagerFactory,K.sduiManager.state,Ke):k.w.EMPTY,Qe=Ze?((e,t,i,a,n,s)=>e.pipe(_.U((({actions:e,cardId:o})=>e.forEach((e=>{"upgradeToPremium"===e.type?(a.getPremiumButtonClick("advancedIssues","SeeWhatsInPremium",void 0,void 0,void 0,"advancedIssues","singleCardAssistant"),(0,Ee.T)().upgradeHooks.clickUpgradeHook("advancedIssues","singleCardAssistant"),i.openUpgradeUrl(ye.L.Place.assistantCardList)):"notify"===e.type&&e.userAction===we.nz.Focus?o===E.D.NativeUpgradeHook.ID?(t.set(!0),a.getPremiumButtonShow("advancedIssues","SeeWhatsInPremium",void 0,void 0,void 0,"advancedIssues","singleCardAssistant"),a.assistantExpandedUpgradeHookShow((0,r.pipe)(i.advancedAlerts.get(),D.fold((()=>0),(e=>e.count))),100),(0,Ee.T)().upgradeHooks.showUpgradeHook("advancedIssues","singleCardAssistant")):t.set(!1):"removeRoot"===e.type&&o===E.D.NativeUpgradeHook.ID&&(t.set(!1),s.set(!0),n.pushCapiSduiEvent({kind:"sdui_remove",rev:0,sduiRootId:E.D.NativeUpgradeHook.ID}))}))))).subscribe())(Oe.sduiActionEvents,ze,qe,l,K.sduiManagerFactory,Ke):Xe.processUpgradeHookSduiCardActions(Oe.sduiActionEvents,qe),Ye=Ze?ze:Xe.upgradeHookCardFocused,$e=((e,t)=>t.pipe(ke.h(Boolean),Pe.P()).subscribe((()=>e.getTreatment(de.p.UpgradeCardFromCAPI))))(j,Ye),et=I.aj([(0,ns.gM)(K.sduiManager.state,K.sduiFeedManager.feed),Ye]).pipe(_.U((([e,t])=>i=>e(i)&&!L.bZ.isHidden(i)||t&&L.bZ.isPremium(i)&&L.bZ.isHidden(i)))),tt=new ns.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Ne,et,R.getActiveItemWithAlert,a,!0,Ye),at=(0,is.hp)(Ne,tt,Te,je,t,ce),nt=new os.mN(t,Ne,tt,e.alertsReader,R.getActiveItemWithAlert,(t=>{const i=t.reduce(((t,i)=>(0,h.zG)(e.alertsReader.getById(i.alert.id),D.chain(L.bZ.getRawId),Ae.bw((e=>t.set(e,i))),D.fold((()=>t),(()=>t)))),new Map),a=Array.from(i.keys()).map((e=>P.alerts.getAlertById(e))).filter(Mi.fQ);if(a.length){const e=a.reduce(((e,t)=>c.S.ordering.greaterThanOrEqual(t,e)?t:e));return D.fromNullable(i.get(Tn.wQ.Id.create(e.id)))}return D.none})),st=new Re(e.alertsReader,e.alertsList.state,(()=>D.fromNullable(null==N?void 0:N.sessionUuid)),l,j,q,qe,p,Ue.actionEvents,K.sduiManager.state),rt=new ne(Ne,e.alertsReader,P,Oe.sduiActionEvents,R.getActiveItemWithAlert),ot=new J(Oe.sduiActionEvents,re),ct=new be(K.sduiManager,K.sduiFeedManager,K.sduiManagerFactory,O,Ne,Xe.upgradeHookCardExists);ct.initSuccessReportSDUIEmulation();const dt=new x(K.sduiManager.state,Ue,ct.isSuccess,j),ut=nt.alertClicked.pipe(bs.T(1),me.w(D.fold((()=>ge.E),ws.of)),ke.h((e=>e.alert.lensId!==Fe.R.SpecialId.Premium)),Z.M(K.sduiManager.state),_.U((([t,i])=>(0,h.zG)(e.alertsReader.getById(t.alert.id),D.chain(L.bZ.getRawId),D.chain((e=>E.D.getByAlertId(i,e))),Ae.MH))),Z.M(K.sduiFeedManager.feed)).subscribe((([e,t])=>{let i;i=t.feedId===E.D.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID?[E.D.AssistantFeed.createPopAssistantFeedAction(),E.D.AssistantFeed.createFocusAssistantCardAction(e.id)]:[E.D.AssistantFeed.createFocusAssistantCardAction(e.id)],Ue.actionEvents.next(E.f.create(i))})),pt=[(0,h.zG)(fs.EQ.focusMarkByActiveAlert(Ne,tt,e.alertsReader,R.getActiveFocusableItem,ce.getLogger("MarksEffects.focusMarkByActiveAlert")),B.nL.Effect.Producer.delayed(a)),...Ue.getApplicatorEffects(),...Oe.getApplicatorEffects(),(0,h.zG)((0,is.k9)(Ne,at,M.h.create(D.none),R.getActiveAlignableItem,Me),B.nL.Effect.Producer.delayed(a)),Cs.N.PrevNextNavigation.sideEffect(Cs.N.PrevNextNavigation.Events.fromSduiCardActions(Oe.sduiActionEvents),Ne,Me),G.P.SideEffects.createSDUIFeedSideEffect(Me,K.sduiFeedManager.feed,R.sduiToChecksFeedOrd(Me),e.alertsReader)],mt=Ze?({state:e,metadata:t})=>{if(!B.nL.hasCards(e))return he.t$({state:e,metadata:t});const i=B.nL.Prism.getLens();return he.t$({state:i.modify((e=>D.isSome(e.cardIndex)||e.items.size>1||(0,r.pipe)(e.items.getAt(0),D.map((e=>e.id!==E.D.NativeUpgradeHook.ID)),D.getOrElse(h.jv))?e:{...e,cardIndex:D.some(0)}),e),metadata:t})}:he.t$,gt=U.v.Items.getRemoveDisposedItemsTransformer(Me),ht=ks.i.DisablePrevNextButtons.create(Me),ft=U.v.Items.getSingleItemFeedPositionsUpdateTransformer(Me),wt=(0,h.ls)(mt,Ss.L9(ct.focusSuccessReportStateTransformer),Ss.L9(gt),Ss.L9(ht),Ss.L9(ft)),bt=new gs.l(Ne,xe,e.alertsReader,e.alertsService,pt,R.getActiveItemWithAlert,wt),St=new y.X(n,s,ae,u),yt=Ue.actionEvents.subscribe((0,h.ls)((0,v.JH)(e.alertsReader,v.SV.Source.assistant),Ae.bw((e=>(e.kind===v.SV.Kind.alertApply&&e.source===v.SV.Source.assistant&&z.incrementCounter(),V.next(e)))))),Et=(0,b.W)(F),Ct=H.pipe(me.w(D.fold((()=>ge.E),(t=>t.initSingleCardAssistantActionsProcessing(e.alertsReader,(0,m.X5)(nt,Ne)))))).subscribe(),kt=new le(Ue,K),At=new g.D(l,ee,ie,X),It=(0,h.zG)(Q,D.map((e=>new S.S(At,e,C,l)))),Mt=new pe(Ue.actionEvents,P,n.view("page"),s,j,l),xt=new _s(l,j,p.get(),st),Rt=new te(p.get().isAnonymous,n.get(),l,ae),Ft=function(e,t,i,a,n,s,r,l,c,u,p){const m=()=>r.next();return{...Hn.k,button:$n(),nativeToneInsightsModal:()=>o.createElement(Jn,null,o.createElement(Bn,{emogenieService:e.emogenieService,toneSuggestionInfo:e.toneSuggestionInfo,onShowToneSuggestionInfo:t=>e.onShowToneSuggestionInfo(t),onClickToneSuggestionInfoCta:t=>e.onClickToneSuggestionInfoCta(t),showBetaLabel:!0,browser:l})),nativeLearnMoreModal:()=>o.createElement(Qn,{maxHeight:216},o.createElement(Jn,null,o.createElement(lt,{learnMoreInfo:t.learnMoreInfo}))),nativeFeedbackModal:()=>o.createElement(Jn,null,o.createElement(Y.q5,{domain:i.getDomain(),hideDomainHelpText:!0,onClose:m,align:"left",title:o.createElement("span",null,"How do you like Grammarly?"),onSubmit:e=>{i.submitFeedback(e)},withScore:!0,hideLogo:!0,hideTextBoxTitle:!0,placeholderText:"How can we improve?",compactDisplay:!0,submitButtonKind:"primary"})),nativeSettingsModal:()=>o.createElement(Jn,null,o.createElement(bn,{onClose:m,assistantSettingsViewModel:a,upgradeViewModel:n,experimentClient:s},(({onDone:e,content:t})=>o.createElement(o.Fragment,null,t,o.createElement(vt.z,{kind:"primary",type:"submit",onClick:e,className:Kn.singleCardAssistantSettingsDoneButton,dataGrammarlyPart:"single-card-assistant-settings-done-button"},"Done"))))),nativeProofitModal:()=>(0,h.zG)(c,D.fold((()=>null),(e=>{const t=e.feature.dialogCaller().type;return t===d.WT.proofitReview?o.createElement(Jn,null,o.createElement(Tt,{proofitVM:e,insideSingleCardAssistant:!0})):t===d.WT.proofitRequest?o.createElement(Jn,null,o.createElement(_t,{proofitVM:e,insideSingleCardAssistant:!0})):null}))),nativeExperimentalGBConsistencyUpsellFooter:()=>{const{onClick:e,trackShow:t,shouldShowGBUpgradeFooter:i}=u;return i(de.p.GBUphookStyleGuideFooterV1)?o.createElement(zn,{onClick:()=>e("gbInconsistencyCard",(0,qt.Um)().businessStyleGuide),trackShow:()=>t("gbInconsistencyCard")}):null},nativeExperimentalGBToneInsightsUpsellFooter:()=>{const{onClick:e,trackShow:t,shouldShowGBUpgradeFooter:i}=u;return i(de.p.GBUphookBrandTonesFooterV1)?o.createElement(qn,{onClick:()=>e("gbToneDetector",(0,qt.Um)().businessBrandTones),trackShow:()=>t("gbToneDetector")}):null},nativeGetStartedChecklistModal:({notify:e})=>o.createElement(Jn,null,o.createElement(it,{getStartedChecklistViewModel:p,notify:e}))}}(st,rt,Ge,St,qe,j,kt.popView,X,It,xt,Rt),Lt={...Hn.k,button:(0,On.ND)(Xn)},Pt=Ne.lens(B.nL.Prism.getLens());return{checksFeedItem:()=>R.item(Ft),checksFeedFlow:()=>R.createCardListFlow(Pt,Me),lensState:Ne,cardsViewModel:Ue,lensPreviewViewModel:Se,cardsListScrollManager:je,alertProcessor:P,checkingService:N,assistantFeedbackViewModel:Ge,assistantSettingsViewModel:St,getStartedChecklistViewModel:Rt,marksViewModel:tt,upgradeViewModel:qe,gnar:l,user:p,positionViewModel:Et,remSize:Te,isSingleCardAssistant:!0,statisticsService:O,toneDetectorViewModel:st,learnMoreViewModel:rt,createSnippetModalViewModel:ot,closeAssistant:C,bulkDismissViewModel:dt,nativeViewsViewModel:kt,successReportViewModel:ct,outcomeExtraFooterViewModel:Mt,designSystem:Ft,headerDesignSystem:Lt,sduiEngine:K,dispose:()=>{yt.unsubscribe(),Ue.dispose(),bt.dispose(),tt.dispose(),fe.unsubscribe(),We.dispose(),Ct.unsubscribe(),ot.dispose(),rt.dispose(),st.dispose(),null==dt||dt.dispose(),null==kt||kt.dispose(),ct.dispose(),ut.unsubscribe(),Je.unsubscribe(),Qe.unsubscribe(),He.unsubscribe(),Oe.dispose(),Mt.dispose(),Xe.dispose(),$e.unsubscribe()}}};var Is=i(20271),Ts=i(46149),Ms=i(38152),xs=i(48081),Rs=i(55419),Fs=i(6784),Ls=i(10720),Ps=i(94785),Ns=i(93508),Bs=i(19962),Us=i(85715),Ds=i(8460),Vs=i(50474),Os=i(89379),Hs=i(43805),Gs=i(22376);const Ws=o.forwardRef((({successView:e},t)=>{const i=o.useContext(Vs.m.Context),a=(0,Os.hM)((0,Os.JT)((0,r.pipe)(e,K.oA),i));return o.createElement("div",{className:Gs.compactSuccessLens,ref:t},o.createElement("div",{className:Gs.compactSuccessLensContainer},Us.UI.mount(Hs.q,a)))})),js=o.forwardRef((function({viewModels:e},t){return o.createElement("div",{className:Ds.mainView},o.createElement(qs,{ref:t,state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,assistantCardListViewModel:e.assistantCardListViewModel,predictionsPreviewViewModel:e.predictionsPreviewViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,headerViewModel:e.assistantHeaderViewModel,layoutViewModel:e.assistantLayoutViewModel,capabilities:e.capabilities,readersAttentionItemViewModel:e.readersAttentionItemViewModel}))})),zs=({position:e,isSuccess:t,children:i})=>o.createElement(ot.F.Fragment,null,e.pipe(A.x(((e,t)=>e.offset===t.offset&&e.visible===t.visible)),_.U((e=>e.visible?o.createElement(ot.F.div,{...(0,ze.Sh)(Ds.cardListFooterStatic,e.animationInProgress?Ds.cardListFooterAnimate:void 0,t?void 0:Ds.cardListFooterDynamic),style:t?{}:{transform:Bs.ux.translateY(e.offset)}},i):null)))),qs=o.forwardRef((function({state:e,assistantCardListViewModel:t,cardsViewModel:i,cardsListScrollManager:a,capabilities:n,readersAttentionItemViewModel:s,...l},c){const d=T.jw((e=>{let t=7;return t=31*t+(0,Ts.AC)(e.currentLens.id),t=31*t+(U.v.WithSuccess.State.isInSuccess(n)(e)?1231:1237),t}),e),u=(0,r.pipe)(d,_.U((e=>{const t=e.get();return U.v.WithSuccess.State.isInSuccess(n)(t)}))),p=(0,r.pipe)((0,Ls.ux)(e,a,n),Z.M(e),_.U((([e,t])=>({visible:!B.nL.hasCards(t)||D.isNone(t.currentLens.items.find((e=>!e.positionState.isHeightValid))),offset:e+6,animationInProgress:!0}))),Ns.O({visible:!1,offset:0,animationInProgress:!0}));return o.createElement(Fs.C,{className:Ds.cardList,onClick:e=>{e.target.getAttribute("class")===Ds.cardList&&t.assistantActions.next({type:Ms.lo.Type.clickOnEmpty})},footer:o.createElement(ot.F.Fragment,null,(0,r.pipe)(u,_.U((e=>o.createElement(zs,{key:"assistant-footer",position:p,isSuccess:e},o.createElement(Rs.pL,{predictionsVM:l.predictionsPreviewViewModel})))))),ref:e=>{t.cardListViewportHeight.set(D.fromNullable(null==e?void 0:e.offsetHeight))}},(l=>o.createElement(ot.F.Fragment,null,(0,r.pipe)(I.aj([u,t.havePremiumAlerts]),_.U((([r,d])=>r&&!d?o.createElement(o.Fragment,null,o.createElement(Ws,{successView:t.successView,ref:c})):o.createElement(Ls.hz,{state:e,cardsViewModel:i,cardsListScrollManager:a,connectorElements:l,ref:c,header:o.createElement(o.Fragment,null,d?o.createElement("div",{className:Ds.upgradeHookWrapper,role:"uphook-wrapper"},Us.UI.mount(Ps.n.TogglablePanel,t.upgradeHookFlow)):null),comparator:xs.O.listItemOrd,capabilities:n,readersAttentionItemViewModel:s})))))))})),Ks=o.forwardRef((function({viewModels:e,header:t,footer:i,className:a},n){return o.createElement(Fs.C,{ref:t=>{"function"==typeof n?n(t):n&&(n.current=t),e.assistantCardListViewModel.cardListViewportHeight.set(D.fromNullable(null==t?void 0:t.offsetHeight))},className:a},(a=>o.createElement(Ls.hz,{state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,connectorElements:a,header:t,footer:i,comparator:xs.O.listItemOrd,capabilities:e.capabilities,readersAttentionItemViewModel:D.none})))}));var Zs=i(41263),Xs=i(71614),Js=i(89848);const Qs=o.lazy((()=>i.e(2826).then(i.bind(i,73684)).then((({BrandTonesActivationUphookView:e})=>({default:e}))))),Ys=o.forwardRef((function({emogenieService:e,viewModels:t},i){const a=o.createElement(o.Fragment,null,o.createElement($s,{isBrandTonesEnabled:e.viewState.view("isBrandTonesEnabled"),institutionLogo:e.viewState.view("report").view((e=>null==e?void 0:e.institutionLogo)),institutionName:e.viewState.view("institutionName"),browser:t.assistantLayoutViewModel.browser}),o.createElement(Bn,{emogenieService:e,showBetaLabel:!1,browser:t.assistantLayoutViewModel.browser}),o.createElement(ot.F.Fragment,null,e.viewState.view((t=>!t.isBrandTonesEnabled&&!t.isBrandTonesConfigured&&!t.settings.hideBrandTonesActivationUphook&&t.settings.shouldShowBrandTonesActivationUphook&&o.createElement(o.Suspense,{fallback:o.createElement(o.Fragment,null)},o.createElement(Zs.L,{chunkName:"brandTonesActivationUphook"},o.createElement(Qs,{trackShow:e.actions.trackBrandToneActivationUphookShow,onActivateClick:e.actions.brandToneActivationUphookCTAClick,onDismissClick:e.actions.brandToneActivationUphookDismissClick})))))));return o.createElement(pt,{dataPartName:"emogenie-view-overlay",popActiveView:()=>t.assistantLayoutViewModel.popActiveView(),panelClassName:dt.gradientViewOverlayPanel,hideBackButton:t.user.view((e=>e.isAnonymous))},o.createElement(ot.F.Fragment,null,t.lensPreviewViewModel.getLens(Fe.R.SpecialId.PredictionEmogenie).pipe(_.U((e=>e.count>0)),A.x(),_.U((e=>e?o.createElement(Ks,{key:"emogeniePredictionCardList",viewModels:t,ref:i,header:o.createElement(o.Fragment,null,a,o.createElement("div",{className:Js.relatedSuggestionsTitle},"RELATED SUGGESTIONS"))}):o.createElement("div",{className:dt.gradientViewOverlayContent},a))))))}));Ys.displayName="EmogenieView";const $s=({isBrandTonesEnabled:e,institutionLogo:t,institutionName:i,browser:a})=>o.createElement(ot.F.Fragment,null,M.h.combine(e,t,i,((e,t,i)=>o.createElement("div",{className:dt.defaultViewOverlayHeader},o.createElement("div",{className:Xs.emogenieViewOverlayHeader},e?o.createElement("div",null,t?o.createElement("img",{className:dt.logo,src:t}):null,i," Tone detector"):"Tone detector",o.createElement(mt.v,{browser:a,className:Xs.emogenieViewOverlayHeaderBetaBadge})))))),er=({feedbackVM:e,layoutVM:t})=>o.createElement(pt,{dataPartName:"feedback-view-overlay",popActiveView:()=>t.popActiveView(),panelClassName:dt.gradientViewOverlayPanel},o.createElement("div",{className:dt.gradientViewOverlayContent},o.createElement("div",{className:dt.defaultViewOverlayHeader},"Product Feedback"),o.createElement(Y.q5,{domain:e.getDomain(),onClose:()=>t.popActiveView(),align:"left",style:{height:"calc(100% - 48px)"},onSubmit:t=>e.submitFeedback(t),withScore:!0,fixSubmitButtonOverflowBottomPadding:!0,hideLogo:!0})));var tr=i(22667),ir=i(36472);const ar=o.memo((({width:e,strokeWidth:t,generalScore:i,componentStyle:a,fontSize:n=9,isLoading:s})=>{const r=e/2,l=r-t/2,c=2*l*Math.PI,d=(s?75:i)/100*c,u=c-d,p=(e=>{const{red40:t,yellow50:i,green50:a}=Lt.Z;return e<65?t:e<95?i:a})(i);return o.createElement("div",{...(0,ze.Sh)(ir.scoreRing,s&&ir.loading),style:a},o.createElement("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`},o.createElement("circle",{fill:"white",r:l,cx:r,cy:r}),o.createElement("circle",{stroke:Lt.Z.neutral20,fill:"transparent",strokeWidth:t,style:{strokeDashoffset:d},r:l,cx:r,cy:r}),o.createElement("circle",{stroke:p,fill:"transparent",strokeWidth:t,strokeDasharray:`${c} ${c}`,style:{strokeDashoffset:u},r:l,cx:r,cy:r}),o.createElement("text",{className:ir.scoreText,x:"50%",y:"-35%",fontSize:n,fill:"black",textAnchor:"middle",transform:"rotate(90)"},i>0&&!s?i:"")))}));var nr=i(93756),sr=i(71586);const rr=e=>{const t=Us.Z.animatingFlow((()=>e.headerVM.logoScore),or);return o.createElement("div",{className:sr.logo_score},Us.UI.mount(pr,t))},or=(e,t)=>(0,r.pipe)(e,D.filter((e=>e.type!==t.type)),D.map((()=>nr.Hk("fadeout","fadein")))),lr=Us.UI.Node.make((()=>o.createElement(tr.K,{className:sr.grammarly_logo,size:22}))),cr=Us.UI.Node.make((({view:e})=>o.createElement(ot.F.div,{className:sr.score_container,"data-grammarly-part":"assistant-score"},(0,r.pipe)(e("score"),(0,_.U)((({capiScore:e,isLoading:t})=>o.createElement(o.Fragment,null,o.createElement(ar,{generalScore:e,strokeWidth:2,width:22,fontSize:e<100?11:9,isLoading:t,componentStyle:{transform:"translate(2px, -2px) rotate(-90deg)",cursor:"default"}})))))))),dr=Us.UI.Union.make("type",{logo:lr,score:cr}),ur=Us.UI.Transition.make({fadein:sr.logoscore_fadein},{fadeout:sr.logoscore_fadeout}),pr=Us.UI.Animated.make(ur,dr);var mr=i(1620),gr=i(29417);const hr=e=>{const[t,i]=o.useState(!1),[a,n]=o.useState(!1),s=e.viewModels.assistantLayoutViewModel,l=e.viewModels.assistantHeaderViewModel,c=o.useContext(Is.O.Context),d=(0,r.pipe)(e.viewModels.assistantProofitViewModel,D.map((e=>e.feature)),D.map((t=>o.createElement(ot.F.Fragment,null,I.aj([t.layoutCreated,s.activeView.view((e=>e.type===t.assistantViewType()))]).pipe(_.U((([i,a])=>i?o.createElement(Rt.u,{message:c.proofitTooltip,showDelay:xt.gk,disabled:a},o.createElement(In.h,{onClick:()=>{a?s.popActiveView():(e.viewModels.gnar.proofitButtonClick("assistant_header"),s.pushActiveView({type:t.assistantViewType()}))},dataGrammarlyPart:"assistant-header-action-btn-proofit"},o.createElement("div",{className:sr.headerActionBtnProofitIcon}))):null)))))),D.toNullable),u=o.createElement(mr.P,{onClick:l.close,tooltipMessage:"Close panel",dataGrammarlyPart:"assistant-header-action-btn-close"});return o.createElement(Rt.u,{message:"Grab and drag to move panel",showDelay:xt.gk,disabled:t},o.createElement("div",{...(0,ze.Sh)(sr.header,a&&sr.actions_hovered),ref:e.draggableRef,onMouseDown:()=>i(!0),onMouseOut:()=>i(!1)},o.createElement(rr,{headerVM:l}),o.createElement(vr,null),o.createElement(ot.F.div,{className:sr.headerActions,onMouseOver:()=>n(!0),onMouseOut:()=>n(!1)},s.isHeaderNavigationEnabled.view((e=>e?o.createElement(o.Fragment,null,d,o.createElement(ot.F.Fragment,null,l.showSetGoalsActionButton.view((e=>e&&o.createElement(Rt.u,{message:c.setGoalsTooltip,showDelay:xt.gk},o.createElement(In.h,{onClick:()=>l.open("setGoals"),dataGrammarlyPart:"assistant-header-action-btn-set-goals"},o.createElement("div",{className:sr.headerActionBtnGoalsIcon})))))),o.createElement(ot.F.Fragment,null,M.h.combine(l.showSettingsActionButton,s.activeView,((e,t)=>{const i=t.type===g.a.Type.settings;return e&&o.createElement(gr.l,{onClick:()=>i?s.popActiveView():s.pushActiveView({type:g.a.Type.settings}),enableTooltip:!i,dataGrammarlyPart:"assistant-header-action-btn-settings"})}))),u):u)))))},vr=()=>o.createElement("div",{className:sr.draggableWrapper,"data-grammarly-part":"assistant-draggable-handler"},o.createElement("div",{className:sr.draggable}));class fr extends o.Component{render(){return this._idSuffix=this._idSuffix||"readersAttentionOnboardingBanner_"+fr._nextIdSuffix++,o.createElement("svg",{className:this.props.className,viewBox:"0 2 296 144",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{clipPath:`url(#clip0_${this._idSuffix})`},o.createElement("rect",{width:"296",height:"144",fill:"#4A6EE0"}),o.createElement("path",{d:"M-5.5 -3.5H261.5V47.5H-5.5V-3.5Z",fill:"#6E66DE",stroke:"#1F243C"}),o.createElement("path",{d:"M-2.79293 -197.5L429.5 234.793V-197.5H-2.79293Z",fill:"#15C39A",stroke:"#1F243C"}),o.createElement("path",{d:"M219.057 33C222.992 33 226.182 29.8101 226.182 25.875C226.182 21.94 222.992 18.7501 219.057 18.7501C215.122 18.7501 211.932 21.94 211.932 25.875C211.932 29.8101 215.122 33 219.057 33Z",fill:"#1F243C",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M221.477 31.0899C225.92 31.0899 229.522 27.4881 229.522 23.045C229.522 18.6018 225.92 15 221.477 15C217.033 15 213.432 18.6018 213.432 23.045C213.432 27.4881 217.033 31.0899 221.477 31.0899Z",fill:"#41D9B5",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M220.188 27.045C220.009 27.045 219.841 26.9778 219.717 26.8434L216.927 24.0646C216.67 23.8069 216.67 23.3811 216.927 23.1122C217.185 22.8545 217.611 22.8545 217.88 23.1122L220.188 25.4204L225.353 20.2662C225.611 20.0085 226.037 20.0085 226.306 20.2662C226.563 20.5239 226.563 20.9497 226.306 21.2186L220.67 26.8546C220.535 26.9778 220.367 27.045 220.188 27.045Z",fill:"white"}),o.createElement("path",{d:"M68.125 57C72.06 57 75.25 53.8101 75.25 49.875C75.25 45.94 72.06 42.7501 68.125 42.7501C64.19 42.7501 61 45.94 61 49.875C61 53.8101 64.19 57 68.125 57Z",fill:"#1F243C",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M70.545 55.0899C74.9881 55.0899 78.5899 51.4881 78.5899 47.045C78.5899 42.6018 74.9881 39 70.545 39C66.1018 39 62.5 42.6018 62.5 47.045C62.5 51.4881 66.1018 55.0899 70.545 55.0899Z",fill:"#41D9B5",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M69.2564 51.045C69.0771 51.045 68.909 50.9778 68.7858 50.8434L65.9958 48.0646C65.7381 47.8069 65.7381 47.3811 65.9958 47.1122C66.2535 46.8545 66.6793 46.8545 66.9482 47.1122L69.2564 49.4204L74.4217 44.2662C74.6794 44.0085 75.1052 44.0085 75.3741 44.2662C75.6318 44.5239 75.6318 44.9497 75.3741 45.2186L69.7382 50.8546C69.6037 50.9778 69.4357 51.045 69.2564 51.045Z",fill:"white"}),o.createElement("rect",{x:"132",y:"38",width:"39",height:"24",rx:"2",fill:"#1F243C",stroke:"#1F243C"}),o.createElement("rect",{x:"135",y:"35",width:"39",height:"24",rx:"2",fill:"#F8C6DA",stroke:"#1F243C"}),o.createElement("path",{d:"M135 58.3296L149.303 47.4857L153.298 44.4591C154.007 43.923 154.993 43.923 155.702 44.4591L159.697 47.4857L174 58.3296",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M173.914 35.5L159.698 47.6583L155.806 50.9962C155.063 51.6361 153.956 51.6361 153.212 50.9962L149.303 47.6583L135.087 35.5",fill:"#F8C6DA"}),o.createElement("path",{d:"M173.914 35.5L159.698 47.6583L155.806 50.9962C155.063 51.6361 153.956 51.6361 153.212 50.9962L149.303 47.6583L135.087 35.5",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("rect",{x:"135",y:"35",width:"39",height:"24",rx:"2",stroke:"#1F243C"}),o.createElement("rect",{y:"32",width:"296",height:"112",fill:`url(#paint0_linear_${this._idSuffix})`}),o.createElement("path",{d:"M185.5 22C185.5 18.961 183.039 16.5 180 16.5C183.039 16.5 185.5 14.039 185.5 11C185.5 14.039 187.961 16.5 191 16.5C187.965 16.5 185.5 18.9651 185.5 22Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("path",{d:"M239.5 128C239.5 124.961 237.039 122.5 234 122.5C237.039 122.5 239.5 120.039 239.5 117C239.5 120.039 241.961 122.5 245 122.5C241.965 122.5 239.5 124.965 239.5 128Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("path",{d:"M24.5 63C24.5 59.961 22.039 57.5 19 57.5C22.039 57.5 24.5 55.039 24.5 52C24.5 55.039 26.961 57.5 30 57.5C26.9651 57.5 24.5 59.9651 24.5 63Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("rect",{x:"263",y:"76",width:"63",height:"77",rx:"2",fill:"#1F243C",stroke:"#1F243C"}),o.createElement("rect",{x:"267",y:"72",width:"63",height:"77",rx:"2",fill:"#F9FAFF",stroke:"#1F243C"}),o.createElement("path",{d:"M318.759 89.7112H278",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M318.759 101.227H278",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M318.759 112.743H278.095",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M318.759 124.259H278",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("g",{style:{mixBlendMode:"multiply"},opacity:"0.4"},o.createElement("path",{d:"M318.759 101.227H278",stroke:"#41D9B5",strokeWidth:"10",strokeMiterlimit:"10"})),o.createElement("g",{style:{mixBlendMode:"multiply"},opacity:"0.4"},o.createElement("path",{d:"M305.43 112.743H278.095",stroke:"#41D9B5",strokeWidth:"10",strokeMiterlimit:"10"}))),o.createElement("defs",null,o.createElement("linearGradient",{id:`paint0_linear_${this._idSuffix}`,x1:"148",y1:"32",x2:"148",y2:"144",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#26307D",stopOpacity:"0"}),o.createElement("stop",{offset:"1",stopColor:"#26307D",stopOpacity:"0.5"})),o.createElement("clipPath",{id:`clip0_${this._idSuffix}`},o.createElement("rect",{width:"296",height:"144",fill:"white"}))))}}fr._nextIdSuffix=0;var wr=i(95774);const br=({layoutVM:e})=>o.createElement(pt,{dataPartName:"readers-attention-help-overlay",popActiveView:()=>e.popActiveView(),panelClassName:wr.helpPanel,contentClassName:wr.helpPanelContent},o.createElement("div",{className:wr.helpBanner},o.createElement(fr,{className:wr.helpBannerImage}),o.createElement("div",{className:wr.helpHeader},"Reader′s attention",o.createElement(yn.C,{title:"NEW",kind:"gold"})),o.createElement("div",{className:wr.helpBannerMessage},"Get your important information across")),o.createElement("div",{className:wr.helpContent},o.createElement("div",null,"Grammarly predicts which parts of your email will be read.",o.createElement("ul",null,o.createElement("li",null,o.createElement("span",{className:wr.heatmap},o.createElement("b",null,"Highlighted text is most likely to be read."))),o.createElement("li",null,"The rest of the text may be skimmed or skipped.")),"Follow Grammarly’s suggestions to keep your reader’s attention.")));var Sr=i(10966);const yr=e=>{const t=Us.Z.animatingFlow((()=>e.summaryVM.summary),Er);return o.createElement("div",{...(0,ze.Sh)(Sr.summary_wrapper,e.className)},Us.UI.mount(_r,t))},Er=(e,t)=>(0,r.pipe)(e,D.filter((e=>e.content!==t.content)),D.map((()=>nr.Hk("fadeout","fadein")))),Cr=Us.UI.Node.make((({view:e})=>o.createElement(ot.F.div,{className:Sr.summary_heading,"data-grammarly-part":"assistant-summary-header"},e("content")))),kr=Us.UI.Transition.make({fadein:Sr.summary_fadein},{fadeout:Sr.summary_fadeout}),_r=Us.UI.Animated.make(kr,Cr);var Ar=i(35501),Ir=i(64108);const Tr=o.forwardRef((function({viewModels:e,readersAttentionVM:t},i){return o.createElement(pt,{dataPartName:"readers-attention-view-overlay",popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),panelClassName:dt.gradientViewOverlayPanel},o.createElement(Ks,{key:"takeawaysPredictionCardList",ref:i,viewModels:e,className:Ir.cardList,header:o.createElement(Mr,{readersAttentionVM:t,layoutVM:e.assistantLayoutViewModel}),footer:o.createElement(Nt,{feedbackVM:e.assistantFeedbackViewModel,entryPoint:Mt.Q.readersAttention})}))})),Mr=({readersAttentionVM:e,layoutVM:t})=>{const i=e.panelState.pipe(_.U(D.fold((()=>({content:""})),(e=>({content:e.headerMessage})))));return o.createElement(o.Fragment,null,o.createElement("div",{className:dt.defaultViewOverlayHeader},o.createElement("div",{className:Ir.headerGroup},"Reader′s attention",o.createElement("div",{onClick:()=>e.showHelp(),className:Ir.questionMarkButton,"data-grammarly-part":"readers-attention-question-mark-button"},o.createElement(Mn.JO.QuestionMark,{width:12,className:Ir.questionMarkIcon}))),o.createElement(mt.v,{browser:t.browser})),o.createElement(yr,{summaryVM:{summary:i},className:Ir.summaryWrapper}),o.createElement("div",{className:Ir.message},H.UI.mount(H.UI.Union.asOption(Ar.r),(()=>e.panelState))),o.createElement(ot.F.div,{...(0,ze.Sh)(Js.relatedSuggestionsTitle,Ir.relatedSuggestionsTitle)},e.panelState.pipe(_.U(D.fold(h.gn,(e=>`${e.numChecklistItemsChecked} OF ${e.numChecklistItems} COMPLETED`))))))};var xr=i(62727),Rr=i(80550),Fr=i(92132),Lr=i(70091),Pr=i(99682),Nr=i(17161),Br=i(53447),Ur=i(67521),Dr=i(51369),Vr=i(42103),Or=i(15073),Hr=i(101),Gr=i(16118),Wr=i(14811),jr=i(83401),zr=i(89068),qr=i(78674),Kr=i(72481),Zr=i(91463);const Xr=o.memo((function({viewModels:e,experimentClient:t,emogenieService:i,height:a,ready:n,OuterElementsPortalSource:s}){const l=new ts.C;(0,O.iR)("viewModels",e);const c=(0,kt.IQ)(),d=(0,kt.e8)(),u=o.useContext(kt.Dg).state.pipe(ke.h((e=>!e.dragging)),Ns.O(Pr.h.create())),p=o.useContext(Nr.Y4),m=(0,Br.C7)(),h=M.h.create(Bs.UL.empty);(0,Ur.A)(I.aj([u,p]).pipe(_.U((([e,t])=>{const i=t.top+e.translate.y,a=t.left+e.translate.x,n=m.height-i-t.height,s=m.width-a-t.width;return{height:t.height,width:t.width,top:i,left:a,bottom:n,right:s}})),oe.b(T.wW(h)))),(0,Ur.A)(u.pipe(oe.b((t=>e.positionViewModel.onDrag(t))))),(0,Ur.A)(e.assistantLayoutViewModel.activeView.pipe(Gr.G(),oe.b((([t,i])=>{t.type!==i.type&&g.a.isDefault(i)&&e.cardsListScrollManager.paddingTop.set(0)}))));const v=o.useRef(null);return o.useEffect((()=>{e.assistantCardListViewModel.cardListContext.next(D.fromNullable(v.current));const t=v.current?Wr.rl(v.current,{subtree:!0,childList:!0}):jr.C,i=h.view((e=>({top:e.top,left:e.left}))),a=(0,r.pipe)(t,zr.V((0,$i.m9)(1)),qr.b(10),Pe.P()).subscribe((()=>n(i,c)),(()=>{n(i,c,!0)}));return()=>{a.unsubscribe()}}),[]),o.createElement(Jr,{remSize:e.remSize,environment:l,viewport:h},o.createElement(ot.F.div,{"data-grammarly-part":"assistant-popup-content",...(0,ze.Sh)(Ds.assistant,c.pipe(Ns.O(!1),_.U((e=>e?Ds.dragging:null)))),style:{height:a,maxHeight:"90vh"}},o.createElement(hr,{viewModels:e,draggableRef:d}),e.assistantLayoutViewModel.activeView.view((a=>g.a.isDefault(a)?o.createElement(js,{viewModels:e,ref:v,key:"default-view"}):g.a.isEmogenie(a)?o.createElement(Ys,{emogenieService:i,viewModels:e,key:"emogenie-view",ref:v}):g.a.isReadersAttention(a)?o.createElement(Tr,{viewModels:e,readersAttentionVM:e.readersAttentionViewModel,key:"readers-attention-view",ref:v}):g.a.isReadersAttentionHelp(a)?o.createElement(br,{layoutVM:e.assistantLayoutViewModel,key:"readers-attention-help"}):g.a.isFeedback(a)?o.createElement(er,{feedbackVM:e.assistantFeedbackViewModel,layoutVM:e.assistantLayoutViewModel,key:"feedback-view"}):g.a.isSettings(a)?o.createElement(Sn,{viewModels:e,experimentClient:t,key:"settings-view"}):g.a.isProofitRequest(a)&&D.isSome(e.assistantProofitViewModel)?o.createElement(_t,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,key:"proofit-request-view"}):g.a.isProofitReview(a)&&D.isSome(e.assistantProofitViewModel)?o.createElement(Tt,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,key:"proofit-review-view"}):null))),o.createElement(s,null,o.createElement(Lr.jv,null,o.createElement(Rr.L,{modalManager:e.assistantModalManager}))),o.createElement(Dr.X,null))})),Jr=({environment:e,viewport:t,children:i,remSize:a})=>{var n;const s=o.useRef((0,Is.I)(Vs.m.getConfig(e.has(ts.U.Flag.isAppleSystem)?"mac":"windows"))),r=null===(n=o.useContext(xr.nS.Context))||void 0===n?void 0:n.host;return o.createElement(Fr.Q,{remSize:a,setter:e=>Or.u.setRootCssVar(r||document.documentElement,e)},o.createElement(Kr.p.Manager,{cardWidth:Kr.p.withCardWidthEffect(Kr.p.defaultSizeObserver,(e=>{Kr.p.setRootCssVar(r||document.documentElement,e)}))},o.createElement(ts.U.Context.Provider,{value:e},o.createElement(ma.a.Context.Provider,{value:e},o.createElement(Is.O.Context.Provider,{value:s.current.assistant},o.createElement(Vs.m.Context.Provider,{value:s.current.denali},o.createElement(Zr.TG.ContextMock,null,o.createElement(Hr.l.RootVirtualContainer,{viewport:t,name:"draggable"},o.createElement(Vr.G.DefaultProvider,null,o.createElement(Lr.jv,null,i))))))))))};var Qr=i(7309),Yr=i(63919),$r=i(62337);const eo=({textFieldRect:e,viewModels:t,gButtonRect:i,draggableGButtonType:a,children:n})=>{const{initialPositionOffset:s}=t.positionViewModel,r=$r.UL.shift(i,Yr.E9.minus(e.client,e.page)),l=null===a?{...e.client,...e.size}:r,c=(0,Br.C7)(),d=null===a?t.assistantLayoutViewModel.layout:Qr.V.draggableGButtonAssistantLayout(r,e);return o.createElement(kt._l,{bounds:c,hasDragHandle:!0},(({translate:e})=>o.createElement(Nr.sX,{anchorRect:l,viewportRect:c,anchorOrigin:d.anchorOrigin,elementOrigin:d.assistantOrigin,anchorMargin:d.anchorMargin,repositioning:d.repositioningStrategy,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:s.left,vertical:s.top}},(({top:t,left:i})=>o.createElement("div",{"data-grammarly-part":"assistant-popup",style:{position:"fixed",transform:`translate(${e.x}px, ${e.y}px)`,zIndex:xt.Eq,top:t,left:i}},n)))))};var to=i(95300);const io=({alignmentRect:e,viewModels:t,onDomRectChange:i,anchor:a,children:n})=>{const s=(0,Br.C7)(),[r,l]=o.useState(Pr.h.create()),[c,d]=o.useState(null),[u,p]=o.useState(null),[m,g]=o.useState(Nr.KC.top),[h,v]=o.useState(Nr.KC.left),[f,w]=o.useState(Nr.KC.height),[b,S]=o.useState(Nr.KC.width),y=o.useRef(new to.X(Nr.KC)),E=null!=u?u:r.translate;o.useEffect((()=>{const e=y.current.pipe(Gr.G()).subscribe((([e,t])=>{let i,a;h!==Nr.KC.left&&e.left===t.left||(i=t.left),m===Nr.KC.top?a=t.top:e.height!==t.height&&(a=m-(t.height-e.height),a<0&&(a=0)),void 0!==a&&g(a),void 0!==i&&v(t.left),w(t.height),S(t.width)}));return()=>e.unsubscribe()}),[m,h]),o.useEffect((()=>{const e=s.height-m-f,t=s.width-h-b;i({top:m,left:h,bottom:e,right:t,height:f,width:b})}),[m,h,b,f]),o.useEffect((()=>{!r.dragging&&r.dragEnd&&(g(m+E.y),v(h+E.x),d(r.translate),p({x:0,y:0}))}),[r]),o.useEffect((()=>{r.dragging&&u&&c&&p({x:r.translate.x-c.x,y:r.translate.y-c.y})}),[r]);const C="textField"===a?{anchorOrigin:{horizontal:"right",vertical:"bottom"},elementOrigin:{horizontal:"left",vertical:"bottom"},anchorMargin:{top:0,bottom:0,left:16,right:16},repositioning:[{horizontal:"flip",vertical:"translate"}]}:"GButton"===a?{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},anchorMargin:{top:4,bottom:4,left:0,right:0},repositioning:[{horizontal:"translate",vertical:"flip"}]}:(0,Be.vE)(a);return o.createElement(kt._l,{bounds:s,hasDragHandle:!0,onChangeDragState:l},o.createElement(Nr.sX,{...C,anchorRect:e,viewportRect:s,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:t.positionViewModel.initialPositionOffset.left,vertical:t.positionViewModel.initialPositionOffset.top},onChangePosition:e=>y.current.next(e)},o.createElement("div",{style:{position:"fixed",transform:`translate(${E.x}px, ${E.y}px)`,zIndex:xt.Eq,bottom:s.height-m-f,right:s.width-h-b}},n)))};var ao=i(29758),no=i(26123);const so=({draggableRef:e,headerContent:t,className:i,children:a,includeContentPadding:n,footer:s,dataGrammarlyPart:r="single-card-assistant",onHeightChange:l})=>{const[c,d]=o.useState(0),[u,p]=o.useState(0),[m,g]=o.useState(0),h=o.useRef(null),v=o.useRef(null),f=o.useRef(null);o.useEffect((()=>{null==l||l(c+u+m)}),[c,u,m]);const w=o.useRef(null);o.useEffect((()=>{var e;return h.current?(null===(e=w.current)||void 0===e||e.disconnect(),w.current=ao.N.getResizeObserver((()=>{h.current&&d(h.current.getBoundingClientRect().height)})),w.current.observe(h.current)):d(0),()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.disconnect()}}),[h.current]);const b=o.useRef(null);o.useEffect((()=>{var e;return v.current?(null===(e=b.current)||void 0===e||e.disconnect(),b.current=ao.N.getResizeObserver((()=>{v.current&&p(v.current.getBoundingClientRect().height)})),b.current.observe(v.current)):p(0),()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.disconnect()}}),[v.current]);const S=o.useRef(null);return o.useEffect((()=>{var e;return f.current?(null===(e=S.current)||void 0===e||e.disconnect(),S.current=ao.N.getResizeObserver((()=>{f.current&&g(f.current.getBoundingClientRect().height)})),S.current.observe(f.current)):g(0),()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.disconnect()}}),[s,f.current]),o.useEffect((()=>{v.current&&(v.current.scrollTop=0)}),[v.current,u]),o.createElement("div",{...(0,ze.Sh)(no.singleCardAssistant,i),"data-grammarly-part":r},o.createElement("div",{"data-grammarly-part":r+"-header",...(0,ze.Sh)(no.singleCardAssistantHeader,e?no.singleCardAssistantHeaderDraggable:null),ref:t=>{h.current=t,null==e||e(t)}},o.createElement(ot.F.Fragment,null,t)),o.createElement("div",{"data-grammarly-part":r+"-content",...(0,ze.Sh)(no.singleCardAssistantContent,n?no.singleCardAssistantContentWithPadding:null),ref:v},a),s?o.createElement("div",{"data-grammarly-part":r+"-footer",className:no.singleCardAssistantFooter,ref:f,onClick:()=>s.onClick()},o.createElement("div",{className:no.singleCardAssistantFooterText},s.content),s.tooltip&&o.createElement(Rt.u,{message:s.tooltip,showDelay:xt.gk},o.createElement(In.h,{onClick:()=>s.onClick()},o.createElement("div",{className:no.singleCardAssistantFooterButtonIcon})))):null)};var ro=i(17766),oo=i(45711),lo=i(23447),co=i(74453),uo=i(51915),po=i.n(uo);const mo={clarity:ro.G,correctness:oo.a,tone:lo.D,engagement:co.L},go=({suggestionType:e})=>{const t=mo[e];return o.createElement("div",{className:po().container},o.createElement(t,null),"Your first ",e," suggestion!")};var ho=i(18702),vo=i(94810);const fo=o.memo((function({viewModels:e,height:t,domRect:i,ready:a}){const n=new ts.C;(0,O.iR)("viewModels",e);const s=(0,kt.IQ)(),l=(0,kt.e8)(),c=o.useContext(kt.Dg).state.pipe(ke.h((e=>!e.dragging)),Ns.O(Pr.h.create()));(0,Ur.A)(c.pipe(oe.b((t=>e.positionViewModel.onDrag(t))))),o.useEffect((()=>{const e=i.view((e=>({top:e.top,left:e.left})));a(e,s)}),[]);const d=e.nativeViewsViewModel.header.view(D.fold((()=>o.createElement(o.Fragment,null)),(t=>o.createElement(ho.P,{key:"header",sduiRootId:t.id,content:t,designSystem:e.headerDesignSystem,notify:(i,a,n)=>e.cardsViewModel.actionEvents.next({type:ue.lY.Type.sduiCardAction,sourceId:i,cardId:t.id,actions:a,scope:n}),transitions:[],prevContent:D.none,onAnimationEnd:O.Q1,onMount:O.Q1})))),u=e.checksFeedFlow(),p=(0,r.pipe)(u,H.Z.extendActions(oe.b((t=>{"content"===t.key&&"card"===t.action.key&&"alertRefSDUI"===t.action.action.key&&e.cardsViewModel.actionEvents.next(t.action.action.action)}))));return o.createElement(Jr,{remSize:e.remSize,environment:n,viewport:i},o.createElement(ot.F.Fragment,null,I.aj([e.bulkDismissViewModel.successReportFooterBulkDismissAlertsCount,e.outcomeExtraFooterViewModel.extraFooterOutcomeType]).pipe(_.U((([i,a])=>o.createElement(so,{key:"single-card-assistant",className:Kn.singleCardAssistant,draggableRef:l,headerContent:d,footer:i>0?{content:o.createElement(o.Fragment,null,"We hid ",i," ",ve._6(i,"suggestion","suggestions")," ","that didn’t seem relevant to your text. Want to review"," ",ve._6(i,"it","them"),"?"),tooltip:"Review suggestions",onClick:()=>{e.bulkDismissViewModel.showBulkDismissFeed()}}:a?{content:o.createElement(go,{suggestionType:a}),onClick:()=>null}:void 0,onHeightChange:e=>t.set(e)},H.UI.mount(vo.c.assistant(e.checksFeedItem(e.cardsViewModel.actionEvents)),p)))))),o.createElement(Dr.X,null))}));var wo,bo=i(79692),So=i(2768),yo=i(81136);(0,p.C)();class Eo{constructor(e,t){this._params=e,this._felog=t,this._log=l.Y.create(Eo.name),this._integration=null,this._viewModels=M.h.create(null),this._assistantPopupIsReady=new se.xQ,this._initPerformance=void 0,this._openMeasure=void 0,this._height=M.h.create(0),this._domRect=M.h.create(Bs.UL.empty),this._openState=M.h.create("closed"),this._subs=new re.w.Keeper,this.openState=this._openState.view(),this.open=e=>{var t,i;const a=this._params.contentScriptState.view("user").view((e=>({isPremium:e.premium,isAnonymous:e.anonymous,experiments:e.experiments,customFields:e.customFields,institutionInfo:e.institutionInfo,isGrammarlyEmployee:Di.n5.isGrammarlyEmployee(e),isTestUser:Di.n5.isTestUser(e)}))),n=this._viewModels.get();if(null!==n)this._subs.push(ko(n,e));else{this._openMeasure=this._felog.assistant.openTime.startMeasure();const n=this._felog.assistant.initTime.startMeasure();this._openState.set("opening");const s=this._params.assistantService,o=s.createIntegration({gnar:this._params.gnar,felog:this._felog,readersAttentionFeature:this._params.readersAttentionFeature,snippetsFeature:this._params.snippetsFeature,shortenItFeature:this._params.shortenItFeature,experimentClient:this._params.experimentClient});if(!o)return this._log.warn("tried to open assistant with checking service not initialized"),n.cancelMeasure(),void this._openMeasure.cancelMeasure();null===(i=(t=this._params).onOpen)||void 0===i||i.call(t,o),this._integration=o;const l=(0,r.pipe)(D.fromNullable(e.type===d.WT.card?e.alertId:null),D.map(Tn.wQ.Id.create)),c=D.isSome(o.engine.sduiEngine)?As(o.engine,o.denaliViewAdapter,s.sidebarEvents,this._assistantPopupIsReady,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,a,this.close,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.checkingService,this._params.cardEvents,this._params.statisticsService,this._params.toneAIFeature,(()=>this._params.envFactory()),this._params.experimentClient,this._params.userEngagedByAlertsAcceptedService,this._params.emogenieService,o.engine.sduiEngine.value,this._params.browser,D.fromNullable(this._params.proofitFeature),this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.dapiActions,this._params.snippetsFeature):(0,m.n)(o.engine,o.denaliViewAdapter,o.document.settings.lens("selectedLens"),this._params.emogenieService,D.fromNullable(this._params.readersAttentionFeature),this._params.shortenItFeature,this._params.toneAIFeature,this._params.ethicalAIFeature,this._params.snippetsFeature,D.fromNullable(this._params.proofitFeature),s.sidebarEvents,this._assistantPopupIsReady,l,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.statisticsService,this._params.domain,a,this.close,this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.cardEvents,this._params.browser,this._params.layout.assistant,(()=>this._params.envFactory()),this._params.userEngagedByAlertsAcceptedService,this._params.dapiActions);this._subs.push(ko(c,e)),c.isSingleCardAssistant&&this._subs.push(c.cardsViewModel.actionEvents.pipe(ke.h(yo.t.isSduiCardAction),ke.h((e=>e.sourceId===E.D.Proofit.ID)),_.U((e=>Co(e.actions,c.sduiEngine.sduiFeedManager.currentFeed))),ke.h((e=>e.length>0))).subscribe((()=>{c.gnar.proofitButtonClick("assistant_header")}))),this._initPerformance=n.endMeasure(),this._viewModels.set(c)}},this.close=()=>{var e,t,i,a;null!==this._viewModels.get()&&(this._trackAssistantClose(),null===(t=(e=this._params).onClose)||void 0===t||t.call(e),this._openState.set("closed"),null===(i=this._integration)||void 0===i||i.dispose(),this._integration=null,null===(a=this._viewModels.get())||void 0===a||a.dispose(),this._viewModels.set(null))},this._asyncReadyCbSub=null,this._getReadyFn=()=>{const e=this._felog.assistant.renderTime.startMeasure();return(t,i,a)=>{const n=e.endMeasure();let s;if((0,Be.kG)(!!this._openMeasure,"Expected Assistant to be open"),a)this._openMeasure.cancelMeasure();else{const e=this._openMeasure.endMeasure();s=null==e?void 0:e.duration,this._initPerformance&&n&&e&&e.duration>500&&this._log.warn("assistant popup took too long to open:",{init:this._initPerformance.duration,render:n.duration,total:e.duration})}this._asyncReadyCbSub=bo.E.schedule((()=>{this._openState.set("open"),this._assistantPopupIsReady.next(),this._trackAssistantOpen(t,s),this._trackAssistantDrag(t,i)}))}},this._applyIframeOffset=e=>{var t,i;const a=null===(i=(t=this._params).getCustomOffset)||void 0===i?void 0:i.call(t);return a?{...e,size:{width:a.width,height:a.height},client:{...e.client,left:a.left+e.client.left,top:a.top+e.client.top},offset:{...e.offset,left:a.left+e.offset.left,top:a.top+e.offset.top},page:{...e.page,left:a.left+e.page.left,top:a.top+e.page.top}}:e}}get view(){return this._viewModels.pipe(me.w((e=>null===e?ws.of(null):Zt.R(self,"resize").pipe(Ns.O(null),Z.M(this._params.layout.textField.rect.behavior),Z.M(I.aj([this._params.layout.gbutton.positionBehavior,this._params.layout.gbutton.sizeBehavior]).pipe(_.U((([e,t])=>{const i=t.draggable?t.width:t.heightAndWidth,a=t.draggable?t.height:t.heightAndWidth;return{top:e.draggable?e.client.top:e.client.top-a,left:e.draggable?e.client.left:e.client.left-i,width:i,height:a}})))),_.U((([[t,i],a])=>{const n=this._applyIframeOffset(i),s=this._getReadyFn();let r;const l="test"===this._params.experimentClient.getTreatment(de.p.SingleCardAssistantNextToTextField);return r=l?{...n.client,...n.size}:a,e.isSingleCardAssistant?o.createElement(io,{anchor:l?"textField":"GButton",alignmentRect:r,viewModels:e,onDomRectChange:e=>this._domRect.set(e)},o.createElement(fo,{viewModels:e,height:this._height,ready:s,domRect:this._domRect.view()})):o.createElement(eo,{textFieldRect:n,gButtonRect:a,viewModels:e,draggableGButtonType:this._params.draggableGButtonType},o.createElement(Xr,{viewModels:e,experimentClient:this._params.experimentClient,emogenieService:this._params.emogenieService,height:(0,u.Y)(e,n).pipe(So.R(this._assistantPopupIsReady.asObservable()),oe.b(T.wW(this._height))),ready:s,OuterElementsPortalSource:this._params.OuterElementsPortalSource}))}))))))}get activeView(){return this._viewModels.pipe(me.w((e=>{var t;return(null==e?void 0:e.isSingleCardAssistant)?ws.of(null):null!==(t=null==e?void 0:e.assistantLayoutViewModel.activeView)&&void 0!==t?t:ws.of(null)})))}dispose(){var e;this.close(),this._subs.dispose(),null===(e=this._asyncReadyCbSub)||void 0===e||e.unsubscribe()}_trackAssistantOpen(e,t){var i,a;const n=this._viewModels.get();if(null!==n){const s=n.isSingleCardAssistant?{top:0,left:0}:n.positionViewModel.initialPositionOffset,{statisticsService:r}=this._params,o=r.alertCounts.get(),l=0===s.top&&0===s.left?n.isSingleCardAssistant||"default"===n.assistantLayoutViewModel.layout.name?"smart":"hardcoded":"sticky",d=n.isSingleCardAssistant?"default":n.assistantLayoutViewModel.activeView.get().type;this._params.gnar.assistantPopupShow(d,this._height.get(),e.get().left,e.get().top,o.unmutedCapiAlerts,o.filter((e=>c.S.isCapiAlert(e)&&e.outcome===ce.TC.clarity)).visibleNotInlineCapiAlerts,o.visibleInlineCapiAlerts,o.filter((e=>c.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,r.wordsCount.get(),l,null!==(a=null===(i=this._params.checkingService)||void 0===i?void 0:i.sessionUuid)&&void 0!==a?a:"",void 0,t,r.generalScore.get())}}_trackAssistantClose(){var e;const{statisticsService:t}=this._params,i=t.alertCounts.get(),a=this._viewModels.get(),n=(null==a?void 0:a.isSingleCardAssistant)?"default":null!==(e=null==a?void 0:a.assistantLayoutViewModel.activeView.get().type)&&void 0!==e?e:g.a.Type.default;this._params.gnar.assistantPopupCloseButtonClick(n,i.unmutedCapiAlerts,i.filter((e=>c.S.isCapiAlert(e)&&e.outcome===ce.TC.clarity)).visibleNotInlineCapiAlerts,i.visibleInlineCapiAlerts,i.filter((e=>c.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,void 0)}_trackAssistantDrag(e,t){const i=e.get();let a=i;this._subs.push(t.pipe(Gr.G(),ke.h((([e,t])=>e&&!t))).subscribe((()=>{const t=e.get();Yr.E9.l1Distance(t,a)<10||(this._params.gnar.assistantPopupDrag(t.left,t.top,this._height.get(),i.left,i.top),a=t)})))}}function Co(e,t){return(0,r.pipe)(t,D.fold((()=>e),(({feedId:t})=>e.filter((e=>"pushAssistantFeed"===e.type&&e.feedId!==t)))))}function ko(e,t){if(e.isSingleCardAssistant){const i=(0,r.pipe)(function(e){const t=e.type;switch(t){case d.WT.gButton:case d.WT.card:return D.some({id:E.D.GButton.DEFAULT_GBUTTON_ID,getContent:E.D.GButton.getContent});case d.WT.emogenie:return D.some({id:E.D.GButton.TONE_GBUTTON_ID,getContent:E.D.GButton.getContent});case d.WT.getStartedChecklist:return D.some({id:E.D.GButton.GET_STARTED_GBUTTON_ID,getContent:E.D.GButton.getContent});case d.WT.proofitRequest:case d.WT.proofitReview:return D.some({id:E.D.Proofit.ID,getContent:E.D.Proofit.getContent});default:(0,Be.L0)(t)}}(t),D.getOrElse((()=>({id:E.D.GButton.DEFAULT_GBUTTON_ID,getContent:E.D.GButton.getContent}))));return e.sduiEngine.sduiManager.state.pipe(_.U((e=>i.getContent(e,i.id))),ke.h(D.isSome),_.U(Ae.MH),Pe.P(),Z.M(e.sduiEngine.sduiManager.state),_.U((([e,i])=>{const a=t.type===d.WT.card?t.alertId:null;return(0,r.pipe)(D.fromNullable(a),D.chain((e=>E.D.getByAlertId(i,e))),D.map((e=>e.id)),D.fold((()=>({initialSduiItemId:D.none,openingButtonActions:e.actions})),(t=>({initialSduiItemId:D.some(t),openingButtonActions:e.actions}))))})),_.U((({initialSduiItemId:i,openingButtonActions:a})=>{const n=Co(a,e.sduiEngine.sduiFeedManager.currentFeed),s=E.f.create(n);return(0,r.pipe)(i,D.fold((()=>((t.type===d.WT.proofitRequest||t.type===d.WT.proofitReview)&&n.some((e=>"pushAssistantFeed"===e.type))&&e.gnar.proofitButtonClick("gmail_toolbar"),s)),(e=>({...s,actions:s.actions.map((t=>"pushAssistantFeed"===t.type?{...t,cardId:e}:t))}))))}))).subscribe((t=>e.cardsViewModel.actionEvents.next(t)))}return t.type===d.WT.emogenie?e.assistantLayoutViewModel.pushActiveView({type:g.a.Type.emogenie}):t.type===d.WT.proofitRequest?e.assistantLayoutViewModel.pushActiveView({type:g.a.Type.proofitRequest}):t.type===d.WT.proofitReview?e.assistantLayoutViewModel.pushActiveView({type:g.a.Type.proofitReview}):e.assistantLayoutViewModel.pushActiveView({type:g.a.Type.default}),k.w.EMPTY}!function(e){e.Mock=class extends Eo{constructor(e,t){super(e,t),this.debugView=this._viewModels.pipe(me.w((e=>{if(null!==e){this._getReadyFn()(M.h.create(Yr.E9.create({top:0,left:0})),ws.of(!1))}return ws.of(null)}))),this.viewModels=this._viewModels.view()}}}(wo||(wo={}));var _o=i(18126),Ao=i(25442),Io=i(64213),To=i(44518),Mo=i(11263);class xo{constructor(e,t,i,a,n,s,r,o,l,c){this.connectionState=e,this.gnar=t,this.user=i,this._hoverProvider=a,this.document=n,this.formattingService=s,this.denaliViewAdapter=r,this.capiProxy=o,this.engine=l,this.experimentClient=c,a.setAssistantHover(r.highlightHoverProvider)}static create(e){var t;const i=new Ao.t(e.highlights,e.textObserver,e.replacementService.get(),e.layout,e.scroller,e.selectedHighlightsTracker,void 0,e.requestAwaitService,null===(t=e.formattingService)||void 0===t?void 0:t.get()),a=To.p.create(e.checkingService.get(),e.checkingServiceInitialState,e.alertsTransformer,e.alertProcessor,e.sidebarEvents,e.customEventsFilter),n=(0,Mo.r)(a,i,e.document.settings.lens("context"),(()=>{var t,i;return null!==(i=null===(t=e.getExistingAlerts)||void 0===t?void 0:t.call(e))&&void 0!==i?i:(0,Io.q)(e.alertProcessor)}),e.textObserver,(()=>e.checkingServiceInitialState.value.lastStart),e.readersAttentionFeature,e.shortenItFeature,e.snippetsFeature,e.sduiManagerFactory,e.felog);return new xo(e.connectionState,e.gnar,e.user,e.hoverProvider,e.document,e.formattingService,i,a,n,e.experimentClient)}dispose(){this.capiProxy.dispose(),this.denaliViewAdapter.dispose(),this.engine.shutdown(),this._hoverProvider.removeAssistantHover()}}var Ro=i(8467);class Fo{constructor({layout:e}){this._scroller=(0,Ro.t)({scrollToMarkRect(t,i){const a=e.textField.visibleRect.getApproximate();let n=(i&&i.paddingTop||0)-a.client.top;(n<=0||n>=a.size.height)&&(n=a.size.height/2);const s=t.top-n-a.client.top,r=t.right-t.left,o=Math.max(0,(a.size.width-r)/2);t.left,a.client.left;requestAnimationFrame((()=>e.textField.scroller.scrollBy({top:s,left:void 0})))},scrollToRange(){}})}scrollToMark(e,t){return this._scroller.scrollToMark(e,t)}}var Lo=i(85235);class Po{constructor(e){this._params=e,this.sidebarEvents=new se.xQ,this.hoverProvider=new _o.f(this._params.hoverProvider),this.selectedHighlightsTracker=this._params.highlights.getSelectedHighlightsTracker({textField:this._params.originalTextField,selectionService:this._params.selectionService}),this.positionModel=((e,t,i,a)=>{const n=t.view("page","domain").get(),s=(0,Lo.U)(e,n),r=i.view((({widgetOffset:e})=>null!=e?e:Yr.E9.zero));return{initialPositionOffset:r,updateInitialPositionOffset:e=>{Yr.E9.equals(e,r.get())||a.field.patchFieldSettings({fieldId:s,fieldSettings:{widgetOffset:e}})}}})(this._params.originalTextField,this._params.state,this._params.fieldSettings,this._params.actions),this.isTextFieldEmpty=this._params.textObserver.contentChanges.async.pipe(_.U((e=>""===e.newText.trim())),A.x()),this._checkingService=null}setCheckingService(e){this._checkingService=e}getCheckingServiceState(){var e;return null===(e=this._checkingService)||void 0===e?void 0:e.state.value}createIntegration(e){var t,i;const{layout:a,highlights:n,textObserver:s,replacementService:r,alertProcessor:o,state:l,document:c,requestAwaitService:d,formattingService:u,sduiManagerFactory:p}=this._params;if(null==this._checkingService)return null;const m=null===(i=(t=this._params).getCheckingServicePreviousState)||void 0===i?void 0:i.call(t);m&&(this._checkingService.state.value=m);const g=this._params.createAssistantScroller?this._params.createAssistantScroller():new Fo({layout:a}),{user:h}=l.get();return xo.create({layout:a,alertProcessor:o,connectionState:l.view((e=>e.connection)),highlights:n,textObserver:s,replacementService:r,checkingService:this._checkingService.lazyCheckingService,checkingServiceInitialState:this._checkingService.state,gnar:e.gnar,felog:e.felog,user:{isPremium:h.premium,isAnonymous:h.anonymous,experiments:h.experiments,customFields:h.customFields,isGrammarlyEmployee:Di.n5.isGrammarlyEmployee(h),isTestUser:Di.n5.isTestUser(h)},hoverProvider:this.hoverProvider,selectedHighlightsTracker:this.selectedHighlightsTracker,scroller:g,sidebarEvents:this.sidebarEvents,document:c,alertsTransformer:this._params.alertsTransformer,requestAwaitService:d,formattingService:u,getExistingAlerts:this._params.getExistingAlerts?()=>this._params.getExistingAlerts?this._params.getExistingAlerts():null:void 0,readersAttentionFeature:e.readersAttentionFeature,shortenItFeature:e.shortenItFeature,snippetsFeature:e.snippetsFeature,experimentClient:e.experimentClient,sduiManagerFactory:p,customEventsFilter:this._params.customEventsFilter})}dispose(){var e;null===(e=this._checkingService)||void 0===e||e.state.dispose()}}},11263:(e,t,i)=>{i.d(t,{r:()=>G});var a=i(57050),n=i(35214),s=i(40327),r=i(29981),o=i(73353),l=i(21729),c=i(5114),d=i(83078),u=i(51072),p=i(38983);var m=i(8482),g=i(65421),h=i(65451),v=i(74850),f=i(25938),w=i(80358),b=i(63513),S=i(34101),y=i(6488),E=i(79227),C=i(68169),k=i(95362),_=i(5008),A=i(43320),I=i(35301),T=i(85654),M=i(55360),x=i(9922),R=i(67434),F=i(41398),L=i(2834),P=i(78674),N=i(77176),B=i(98403),U=i(95195),D=i(95574),V=i(71249),O=i(31903),H=i(82890);const G=(e,t,i,G,W,j,z,q,K,Z,X)=>{const J=v.Y.create("createEngine"),Q=new x.w.Keeper,Y=function(e,t,i){const n=p.h.create(c.none),r=p.h.create(c.none);return{score:p.h.create(c.none),scoreStatus:p.h.create(c.none),title:p.h.create(void 0),textInfo:p.h.create(c.none),checkingState:p.h.create(e.checkingState),asyncChecksState:p.h.create(e.asyncChecksState),context:i,contextCompleteness:i.view(l.j.calculateCompleteness),updateContext:e=>{const t=!o.R$.eq.equals(i.get(),e);return i.set(e),t},defaultContext:n,updateDefaultContext:e=>{const t=!(0,s.pipe)((0,a.bc)([n.get(),e],d.vB(o.R$.eq.equals)));return n.set(e),t},documentText:t.getText(),documentLength:p.h.create({full:t.getTextLength(),trimmed:t.getTextLength()}),counters:p.h.create(l.dM.group.empty),calculateStats:()=>u.Vi(e.requestDocStats).then((e=>(r.set(c.some(e)),e))),recentDocumentStats:r}}(e,t,i),$=t.changes.pipe(R.R(((e,i)=>f.RI.isReset(i)?(0,s.pipe)(i.text,U.g_((()=>t.getText()),a.yR)):f.RI.isDelta(i)?(0,s.pipe)(f.RI.resFromText(e).compose(i),D.VS((e=>e.text)),U.g_((()=>t.getText()),a.yR)):e),""));Q.push(e.events.pipe(F.M($),L.b((([e,t])=>{if("alert_received"===e.kind){const i=(0,g.IM)(e.alert,h.Q.fromString("fake"));m.$.isConsistentWithText(i,t)||(X.alerts.inconsistentAlertWithText("assistant"),(0,r.i)(J,i,t,"logging"))}}))).subscribe(),e.events.pipe(L.b((t=>{Y.checkingState.set(e.checkingState),w.hX.is("text_info")(t)?Y.textInfo.set(c.some(t.data)):w.hX.is("finish")(t)?(Y.score.set(t.score),Y.scoreStatus.set(t.scoreStatus)):w.hX.is("feedback_ack")(t)?((0,s.pipe)(t,c.fromPredicate(w.hX.isUserFeedbackWithGeneralScore),c.map((e=>e.outcomeScores.GeneralScore)),c.map((e=>Math.trunc(100*e))),d.bw((e=>Y.score.modify((0,a.ls)(c.map((t=>({...t,rank:e}))),d.vx(c.some({errorRateScore:0,rank:e}))))))),(0,s.pipe)(t,c.fromPredicate(w.hX.isUserFeedbackWithScoreStatus),c.map((e=>e.scoreStatus)),d.bw((e=>Y.scoreStatus.set(c.some(e)))))):w.hX.is("session_started")(t)&&Y.updateDefaultContext(t.defaultDocumentContext)}))).subscribe(),e.events.pipe(L.b((e=>{(w.hX.is("session_started")(e)||w.hX.is("finish")(e))&&(0,s.pipe)(Z,c.map((t=>t.pushStartFinishEvent(e))))}))).subscribe(),W.contentChanges.async.pipe(P.b(300),N.U((e=>e.newText)),N.U((e=>({full:e.length-1,trimmed:e.trim().length}))),L.b(B.wW(Y.documentLength))).subscribe()),(0,s.pipe)(j(),c.map((e=>{Y.updateDefaultContext(o.R$.parseDefault(e.defaultDocumentContext))})));const ee=new M.Xr,te=new k.Ek,ie=(0,n.fold)((0,n.getEndomorphismMonoid)())(V.oA([c.fromNullable(null==z?void 0:z.takeawaysFeedbackStore.addFeedbackToRawAlertTransformer),c.some((e=>(0,s.pipe)(q.get(),c.fold((()=>e),(t=>t.addStateToRawAlertTransformer(e)))))),c.some((e=>(0,s.pipe)(K.get(),c.fold((()=>e),(t=>t.addSnippetsTriggerToAlert(e))))))])),ae=new S.a,ne=new C.SC(ee,te,(()=>t.getContents().delta),e.events,e,Y.counters,ie,void 0,ae),se=y.e.create(ne.state),re=new E.k(se,ne._ops);Q.push(A.R.init(A.R.UserTextChangesSync.create(t),e.events,_.n.ignoreTEResult(e),_.n.ignoreResult(ee),te,_.A.merge([ne])).subscribe()),e.loadAlerts(G()),ne.flushAlerts();const oe=c.some(I.J.CategoriesModel.create(e.events,e,ne.state,re,b.JW.ScopeType.GLOBAL)),le=c.some(T.k.create(se)),ce=(0,s.pipe)(Z,c.map((t=>{const i=new O.Q(e),a=t.createSDUIManager(ne.state,ae.getByRawAlertId.bind(ae));return{sduiManagerFactory:t,sduiFeedbackService:i,sduiManager:a,sduiFeedManager:new H._(a.state)}})));return{alertsList:ne,alertsReader:se,alertsService:re,positionManager:ee,getByRawAlertId:ae.getByRawAlertId.bind(ae),sessionModel:Y,mutedAlertsCategoriesModel:oe,mutingAlertsReader:le,shutdown:()=>{ne.dispose(),Q.dispose(),(0,s.pipe)(ce,c.map((e=>{e.sduiManager.dispose(),e.sduiFeedManager.dispose()})))},sduiEngine:ce}}},9781:(e,t,i)=>{i.d(t,{aU:()=>rt,X5:()=>ot,n:()=>lt});var a,n=i(57050),s=i(35214),r=i(5114),o=i(40327),l=i(88921),c=i(50622),d=i(25913),u=i(9671),p=i(38152),m=i(48081),g=i(5178),h=i(19654),v=i(2844),f=i(75003),w=i(81301),b=i(77176),S=i(28043),y=i(9922),E=i(16118),C=i(22232),k=i(83078),_=i(38983);!function(e){e.equals=(e,t)=>"score"in e&&"score"in t?e.score===t.score:e.type===t.type}(a||(a={}));class A{constructor(e,t,i,s,l,c){this._sessionModel=e,this._layoutVM=t,this._modalManager=i,this._user=s,this._gnar=l,this._closeAssistant=c,this.showSetGoalsActionButton=_.h.create(!0),this.showSettingsActionButton=_.h.create(!0),this.close=()=>{this._closeAssistant()},this.score=v.aj([this._sessionModel.score.view(r.map((e=>({capiScore:e.rank})))),this._sessionModel.checkingState]).pipe(b.U((([e,t])=>(0,o.pipe)(e,r.map((e=>({...e,isLoading:"idle"!==t}))))))),this.summary=this._sessionModel.textInfo.view((0,n.ls)(r.chain((e=>e.messages)),r.map((e=>e.assistantHeader)),r.getOrElse((()=>"Looking good so far")),(e=>({content:e})))),this.logoScore=(0,v.aj)([this._layoutVM.activeView,this.score]).pipe(b.U((([e,t])=>(0,o.pipe)(t,r.fold((()=>({type:"logo"})),(t=>e.type!==f.a.Type.default?{type:"logo"}:{type:"score",score:t}))))),S.x(a.equals)),this.visibility=this._layoutVM.activeView.view((e=>e.type===f.a.Type.default?"visible":"hidden")),this._subs=new y.w.Keeper,this._trackHeaderMessageChanges(),this._trackToShowActionButtons()}open(e){if("setGoals"===e)this._subs.push(this._modalManager.show(w.Iy.setGoals("user")).subscribe());else(0,C.vE)(e)}_trackHeaderMessageChanges(){const e=this.summary.pipe(E.G()).subscribe((([e,t])=>{var i,a;this._gnar.assistantHeaderMessageUpdate(e.content,t.content,null===(i=(0,o.pipe)(this._sessionModel.textInfo.get(),r.toUndefined))||void 0===i?void 0:i.wordsCount,null===(a=(0,o.pipe)(this._sessionModel.score.get(),k.Fc))||void 0===a?void 0:a.rank)}));this._subs.push(e)}_trackToShowActionButtons(){const e=this._user.subscribe((e=>{e.isAnonymous?(this.showSetGoalsActionButton.set(!1),this.showSettingsActionButton.set(!1)):(this.showSetGoalsActionButton.set(!0),this.showSettingsActionButton.set(!0))}));this._subs.push(e)}dispose(){this._subs.dispose()}}var I=i(59456),T=i(55419),M=i(66896),x=i(98403),R=i(85715);class F{constructor(e,t,i,a,n,s,l){this._lensPreviewVM=e,this._layoutVM=t,this._readersAttentionVM=i,this._emogenieService=a,this._session=n,this._readersAttentionPredictionCardState=s,this._gnar=l,this._subs=new y.w.Keeper,this.previewState=_.h.create({kind:T.fA.hidden}),this.previewFlow=R.Z.fromSideEffect((e=>{switch(e.action.key){case"tone":{const e=this._emogenieService.viewState.view("prevalentEmotion").get();return e&&this._gnar.emogeniePredictionButtonClick(e.name),this._layoutVM.pushActiveView({type:f.a.Type.emogenie})}case"readersAttention":return this._readersAttentionVM.openPanel({type:f.a.ReadersAttention.Caller.Type.predictionWidget});default:(0,C.vE)(e.action)}}),this.previewState),this._previewState=(0,o.pipe)(v.aj([this._emogenieService.viewState.view((e=>r.fromNullable(e.settings.hiddenReport?void 0:e.prevalentEmotion))),this._emogenieService.viewState.view("brandToneOffImageUrl"),this._readersAttentionPredictionCardState,this._session.documentLength,this._lensPreviewVM.getLens(M.R.SpecialId.PredictionEmogenie),this._lensPreviewVM.getLens(M.R.SpecialId.PredictionTakeaways)]),b.U((([e,t,i,a,n,s])=>(r.isSome(e)||r.isSome(i))&&a.trimmed>0?{kind:T.fA.visible,tone:(0,o.pipe)(e,r.map((e=>({emotion:e,alertsCount:n.count,brandToneOffImageUrl:t})))),readersAttention:(0,o.pipe)(i,r.map((e=>({...e,alertsCount:(0,o.pipe)(i,r.map((e=>e.alertsCount)),r.getOrElse((()=>s.count)))}))))}:a.trimmed>0?{kind:T.fA.zero}:{kind:T.fA.hidden}))),this._subs.push(this._previewState.subscribe(x.wW(this.previewState)))}dispose(){this._subs.dispose()}}var L=i(19043),P=i(43955),N=i(17771),B=i(90361),U=i(74660),D=i(85985),V=i(14601),O=i(15646),H=i(35416);class G{constructor(e,t,i,a,s){this._feature=e,this._assistantLensState=t,this._assistantCardActions=i,this._getAlertById=a,this._getActiveAlert=s,this._subs=new V.w,(0,o.pipe)(this._feature,k.bw((e=>{var t,i;this._subs.add((t=this._assistantCardActions,i=e=>this._getAlertById(e),t.pipe(D.h(O.lY.isTakeawayAction)).pipe(b.U((e=>(0,o.pipe)(i(e.alertId),r.chain((t=>N.Y(r.option)({id:r.some(t.id),rawId:U.bZ.getRawId(t),isLikelyToRead:(0,o.pipe)(t.extraProperties.takeaway,r.map((e=>e.isLikelyToBeRead))),score:(0,o.pipe)(t.extraProperties.takeaway,r.map((e=>e.score))),textRange:r.fromNullable(t.getHighlightRanges()[0]),action:r.some(e)}))),k.Fc))),D.h(B.fQ))).subscribe((t=>{e.tracking.onTakeawayUserAction(t.isLikelyToRead,t.score,t.action,t.textRange)}))),this._subs.add(function(e,t,i){return e.pipe(b.U(H.nL.getActiveAlert(i)),b.U(r.map((e=>e.id)))).pipe(b.U(k.Fc),D.h(B.fQ),S.x(),b.U((0,n.ls)(t,r.chain((e=>(0,o.pipe)(e.extraProperties.takeaway,r.map((({score:t})=>({score:t,textRange:e.getHighlightRanges()[0]})))))),k.Fc)),D.h(B.fQ))}(this._assistantLensState,(e=>this._getAlertById(e)),this._getActiveAlert).subscribe((t=>{e.tracking.onKeyTakeawayCardShow(t.score,t.textRange)})))})))}dispose(){this._subs.unsubscribe()}}var W=i(31536),j=i(16868),z=i(66866),q=i(66310),K=i(91402),Z=i(40151),X=i(76974),J=i(78674),Q=i(60797),Y=i(41398),$=i(95195);function ee(e,t,i,a,n){return{id:"changeAlertEffect",when:M.R.isWithAlertsId,what:H.nL.Effect.SwitchAlert.create(e.actionEvents.pipe(q.w((e=>{const s=t.get();if(!H.nL.hasCards(s))return K._(new C.ej("Cannot update state without cards"));switch(e.type){case O.lY.Type.alertMinicardButtonClick:return(0,o.pipe)(i.getRegistered(e.alertHighlight.alert.id),r.fold((()=>(n.warn("somehow we got click on non registered alert",e.alertHighlight.alert),Z.E)),(()=>X.of(e.alertHighlight))));case O.lY.Type.cardMatchesNavigationButtonClick:const t=e.transitionTo;switch(t.kind){case"anotherAlert":return(0,o.pipe)("right"===e.direction?a.nextAlert(t.card):(0,o.pipe)(a.prevAlert(t.card),k.vx(a.anyRegisteredAlert(t.card))),r.fold((()=>Z.E),(e=>X.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,o.pipe)(i.getRegistered(t.card.activeAlert.id),r.fold((()=>Z.E),(()=>X.of({alert:t.card.activeAlert,highlightIndex:t.highlightIndex}))));default:return(0,C.vE)(t)}default:return Z.E}})),b.U((e=>({alertHighlight:e,alertSource:U.l$.sidebar,options:{order:"lensOrder"}})))))}}function te(e,t,i){const a=e.pipe(D.h(H.nL.hasCards),J.b(0),D.h((e=>e.currentLens.items.size>0&&r.isNone(H.In.getActiveItem(e.currentLens))&&i.get())),b.U((e=>(0,o.pipe)(e.currentLens.items.getAt(0),r.chain(m.O.checksFeedItemsMapper((e=>r.some(e.activeAlert)),(e=>r.some(e.activeAlert)),(()=>r.none),(()=>r.none),(()=>r.none))),k.bw((()=>t.set(r.some(j.CV.skip))))))),Q.oA,D.h((e=>e.state.type===U.bZ.State.Type.REGISTERED)),S.x());return{id:"focusFirstCardSideEffect",when:e=>e!==M.R.SpecialId.PredictionTakeaways&&e!==M.R.SpecialId.PredictionEmogenie,what:H.nL.Effect.SwitchLens.create(a.pipe(Y.M(e),b.U((([e,t])=>({lensId:t.currentLens.id,alertSource:U.l$.text,options:{order:"lensOrder",toFocus:H.nL.Effect.FocusBehavior.focusAlert({alert:e,highlightIndex:0})}})))))}}function ie(e,t,i){const a=e.pipe(b.U((e=>a=>e.type===z.ay.Type.AppliedAlertAnimationFinished&&a.currentLens.meta.filter(e.alert)&&H.nL.hasItems(a)?a.patch({currentLens:(0,o.pipe)($.Y3((()=>U.bZ.isApplicableAlert(e.alert)?t.finishApplyAnimation([e.alert])(a.currentLens):a.currentLens),(e=>i.error("could not update lens state on applied animation finish",e))),$.fS((()=>a.currentLens))),alertSource:e.alert.state.source}):a)));return{id:"onAlertApply",when:n.W8,what:H.nL.Effect.Applicator.create(a)}}function ae(e,t){return{id:"lensChangeEffect",when:n.W8,what:H.nL.Effect.SwitchLens.create(e.pipe(Y.M(t),D.h((([e,t])=>e.lensId!==t)),b.U((([e])=>({lensId:e.lensId,alertSource:U.l$.sidebar,options:{order:"lensOrder",toFocus:e.focusFirstCard?H.nL.Effect.FocusBehavior.focusFirst:H.nL.Effect.FocusBehavior.noFocus}})))))}}var ne=i(65060),se=i(5920),re=i(16892),oe=i(48521),le=i(6100),ce=i(55415);const de=(e,t)=>i=>(0,n.zG)(t,r.fold((()=>r.some({lens:i,newItem:r.none})),(t=>(0,n.zG)(e,r.fold((()=>r.some({lens:i,newItem:r.some(ne.g.create(t,re.s.PositionState.empty,oe.o.VisualState.initial({type:"rendered",clockwise:!0},!1)))})),(e=>(0,n.zG)(ne.g.create(t,e.positionState,e.visualState),r.fromPredicate((t=>ne.g.hashCodeOwnFields(t)!==ne.g.hashCodeOwnFields(e))),r.map((e=>({lens:i,newItem:r.some(e)}))))))))));var ue=i(37539),pe=i(32952),me=i(19751),ge=i(8125),he=i(73975),ve=i(74850),fe=i(71249),we=i(16314);const be=ve.Y.create("ReadersAttentionItemSideEffects");function Se(e){return e.pipe(b.U((()=>n.yR)))}function ye(e,t){return e.pipe(D.h(we.Vl),b.U((e=>i=>i.patch({currentLens:(0,o.pipe)(i.currentLens.items.find((t=>t.id===e.id)),r.fold((()=>(be.error("Cannot focus non-existing ReadersAttentionItem."),i.currentLens)),(()=>(0,n.MZ)((0,o.pipe)(i.currentLens,t.selectItemById(e.id))))))}))))}class Ee{constructor(e,t,i,a,s,o,l,c,d){this._cardActions=e,this._readersAttentionItemInfo=t,this._assistantLensState=i,this._checksFeedCapabilities=a,this._heatmapVisible=s,this._layoutViewModel=o,this._onDismiss=l,this._gnar=c,this._statistics=d,this._subs=new V.w,this.actions=new pe.xQ,this._relayBaseActions=this.actions.pipe(D.h((0,ge.Kg)(O.eI.isStartTransitionTo,O.eI.isCompleteTransitionTo))).subscribe((e=>this._cardActions.next(e))),this._goToReadersAttentionView=this.actions.pipe(D.h(we.Q)).subscribe((e=>{this._gnar.attentionScoreFullCardSeeSuggestionsButtonClick(),this._layoutViewModel.pushActiveView({type:f.a.Type.readersAttention,caller:{type:f.a.ReadersAttention.Caller.Type.readersAttentionItem,item:e.item}})})),this._goToFeedbackView=this.actions.pipe(D.h(we.RJ)).subscribe((()=>{this._layoutViewModel.pushActiveView({type:f.a.Type.feedback})})),this._dismissItem=this.actions.pipe(D.h(we.l9)).subscribe((()=>{this._gnar.attentionScoreFullCardDismissButtonClick(),this._onDismiss()})),this._toggleHeatmapVisibility=this._assistantLensState.pipe(b.U((e=>(0,n.zG)($.DT(H.nL.hasItems,(()=>e.currentLens.id))(e),$.UI(H.nL.Prism.getLens().get),$.tS((e=>(0,n.zG)(e,H.In.getActiveItemOfType(ne.m),$.Yo((()=>e.id)),$.UI((e=>e.id)))))))),me.skipBy($.Eh(he.yv,he.yv))).subscribe($.g_((e=>{e!==M.R.SpecialId.PredictionTakeaways&&this._heatmapVisible.set(!1)}),(()=>this._heatmapVisible.set(!0)))),this._activeCardOpenStats=null,this._trackOpenClose=this._assistantLensState.pipe(b.U((e=>(0,n.zG)(r.fromPredicate(H.nL.hasItems)(e),r.map(H.nL.Prism.getLens().get),r.chain(H.In.getActiveItemOfType(ne.m)),r.fold(n.jv,n.W8)))),S.x()).subscribe((e=>{(0,n.zG)(this._readersAttentionItemInfo.get(),r.map((e=>ue.T.prism.reverseGet(e.attentionScore))),k.bw((t=>{const i=this._statistics.wordsCount.get();e?(this._gnar.attentionScoreFullCardShow(i,t),this._activeCardOpenStats={numWords:i,attentionScore:t}):this._activeCardOpenStats&&(this._gnar.attentionScoreFullCardHide(i,t,this._activeCardOpenStats.numWords,this._activeCardOpenStats.attentionScore),this._activeCardOpenStats=null)})))})),this._subs.add(this._relayBaseActions),this._subs.add(this._toggleHeatmapVisibility),this._subs.add(this._goToReadersAttentionView),this._subs.add(this._goToFeedbackView),this._subs.add(this._dismissItem),this._subs.add(this._trackOpenClose)}getApplicatorEffects(){return e=this._readersAttentionItemInfo,t=this.actions,i=this._checksFeedCapabilities,(0,o.pipe)([[Se(e),"newReadersAttentionInfo"],[ye(t,i),"focusReadersAttentionItem"]],fe.UI((([e,t])=>({id:`readersAttentionFeedItem.effects.${t}`,when:M.R.isMainLens,what:H.nL.Effect.Applicator.create(e)}))));var e,t,i}dispose(){if(this._activeCardOpenStats){const e=this._activeCardOpenStats.numWords,t=this._activeCardOpenStats.attentionScore;(0,n.zG)(this._readersAttentionItemInfo.get(),r.map((e=>ue.T.prism.reverseGet(e.attentionScore))),k.bw((i=>{this._gnar.attentionScoreFullCardHide(this._statistics.wordsCount.get(),i,e,t)}))),this._heatmapVisible.set(!1),this._activeCardOpenStats=null}this._subs.unsubscribe()}}var Ce,ke=i(54466);!function(e){const t=(e,t)=>e.pipe(D.h(O.lY.isCreateSnippetAction),b.U((({id:e})=>i=>{const a=(0,n.zG)(i.currentLens.items.update(e,t({type:"success",clockwise:!0})),$.g_((()=>i.currentLens.items),n.yR));return ke.sU.itemsLens.set(a,i)})));e.applicatorEffects=(e,i)=>(0,n.zG)([[t(e,i),"suggestedSnippetSuccessEffect"]],fe.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:M.R.isWithAlertsId,what:H.nL.Effect.Applicator.create(e)}))))}(Ce||(Ce={}));var _e=i(77394),Ae=i(86620),Ie=i(51540),Te=i(40081),Me=i(62346),xe=i(14464),Re=i(73582),Fe=i(92783),Le=i(4120),Pe=i(44618),Ne=i(63513),Be=i(13313),Ue=i(21619),De=i(54216),Ve=i(92485),Oe=i(91549),He=i(83167),Ge=i(20594),We=i(35607),je=i(20291),ze=i(34383),qe=i(33806),Ke=i(86775),Ze=i(11245),Xe=i(4890),Je=i(73841),Qe=i(89770),Ye=i(39920),$e=i(88772),et=i(93508),tt=i(68425),it=i(24209),at=i(17343),nt=i(95574),st=i(42040);const rt=e=>e.view((e=>(0,o.pipe)(r.fromPredicate(H.nL.hasItems)(e),r.map((e=>e.currentLens.items)),r.map((e=>e.filter((0,ge.Kg)(m.O.isAlertCard,m.O.isAlertsBundle)))),r.map((e=>e.filter((e=>"rendered"===e.visualState.transition.type)))),r.fold((()=>null),(e=>e.values()))))).pipe(et.O([]),D.h(B.Nf),E.G(),b.U((([e,t])=>{const i=new Set(e.map((e=>e.id)));return t.filter((e=>!i.has(e.id)))})),tt.J()),ot=(e,t)=>e.alertClicked.pipe(b.U((e=>(0,o.pipe)(e,r.fold(n.gn,(e=>e.alert))))),D.h(B.fQ),Y.M((e=>e.pipe(b.U((e=>H.nL.hasCards(e)&&M.R.isMainLens(e.currentLens.id)?m.O.getActiveItemWithAlert(e.currentLens):r.none)),b.U((e=>(0,o.pipe)(e,r.fold((()=>null),(e=>e.activeAlert)))))))(t)),D.h((([e,t])=>e.id!==(null==t?void 0:t.id))),b.U((([e,t])=>e))),lt=(e,t,i,a,v,y,C,T,R,N,V,K,J,Q,Y,re,oe,ue,me,he,ve,fe,we,be,Se,ye,tt,lt,ct,dt)=>{const ut=st.C8.Logging.getLogger("view_models"),pt=_.h.create(Be.A.defaultState),mt=_.h.create(n.jv),gt=_.h.create(!1),ht=_.h.create(!1),vt=_.h.create(!1),ft=Le.n5.isFree(Q.view("user").get()),wt=e=>(0,ge.W9)((()=>!ht.get()),(0,ge.W9)((e=>!vt.get()||U.bZ.isInline(e)),e)),bt=De.t.create({...De.t.defaultLensFilters,[M.R.SpecialId.Priority]:U.bZ.belongsToPriorityLens,[M.R.SpecialId.AllAlerts]:(0,ge.W9)(U.bZ.belongsToAllAlerts,(0,n.ff)(U.bZ.isTakeaway))},{...De.t.defaultTextFilters,[M.R.SpecialId.Closed]:n.jv,[M.R.SpecialId.Priority]:wt(U.bZ.belongsToPriorityLens),[M.R.SpecialId.AllAlerts]:wt((0,ge.W9)(U.bZ.belongsToAllAlerts,(0,n.ff)(U.bZ.isTakeaway))),[M.R.SpecialId.PredictionTakeaways]:e=>mt.get()(e)}),St=it.T(mt,ht,gt,vt).pipe(at.h(x.PU)),yt=Be.A.get(e.alertsList.state,e.alertsList.lensesScores,bt).subscribe(x.wW(pt)),Et=new Te.t(pt.view("lenses"),bt,e.sessionModel.scoreStatus),Ct=(0,Ve.$y)((0,Pe.a)(t).getContents),kt={features:new Set([Ge.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:Xe.j.Density.minimal,shouldAnimateAlertApply:Ge.IG.Default.shouldAnimateAlertApply,cardVisualMode:_.h.create(Xe.j.CardVisualMode.RegularLightMode)},_t=(0,Ge.Ls)(Ct,e.alertsReader,kt,(()=>X.of(r.none)),e.mutingAlertsReader),At=Oe.R.ItemFactory.create(Ct,e.mutingAlertsReader,kt,(()=>X.of(r.none))),It=(0,Ze.U)(Ct,e.alertsReader,kt,ze.T.ordAlert),Tt=_.h.create(ze.D.empty()),Mt=_.h.create(r.none),xt=_.h.create(16),Rt=(0,d.q)((()=>Ut.get().currentLens.id),(()=>Mt.get()),(()=>xt.get())),Ft=m.O.getCapabilities(_t,At,It,e.alertsReader,Ct,Tt,(()=>Ut.get().currentLens.id),Rt),Lt=new Ye.gi(m.O.equatable.structEq,m.O.defaultOrd),Pt=(0,Ye.is)(_t,Ft),Nt=new Qe.oq(e.alertsList.state,e.alertsReader,pt.view("lenses"),e.positionManager,Et,new Ye.ad((e=>e.id===M.R.SpecialId.Priority),new qe.c(It,Tt,e.alertsReader,(e=>e.id===M.R.SpecialId.PredictionTakeaways),Lt,m.O.equatable.structEq),m.O.equatable.structEq,m.O.bundlesOrd),(0,Ye.kn)(At,kt,(e=>e===M.R.SpecialId.Priority),(0,qe.E)(It,Tt,e.alertsReader,(e=>e===M.R.SpecialId.PredictionTakeaways),Pt,Ft),Ft),Ft,bt),Bt=i.get(),Ut=_.h.create(Nt.emptyState(Bt).patch({alertSource:U.l$.sidebar})),Dt=Ut.view((e=>(0,o.pipe)(r.fromPredicate(H.nL.hasItems)(e),r.map((e=>H.nL.Prism.getLens().get(e))),r.filter((e=>e.id===M.R.SpecialId.PredictionTakeaways)),r.chain(H.In.getActiveItem)))).view(r.fold((()=>n.jv),(e=>t=>Ft.hasAlert(t.id)(e)))).subscribe(x.wW(mt)),Vt=Ut.view((e=>(0,o.pipe)(r.fromPredicate(H.nL.hasItems)(e),r.map((e=>H.nL.Prism.getLens().get(e))),r.chain(H.In.getActiveItem),r.filter(ne.m),r.fold(n.jv,n.W8)))).subscribe(x.wW(ht));V.next({kind:_e.R.ChangeLens,selectedLens:Bt===M.R.SpecialId.Priority?"priority":"all"});const Ot=(0,He.u0)((()=>t.getCursor().index),Nt),Ht=new Re.x(e.alertsList,Ut,3),Gt=new w.EQ(new xe.o(e.sessionModel,Ht,me.get().isPremium,re)),Wt=new Ae.C(lt()),jt=new ke.Xx({flush:()=>t.flushChanges()},new pe.xQ,_t,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,o.pipe)(e.mutedAlertsCategoriesModel,r.map((e=>({model:e,openSuggestionsManagement:()=>self.open((0,Fe.Um)().suggestionsSettings)})))),r.some(h.B.getCardsViewModelSendToURLExperiment(Wt,re)),(()=>!1),m.O.getActiveItemWithAlert,Ft,Ut,Wt,{bufferTransitions:!0,showGbPrompt:h.B.shouldShow(me.get())}),zt=new u.y(jt.actionEvents,re,e.alertsReader),qt=new f.D(re,ve,fe,ye,tt),Kt=new P.X(v,qt,e.alertsList.state,e.alertsReader,Ut),Zt=new F(Et,qt,Kt,a,e.sessionModel,Kt.predictionCardState,re),Xt=new p.WY(Ut,Zt,Ht,Ft,re,ft),Jt=new We.o((()=>$.F2(void 0))),Qt=Xt.upgradeHookExpanded.pipe(b.U((e=>e&&ft)),S.x()).subscribe(x.wW(gt)),Yt=(0,Me.xl)(Ut,bt,St,gt),$t=new Me.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Ut,Yt,m.O.getActiveItemWithAlert,K,!0,gt),ei=(0,j.hp)(Ut,$t,_.h.create(16),Jt,t,ut),ti=new pe.xQ,ii=Ut.pipe(b.U((e=>e.currentLens.id))),ai=Kt.checklist.subscribe(x.wW(Tt)),ni=new A(e.sessionModel,qt,Gt,me,re,he),si=qt.activeView.pipe(b.U((e=>e.type)),et.O(f.a.Type.startupPlaceholder),E.G(),b.U((([e,t])=>e===f.a.Type.startupPlaceholder&&t===f.a.Type.proofitRequest))).subscribe(x.wW(vt)),ri=Xt.cardListViewportHeight.subscribe(x.wW(Mt)),oi=new g._(qt,ue,re),li=(0,o.pipe)(N,r.map((e=>new L.S(qt,e,he,re)))),ci=new Ue.mN(t,Ut,$t,e.alertsReader,m.O.getActiveItemWithAlert,(t=>{const i=t.reduce(((t,i)=>(0,o.pipe)(e.alertsReader.getById(i.alert.id),r.chain(U.bZ.getRawId),k.bw((e=>t.set(e,i))),r.fold((()=>t),(()=>t)))),new Map),a=Array.from(i.keys()).map((e=>be.alerts.getAlertById(e))).filter(B.fQ);if(a.length){const e=a.reduce(((e,t)=>l.S.ordering.greaterThanOrEqual(t,e)?t:e));return r.fromNullable(i.get(Ne.wQ.Id.create(e.id)))}return r.none})),di=rt(Ut),ui=ot(ci,Ut),pi=C.pipe(q.w(r.fold((()=>Z.E),(t=>t.initAssistantCardActionsProcessing(jt.actionEvents,e.alertsReader,Ut,di,ui))))).subscribe(),mi=T.pipe(q.w(r.fold((()=>Z.E),(t=>t.initCardActionsProcessing(jt.actionEvents,e.alertsReader,di,ui,Ut))))).subscribe(),gi=R.pipe(q.w(r.fold((()=>Z.E),(t=>t.initCardActionsProcessing(jt.actionEvents,e.alertsReader,di,Ut))))).subscribe(),hi=_.h.create((0,o.pipe)(J,r.fold((()=>j.CV.skip),(()=>U.l$.text)),r.some)),vi=(0,o.pipe)(v,r.map((e=>new Ee(jt.actionEvents,e.feedItemInfo,Ut,Ft,e.heatmap.visible,qt,(()=>e.onDismissFeedItem()),re,oe)))),fi=[(0,Ie.A7)(ci,Ut,ft),(0,o.pipe)(z.EQ.focusMarkByActiveAlert(Ut,$t,e.alertsReader,m.O.getActiveFocusableItem,ut.getLogger("MarksEffects.focusMarkByActiveAlert")),H.nL.Effect.Producer.delayed(K)),ie($t.events,Ft,ut.getLogger("createOnAlertApplySideEffect")),ee(jt,Ut,e.alertsReader,_t,ut),te(Ut,hi,Xt.autoFocusEnabled),...jt.getApplicatorEffects(),Xt.applicatorEffects,je.R7(Ut,Jt,Ft,(0,n.MZ)(jt.actionEvents),{cardsAroundActive:10,cardsBeyondViewport:10}),(0,o.pipe)((0,j.k9)(Ut,ei,hi,m.O.getActiveAlignableItem,Ft),H.nL.Effect.Producer.delayed(K)),je.XU(Ut,Jt,Ft),ae(ti,ii),ke.dv.createSendActiveAlertFeedbacksEffect(Ut,m.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,ut.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),Ke.G.getChecklistHandlerSideEffect(It,Kt.checklist,e.alertsReader,m.O.getActiveItemWithAlert,(e=>e===M.R.SpecialId.PredictionTakeaways)),...(0,o.pipe)(vi,r.fold((()=>[]),(e=>e.getApplicatorEffects()))),...Ce.applicatorEffects(jt.actionEvents,Ft.transitionTo)],wi=_.h.create(M.R.SpecialId.AllAlerts),bi=Ut.view((e=>e.currentLens.id)).pipe(D.h((e=>e===M.R.SpecialId.Priority||e===M.R.SpecialId.AllAlerts))).subscribe(x.wW(wi)),Si=(0,He.VC)(Nt,Ot,wi,Ft),yi=_.h.create(J),Ei=(0,He.Dv)((e=>M.R.isMainLens(e.currentLens.id)),Si,Ft),Ci=new He.vM(e.sessionModel.checkingState,Ut),ki=(0,o.pipe)([(0,o.pipe)((e=>He.Py.whenShouldVerifyCurrentLens(m.O.getActiveItemWithAlert,Ft)(e)&&e.currentLens.id!==M.R.SpecialId.PredictionTakeaways),He.Py.behaviorToEffect((()=>r.some(H.nL.Effect.FocusBehavior.focusNext)))),(0,o.pipe)((0,ge.W9)((()=>r.isSome(yi.get())),He.Py.whenNoActiveCard),He.Py.behaviorToEffect((e=>(0,o.pipe)((e=>{const t=(0,r.fromPredicate)((0,ge.Kg)(m.O.isAlertCard,m.O.isAlertsBundle));return(0,o.pipe)(yi.get(),r.chain((i=>(yi.set(r.none),H.nL.hasCards(e)?(0,o.pipe)(e.currentLens.items.reduce(((e,a)=>(0,o.pipe)(e,r.alt((()=>(0,o.pipe)(a,t,r.chain((e=>r.fromNullable(e.alerts.find((e=>e.id.startsWith(i+"_"))))))))))),r.none),r.map((t=>({alert:t,highlightIndex:0,lensId:e.currentLens.id})))):r.none))))})(e),r.map((e=>H.nL.Effect.FocusBehavior.focusAlert(e))))))),(0,o.pipe)((0,ge.W9)((()=>Xt.autoFocusEnabled.get()),(0,ge.W9)(He.Py.whenFirstOpeningDocumentWithAlerts(Ci),He.Py.whenNoActiveCard)),He.Py.behaviorToEffect((()=>r.some(H.nL.Effect.FocusBehavior.focusFirst))))],(0,s.fold)((0,s.getFunctionMonoid)(r.getFirstMonoid())())),_i=He.Py.getStateTransformer(ki,Ei,e.alertsReader,Ft,(e=>Xt.autoFocusEnabled.get()&&"text"!==e.alertSource),n.Q1,wi),Ai=le.v.Items.getItemsPositionsUpdateTransformer(Ft),Ii=(0,o.pipe)(v,r.fold((()=>$e.t.nothing),(e=>{return t=e.feedItemInfo,({state:e,metadata:i})=>{if(!H.nL.hasItems(e)||!M.R.isMainLens(e.currentLens.id)||!H.nL.isLensview(e))return $.t$({state:e,metadata:i});const a=(0,n.zG)(se.l.find(e.currentLens.items,ne.m),r.map(ce.ei("value")));return(0,n.zG)(e,H.nL.getLens,r.chain(de(a,t.get())),r.map((({lens:t,newItem:i})=>H.nL.Prism.getLens().compose(le.v.Prism.items).set((0,n.zG)(a,r.fold((()=>t.items),(e=>t.items.remove(e.id))),(e=>(0,n.zG)(i,r.fold((()=>e),(t=>e.add(t)))))),e))),r.getOrElse((()=>e)),(e=>$.t$({state:e,metadata:i})))};var t}))),Ti=(0,n.ls)(_i,nt.L9(Ai),nt.L9(Ii)),Mi=new Je.l(Ut,Nt,e.alertsReader,e.alertsService,fi,m.O.getActiveItemWithAlert,Ti),xi=ti.pipe(b.U((({lensId:e})=>e)),D.h((e=>e===M.R.SpecialId.AllAlerts||e===M.R.SpecialId.Priority)),S.x()).subscribe((e=>{i.set(e),V.next({kind:_e.R.ChangeLens,selectedLens:e===M.R.SpecialId.Priority?"priority":"all"})})),Ri=qt.activeView.pipe(b.U((e=>{switch(e.type){case f.a.Type.default:return i.get();case f.a.Type.emogenie:return M.R.SpecialId.PredictionEmogenie;case f.a.Type.readersAttention:return M.R.SpecialId.PredictionTakeaways;case f.a.Type.readersAttentionHelp:return M.R.SpecialId.Closed;case f.a.Type.proofitReview:return M.R.SpecialId.RealTimeProofit;default:return null}})),D.h(B.fQ),S.x(),b.U((e=>[e,e===M.R.SpecialId.AllAlerts||e===M.R.SpecialId.Priority]))).subscribe((([e,t])=>ti.next({lensId:e,focusFirstCard:t}))),Fi=new W.X(Q,Y,dt,ue),Li=new G(v,Ut,jt.actionEvents,(t=>e.alertsReader.getById(t)),m.O.getActiveItemWithAlert),Pi=y.pipe(q.w(r.fold((()=>Z.E),(t=>t.initAssistantSession(jt.actionEvents,e.alertsReader,Ut,e.alertsService,e.alertsList.state))))).subscribe(),Ni=jt.actionEvents.pipe(D.h(O.lY.isOpenIdeasGallery)).subscribe((()=>self.open((0,Fe.Um)().grammarlyIdeasSales,"_blank"))),Bi=(0,I.W)(we),Ui=jt.actionEvents.subscribe((0,n.ls)((0,c.JH)(e.alertsReader,c.SV.Source.assistant),k.bw((e=>{(async()=>{e.kind===c.SV.Kind.alertApply&&e.source===c.SV.Source.assistant&&await ct.incrementCounter(),Se.next(e)})()}))));return{lensState:Ut,cardsViewModel:jt,lensPreviewViewModel:Et,cardsListScrollManager:Jt,upgradeViewModel:Ht,alertProcessor:be,assistantHeaderViewModel:ni,assistantLayoutViewModel:qt,assistantCardListViewModel:Xt,lensChanged:ti,predictionsPreviewViewModel:Zt,assistantFeedbackViewModel:oi,assistantSettingsViewModel:Fi,assistantProofitViewModel:li,readersAttentionViewModel:Kt,readersAttentionItemViewModel:vi,assistantModalManager:Gt,marksViewModel:$t,gnar:re,positionViewModel:Bi,user:me,capabilities:Ft,remSize:xt,isSingleCardAssistant:!1,dispose:()=>{Ui.unsubscribe(),Li.dispose(),Dt.unsubscribe(),ai.unsubscribe(),jt.dispose(),Mi.dispose(),$t.dispose(),Zt.dispose(),xi.unsubscribe(),yt.unsubscribe(),Ri.unsubscribe(),ni.dispose(),Xt.dispose(),Gt.hideAll(),Kt.dispose(),bi.unsubscribe(),ri.unsubscribe(),Pi.unsubscribe(),Vt.unsubscribe(),si.unsubscribe(),Ni.unsubscribe(),mi.unsubscribe(),gi.unsubscribe(),pi.unsubscribe(),Qt.unsubscribe(),(0,o.pipe)(li,k.bw((e=>e.dispose()))),(0,o.pipe)(vi,k.bw((e=>e.dispose()))),zt.dispose()}}}},9671:(e,t,i)=>{i.d(t,{t:()=>c,y:()=>o});var a=i(15090),n=i(15646),s=i(85985),r=i(77176);class o{constructor(e,t,i){this._cardActions=e,this._gnar=t,this._alertsReader=i,this._subs=[c(this._cardActions,this._gnar,"assistant"),l(this._cardActions,this._gnar),a.g.createSubscription(this._cardActions,this._gnar,this._alertsReader.getById)]}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}const l=(e,t)=>e.pipe(s.h((e=>e.type===n.lY.Type.sduiCardAction&&"learn-more"===e.sourceId))).subscribe((()=>{t.learnMoreButtonClick()})),c=(e,t,i)=>e.pipe(r.U((e=>e.type)),s.h((e=>e===n.lY.Type.muteAlertCategory||e===n.lY.Type.undoMuteAlertCategory||e===n.lY.Type.mutedAlertSuggestionManagementClick||e===n.lY.Type.mutedAlertSuccessShow))).subscribe((e=>{switch(e){case n.lY.Type.muteAlertCategory:t.mutedAlertsCardTurnOffButtonClick(i);break;case n.lY.Type.undoMuteAlertCategory:t.mutedAlertsTurnBackOnButtonClick(i);break;case n.lY.Type.mutedAlertSuggestionManagementClick:t.suggestionManagementClick(i);break;case n.lY.Type.mutedAlertSuccessShow:t.categoryDeactivatedShow(i)}}))},38152:(e,t,i)=>{i.d(t,{WY:()=>O,lo:()=>a});var a,n=i(57050),s=i(40327),r=i(48081),o=i(55419),l=i(73582),c=i(62111),d=i(90361),u=i(66896),p=i(74660),m=i(70023),g=i(94785),h=i(9922),v=i(77176),f=i(95300),w=i(28043),b=i(2834),S=i(95093),y=i(32952),E=i(16782),C=i(85985),k=i(24209),_=i(78674),A=i(60797),I=i(57091),T=i(50628),M=i(66310),x=i(14811),R=i(41398),F=i(16118),L=i(35416),P=i(6100),N=i(27125),B=i(5114),U=i(8125),D=i(38983),V=i(85715);!function(e){let t;!function(e){e.clickOnEmpty="clickOnEmpty",e.clickOnFakeCard="clickOnFakeCard",e.clickOnUpgradeCard="clickOnUpgradeCard"}(t=e.Type||(e.Type={}))}(a||(a={}));class O{constructor(e,t,i,O,H,G){this._lensState=e,this._predictionsVM=t,this._upgradeViewModel=i,this._capabilities=O,this._gnar=H,this._isYellowUnderlinesExperimentActive=G,this._subs=new h.w.Keeper,this.activeAlert=this._lensState.pipe(v.U((e=>L.nL.hasCards(e)&&u.R.isMainLens(e.currentLens.id)?r.O.getActiveItemWithAlert(e.currentLens):B.none)),v.U((e=>(0,s.pipe)(e,B.fold((()=>null),(e=>e.activeAlert)))))),this.successView=D.h.combine(this._lensState,this._predictionsVM.previewState,((e,t)=>P.v.WithSuccess.State.isInSuccess(this._capabilities)(e)?t.kind===o.fA.visible?B.some(N.g.SuccessType.applied):B.some(N.g.SuccessType.small):B.none)),this._premiumAlertsCount=this._upgradeViewModel.advancedAlerts.view((0,n.ls)(B.map((e=>e.count)),B.getOrElse((()=>0)))),this.havePremiumAlerts=this._premiumAlertsCount.view((e=>e>0)),this._upgradeHookExpanded=new f.X(!1),this.upgradeHookExpanded=(0,s.pipe)(this._upgradeHookExpanded,w.x()),this.upgradeHookFlow=(0,s.pipe)((0,m.d)(this._upgradeViewModel.advancedAlerts),V.Z.extendActions(b.b((e=>{e.key===g.n.State.expanded?"upgrade"===e.action.kind?(this._upgradeViewModel.openUpgradeUrl(l.L.Place.assistantCardList),this._gnar.getPremiumButtonClick("advancedIssues","SeeWhatsInPremium",void 0,void 0,void 0,"advancedIssues","singleCardAssistant"),(0,c.T)().upgradeHooks.clickUpgradeHook("advancedIssues","singleCardAssistant")):"onUpgradeButtonMount"===e.action.kind&&this._onUpgradeButtonMount.next(e.action.element):e.key===g.n.State.minimized&&"onClick"===e.action.action&&(this._upgradeHookExpandReason.next("click"),this._isYellowUnderlinesExperimentActive&&this.assistantActions.next({type:a.Type.clickOnUpgradeCard}))}))),V.Z.patchState(S.T(this._minimizeUpgradeHook())),V.Z.patchState(S.T(this._autoOpenUpgradeHook())),V.Z.patchState(b.b((e=>this._onUpgradeHookShown.next(function(e){switch(e){case"hidden":return g.n.State.hidden;case"expanded":return g.n.State.expanded;case"minimized":return g.n.State.minimized;default:(0,d.vE)(e)}}(e.kind))))),V.Z.patchState(b.b((e=>this._upgradeHookExpanded.next("expanded"===e.kind))))),this.cardListContext=new f.X(B.none),this.assistantActions=new y.xQ,this.autoFocusEnabled=D.h.create(!0),this.cardListViewportHeight=D.h.create(B.none),this._onUpgradeButtonMount=new E.t,this._upgradeHookExpandReason=new E.t,this._onUpgradeHookShown=new y.xQ,this._unselectActiveAlert=this.assistantActions.pipe(C.h((e=>e.type===a.Type.clickOnEmpty||e.type===a.Type.clickOnFakeCard||!(!this._isYellowUnderlinesExperimentActive||e.type!==a.Type.clickOnUpgradeCard))),b.b((()=>this.autoFocusEnabled.set(!1))),v.U((()=>e=>e.patch({currentLens:(0,s.pipe)(L.In.getActiveItem(e.currentLens),B.fold((()=>e.currentLens),(t=>L.nL.hasItems(e)?this._capabilities.unselectItem()(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:p.l$.sidebar})))),this.applicatorEffects={id:"assistantCardListViewModel.effects",when:u.R.isWithAlertsId,what:L.nL.Effect.Applicator.create(k.T(this._unselectActiveAlert))},this._subs.push(this._onUpgradeHookShown.pipe(_.b(1),w.x(),C.h((e=>e===g.n.State.minimized))).subscribe((()=>{this._gnar.assistantCollapsedUpgradeHookShow()})),this._onUpgradeButtonMount.pipe(A.oA,I.a(this.cardListContext.pipe(A.oA,T.P())),M.w((([e,t])=>x.n(e,{root:t}).pipe(T.P()))),C.h(U.Dw),v.U((e=>Math.trunc(100*e[0].intersectionRatio))),R.M(this._upgradeHookExpandReason,this._premiumAlertsCount)).subscribe((([e,t,i])=>{this._gnar.assistantExpandedUpgradeHookShow(i,e,t)})),this._lensState.pipe(C.h(L.nL.hasCards),v.U((e=>L.In.getActiveItem(e.currentLens))),F.G(),C.h((([e,t])=>B.isNone(e)&&B.isSome(t)))).subscribe((e=>{this.autoFocusEnabled.set(!0)})))}dispose(){this._subs.dispose()}_minimizeUpgradeHook(){return this.activeAlert.pipe(w.x(),R.M(this.upgradeHookExpanded),C.h((([e,t])=>!!(e&&t&&this._isYellowUnderlinesExperimentActive))),R.M(this._upgradeViewModel.advancedAlerts),v.U((([e,t])=>(0,s.pipe)(t,B.fold((()=>({kind:g.n.State.hidden})),(e=>({kind:g.n.State.minimized,alertsCount:e.count})))))))}_autoOpenUpgradeHook(){return this._lensState.pipe(C.h((e=>(0,s.pipe)(e.currentLens.id,(0,U.Kg)(u.R.isPriority,u.R.isAllAlerts)))),v.U(P.v.WithSuccess.State.isInSuccess(this._capabilities)),I.a(this.havePremiumAlerts,((e,t)=>e&&t)),w.x(),b.b((e=>{e&&this._upgradeHookExpandReason.next("alertsAddressed")})),R.M(this._upgradeViewModel.advancedAlerts),v.U((([e,t])=>(0,s.pipe)(t,B.fold((()=>({kind:g.n.State.hidden})),(t=>e?{kind:g.n.State.expanded,showCloseButton:!0,alertsState:{count:t.count,alerts:t.alerts()}}:{kind:g.n.State.minimized,alertsCount:t.count}))))))}}},48081:(e,t,i)=>{i.d(t,{O:()=>X});var a=i(57050),n=i(35214),s=i(40327),r=i(65060),o=i(33817),l=i(18055),c=i(35108),d=i(77176),u=i(40151),p=i(2834),m=i(55415),g=i(5114),h=i(22232),v=i(34217),f=i(27378),w=i(50474),b=i(64757),S=i(31278),y=i(3656),E=i(28706),C=i(26027),k=i(15646),_=i(74754),A=i(66346),I=i(76974),T=i(19703),M=i(16314),x=i(35501),R=i(45740),F=i(57837);const L=v.UI.Node.make((({state:e,notify:t})=>{const i=f.useContext(w.m.Context);return f.createElement(T.F.Fragment,null,e.pipe(d.U((e=>(0,a.zG)(e.details,g.fold((()=>f.createElement("div",null)),(()=>f.createElement(b.zx.Tertiary,{key:"toggle-more",name:(0,A.hC)(e.visualState,i),title:(0,A.hC)(e.visualState,i),onClick:E.hz(t({type:k.eI.Kind.startTransitionTo,id:e.id,transition:{type:C.X.isCardOpen(e.visualState)?"focused":"expanded",clockwise:!0}}))},C.X.isCardOpen(e.visualState)?f.createElement(S.JO.Arrow,{key:"more",className:F.lessIcon}):f.createElement(S.JO.QuestionMark,{key:"expand"}),(0,A.hC)(e.visualState,i)))))))))})),P=v.UI.Node.make((({notify:e})=>f.createElement(b.zx.Tertiary,{name:"dismiss",title:"Dismiss",onClick:E.hz(e({type:M.Dy.ignoreButtonClick}))},f.createElement(S.JO.Ignore,null)))),N=v.UI.Node.make((({state:e})=>f.createElement(T.F.Fragment,null,e.pipe(d.U((e=>(0,a.zG)(e.details,g.fold(a.gn,(t=>f.createElement(A.G3,{key:"card-actions-details",visualState:e.visualState,className:F.more},f.createElement(y.XY,{className:F.minimalDescription,..._.y.renderToHtml(t)}))))))))))),B=v.UI.Node.make((({notify:e})=>f.createElement(b.zx.Flat,{className:F.feedbackFooter,name:"attention-score-card-open-feedback-form",onClick:E.hz(e({type:M.Dy.feedbackButtonClick}))},f.createElement("span",null,"Anything we can improve?"),f.createElement(S.JO.OpenFeedbackFormArrow,null)))),U=v.UI.Node.make((({state:e,notify:t})=>f.createElement(T.F.Fragment,null,e.pipe(d.U((e=>f.createElement(b.zx.Primary,{name:"readersAttentionItem-view-more",onClick:E.hz(t({type:M.Dy.viewMoreButtonClick,item:e})),className:F.viewMoreButton},"See suggestions"))))))),D=v.UI.Knot.make(v.UI.Grid.make((({slots:e})=>f.createElement(T.F.div,{className:R.card,"data-name":"attention-score-card-full"},e.header,f.createElement(T.F.div,{className:F.cardBody},e.content,e.details,f.createElement("div",{className:F.actions},e.viewMoreButton)),f.createElement(T.F.div,{className:F.actionsFooter},e.expandButton,e.dismissButton),e.feedbackFooter))),{header:(0,x.h)("full"),content:x.r,details:N,expandButton:L,dismissButton:P,viewMoreButton:U,feedbackFooter:B}),V=e=>v.Z.composeKnot({header:()=>e,content:()=>e.pipe(d.U((e=>({attentionScore:e.attentionScore,attentionScoreDescription:e.description})))),details:()=>e,expandButton:()=>e,dismissButton:()=>I.of(null),viewMoreButton:v.Z.fromSideEffect(a.Q1,e),feedbackFooter:()=>I.of(null)});var O=i(12187),H=i(57561);const G=v.UI.Knot.make(v.UI.Grid.make((({slots:e,notify:t})=>f.createElement(T.F.div,{"data-name":"attention-score-card-mini",onClick:E.hz(t({type:M.Dy.miniCardClick,id:r.g.id})),...(0,O.Sh)(R.card,H.miniCard)},e.header))),{header:(0,x.h)("mini")}),W=e=>v.Z.composeKnot({root:v.Z.fromSideEffect(a.Q1,null),header:()=>e});var j;!function(e){const t=v.UI.Union.make("kind",{mini:G,full:D,hidden:v.UI.Node.empty}),i=e=>({mini:W(e.pipe(d.U((e=>({title:e.view.title,attentionScore:e.view.attentionScore,density:e.density}))))),full:V(e.pipe(d.U(m.ei("view")))),hidden:()=>u.E}),n=o.G.make(t);function s(e){switch(e){case"added":case"rendered":return"mini";case"focused":case"expanded":return"full";case"hidden":case"removed":return"hidden";case"presuccess":case"success":case"feedback_form":case"muted":throw new Error(`${e} is not supported for ReadersAttentionCard`);default:(0,h.vE)(e)}}e.Card=v.UI.Node.make((({state:e,notify:t})=>v.UI.mount(n,(0,a.zG)(l.g.flow(e.pipe(d.U(m.ei("view"))),(0,a.zG)((e=>v.Z.composeUnion(i(e),(()=>e.pipe(d.U((e=>({kind:s(e.view.visualState.transition.type)})))))))(e),v.Z.extendActions(p.b((e=>t(e.action.action)())))),(e=>v.Z.composeUnion(i(e),(()=>e.pipe(d.U((e=>({kind:(0,a.zG)(e.view.visualState.from,g.fold((()=>"mini"),s))})))))))(e),m.ei("id"),c.CE.toOption(c.a)),l.g.extend((e=>t(e)()))))))}(j||(j={}));var z=i(48521),q=i(16892);const K=e=>t=>({...t,positionState:e}),Z=e=>t=>({...t,visualState:e});var X,J=i(66896),Q=i(22373),Y=i(7910),$=i(49978),ee=i(34574),te=i(98752),ie=i(17594),ae=i(91549),ne=i(20594),se=i(86775),re=i(77610),oe=i(15215),le=i(70100),ce=i(47306),de=i(35416),ue=i(6100),pe=i(8125),me=i(45701),ge=i(83078),he=i(73975),ve=i(85715);!function(e){function t(e,t,i,a,n){return de.nL.Items.mapper((e=>e.kind),{[C.X.Kind]:e,[ae.R.Kind]:t,[le.X.kind]:i,[ce.J.kind]:a,[r.g.kind]:n})}function i(e){return e.kind===C.X.Kind}function o(e){return e.kind===ae.R.Kind}function l(e){return i(e)&&re.C.isEthicalAIItem(e)}function c(e){return o(e)&&re.C.isEthicalAIItem(e)}function d(e,i){return{viewState:(a,n)=>t((t=>({view:t,isLastCard:a,kind:"alertCard",visibleViewportHeight:e(n)})),(t=>({view:t,isLastCard:a,kind:"alertsBundle",visibleViewportHeight:e(n)})),(e=>({view:e,kind:"checklistItemEmpty"})),(t=>({view:t,kind:"checklistItemWithAlerts",isLastCard:a,visibleViewportHeight:e(n)})),(e=>({density:i()===J.R.SpecialId.AllAlerts?"normal":"compact",view:e,kind:"readersAttentionItem"})))}}e.isSelectableWithAlertItem=(0,pe.Kg)(i,o,oe.d.isChecklistItemWithAlerts),e.getActiveItemWithAlert=de.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=de.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveFocusableItem=de.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isAlertsBundle=o,e.isEthicalAIAlertCard=l,e.isEthicalAIAlertsBundle=c,e.defaultOrd=(0,n.fold)(me.getMonoid())([(0,s.pipe)(me.ordBoolean,me.contramap((0,pe.ff)(l))),(0,s.pipe)(me.ordBoolean,me.contramap(r.m)),me.fromCompare(((e,t)=>i(e)&&i(t)?C.X.ord.compare(e,t):0))]),e.bundlesOrd=(0,n.fold)(me.getMonoid())([(0,s.pipe)(me.ordBoolean,me.contramap((0,pe.ff)(c))),(0,s.pipe)(me.ordBoolean,me.contramap(r.m)),me.fromCompare(((e,t)=>o(e)&&o(t)?ae.R.ord.compare(e,t):0))]),e.item=e=>ve.UI.Union.make("kind",{alertCard:Q.p.Card(e),alertsBundle:$.Q.Card(e),checklistItemEmpty:ee.z.Card(e),checklistItemWithAlerts:te.fw.Card(e),readersAttentionItem:j.Card}),e.viewState=d,e.createCardListFlow=e=>(0,Y.sJ)((t=>(0,s.pipe)(e,ge.bw((e=>e.actions.next(t.action)))))),e.listItemOrd=e=>me.contramap((e=>e.cell.item.view))(e).compare;const u={equals:(e,t)=>e.kind===t.kind&&q.s.eqById.equals(e,t)},p=(e,t,i,a,n)=>({equals:(s,o)=>{const l={[C.X.Kind]:e,[ae.R.Kind]:t,[le.X.kind]:i,[ce.J.kind]:a,[r.g.kind]:n};return u.equals(s,o)&&function(e,t){return(i,a)=>t[e(i)].equals(i,a)}((e=>e.kind),l)(s,o)}}),m=(0,n.fold)(he.uZ())([z.o.eq,q.s.verticalPositionEq,u]);function h(e,i){const a=C.X.Capabilities.getChangePosition(e);return{changePosition:e=>t(a.changePosition(e),ae.R.changePosition(e),le.X.changePositionState(e),i.changePositionState(e),K(e))}}function v(e,i,a){const n=C.X.Capabilities.getAnimatable(e),s=ae.R.Capabilities.getAnimatable(a);return{completeTransition:e=>{return t(n.completeTransition(e),s.completeTransition(e),le.X.completeTransition(e),i.completeTransition(e),(a=e,e=>({...e,visualState:z.o.VisualState.complete(e.visualState,a)})));var a},transitionTo:e=>t(n.transitionTo(e),s.transitionTo(e),le.X.transitionTo(e),i.transitionTo(e),(e=>t=>({...t,visualState:z.o.VisualState.to(t.visualState,e)}))(e)),changeVisualState:e=>t(n.changeVisualState(e),s.changeVisualState(e),le.X.changeVisualState(e),i.changeVisualState(e),Z(e))}}function f(e,i,n,r,o){const l=ae.R.getCardHydrator(o),c=ae.R.getSelect(n,r,l),d=ae.R.getSelectByAlert(n,r,l),u=C.X.Capabilities.getSelect(e);return{select:(e,n)=>t(u.select(e,n),c(e,n),le.X.select(e),i.selectFirstAlert((0,a.MZ)(e),n),function(e,t){return i=>{const n=(0,s.pipe)(e,g.map((e=>t.compare(i,e)>0)),g.getOrElse(a.W8)),r=(0,s.pipe)(e,g.exists((e=>e.id===i.id))),o=r&&C.X.isCardOpen(i.visualState)?"expanded":"focused",l=(0,s.pipe)(e,g.fold((()=>z.o.VisualState.initial({type:o,clockwise:n})),(e=>z.o.VisualState.to(i.visualState,{type:o,clockwise:n}))));return(0,s.pipe)(i,r?a.yR:K(q.s.PositionState.invalidateHeight(i.positionState)),Z(l))}}(e,n)),selectByAlert:(e,n,s)=>t(u.selectByAlert(e,n,s),d(n,e,s),le.X.select(e),i.selectByAlert(n,(0,a.MZ)(e),s),a.yR),unselect:(e,n)=>t(u.unselect((0,a.MZ)(e),n),ae.R.unselect((0,a.MZ)(e),n),le.X.unselect(e),i.unselect((0,a.MZ)(e),n),function(e,t){return i=>{const n=(0,s.pipe)(e,g.map((e=>t.compare(i,e)>0)),g.getOrElse(a.W8)),r=(0,s.pipe)(e,g.exists((e=>e.id===i.id)));return(0,s.pipe)(i,r?a.yR:K(q.s.PositionState.invalidateHeight(i.positionState)),z.o.isHidden(i)?a.yR:Z(z.o.VisualState.to(i.visualState,{type:"rendered",clockwise:n})))}}(e,n))}}function w(e,n,s,r,l,c){return{removeAlertFromItem:(d,u)=>t((t=>C.X.Capabilities.getRemoveAlerts(e,u.itemsOrd)(d,de.In.getActiveItemOfType(i)(u))(t)),(e=>ae.R.Capabilities.getRemoveAlertsCapability(r,l,c,u.itemsOrd)(d,de.In.getActiveItemOfType(o)(u))(e)),a.yR,(e=>se.G.getRemoveAlert(n,s,r).removeAlertFromItem(d,u)(e)),a.yR)}}function b(e,i,n,s){const r=C.X.Capabilities.getRemove(e);return{remove:(e,o)=>t(r.remove(e,o),(t=>e(t)?ae.R.Capabilities.getRemove(n,s)([t.activeAlert],o(t))(t):t),a.yR,(t=>e(t)?i.removeAlerts(t.alerts,o(t))(t):t),a.yR)}}function S(e,i,n,s){const r=C.X.Capabilities.getUpdateWithAlert(e),o=ae.R.Capabilities.getUpdatableWithAlertsCapability(i,s);return{updateWithAlerts:e=>t(r.updateWithAlerts(e),o(e),a.yR,n.updateWith(e),a.yR)}}e.equatable={structEq:p(C.X.eq,ae.R.eq,le.X.eq,ce.J.eq,r.g.eq),idEq:p(u,u,u,u,u),visualStateEq:p(m,m,m,m,m)},e.changePosition=h,e.disposable={isScheduledToDispose:t((e=>re.C.willBeDisposed(e,e.removedAlertsIds)),(e=>re.C.willBeDisposed(e,e.removedAlertsIds)),a.jv,(e=>re.C.willBeDisposed(e,e.removedAlertsIds)),a.jv)},e.hidable={isHidden:t(z.o.isHidden,z.o.isHidden,z.o.isHidden,z.o.isHidden,z.o.isHidden)},e.animatableItem=v,e.hasAlertsQueries={isSelectableByAlert:e=>t(re.C.hasAlert(e.alert.id),re.C.hasAlert(e.alert.id),a.jv,re.C.hasAlert(e.alert.id),a.jv),hasAlert:e=>t(re.C.hasAlert(e),re.C.hasAlert(e),a.jv,re.C.hasAlert(e),a.jv),hasActiveAlert:t(re.C.hasActiveAlert,re.C.hasActiveAlert,(()=>g.none),re.C.hasActiveAlert,(()=>g.none))},e.changePositionStrategyQueries={useReferenceHeightOnRemove:t(a.jv,a.jv,a.jv,a.W8,a.jv)},e.select=f,e.removeAlert=w,e.remove=b,e.updateWithAlert=S,e.releaseAlert=(t,i,a,n,s,r)=>ue.v.Capabilities.getAlertReleaser({...w(t,i,a,n,s,r),...e.disposable}),e.unselectable=(e,t,i,a,n)=>ue.v.Capabilities.getUnselectable(de.In.getActiveItem,f(e,t,i,a,n)),e.selectableByAlert=(t,i,a,n,s)=>ue.v.Capabilities.getSelectableByAlert(de.In.getActiveItem,{...e.hasAlertsQueries,...f(t,i,a,n,s),...ue.v.Capabilities.getHasChecksFeed()}),e.selectableById=(e,t,i,a,n)=>ue.v.Capabilities.getSelectableById(de.In.getActiveItem,f(e,t,i,a,n)),e.updateMeta=()=>({updateMeta:ue.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=(e,t,i,a,n,s)=>ue.v.Capabilities.getAnimatable(e,{...w(e,t,i,a,n,s),...v(e,t,s),...ue.v.Capabilities.getHasChecksFeed()}),e.hasPriorityToggle=(t,i,a)=>ue.v.WithPriority.getHasPriorityToggle({...v(t,i,a),...e.hasAlertsQueries,...e.disposable});const y=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function E(e,i){const a=ne.Mq.getCardSelections(i);return{nextAlert:t(a.nextAlert,a.nextAlert,(()=>g.none),e.nextAlert,(()=>g.none)),prevAlert:t(a.prevAlert,a.prevAlert,(()=>g.none),e.prevAlert,(()=>g.none))}}function k(){return{updateUserInput:e=>t(C.X.updateUserInput(e),ae.R.changeUserInput(e),a.yR,a.yR,a.yR)}}e.alignable={isValidToAlign:t(y,y,a.jv,y,a.jv)},e.alertIterator=E,e.itemReleaser=(e,t,i)=>se.G.getItemReleaser(e,t,i,ue.v.Capabilities.getItemReleaser()),e.hasAlerts=ue.v.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>(0,pe.W9)(e.isSelectableWithAlertItem,(i=>!e.disposable.isScheduledToDispose(i)&&(0,s.pipe)(i,e.hasAlertsQueries.hasActiveAlert,g.map((e=>t.isRegistered(e.alert.id))),g.getOrElse(a.jv)))),e.hasUserInput=k,e.priorityTest=(0,pe.W9)(i,(e=>ie.$.isPriority(e.activeAlert))),e.verifiable=()=>ue.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>{const e=q.s.Capabilities.getPojoCloneable().clone;return{clone:t(C.X.Capabilities.getCloneable().clone,e,e,e,e)}},e.getCapabilities=function(t,i,n,s,r,o,l,c=(0,a.a9)(g.none),u=ne.IG.Default){return{...d(c,l),...e.disposable,...e.hidable,...e.equatable,...k(),...e.cloneable(),...h(t,n),...v(t,n,r),...f(t,n,s,u,r),...b(t,n,u,r),...w(t,n,o,s,u,r),...S(t,i,n,r),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t,n,o,s,u,r),...e.unselectable(t,n,s,u,r),...e.selectableByAlert(t,n,s,u,r),...e.selectableById(t,n,s,u,r),...e.updateMeta(t),...e.animatableFeed(t,n,o,s,u,r),...e.hasPriorityToggle(t,n,r),...e.itemReleaser(n,o,s),...e.verifiable(),...e.cloneable(),...e.hasAlerts(E(n,s),s,(()=>e.isSelectableWithAlertItem),{...e.hasAlertsQueries,...e.disposable})}}}(X||(X={}))},5178:(e,t,i)=>{i.d(t,{Q:()=>a,_:()=>r});var a,n=i(75003),s=i(78594);!function(e){e.readersAttention="readers_attention",e.settings="settings"}(a||(a={}));class r{constructor(e,t,i){this._assistantLayoutViewModel=e,this._domain=t,this._gnar=i,this._entryPoint=void 0}getDomain(){return this._domain}openFeedback(e){this._entryPoint=e,this._gnar.assistantFeedbackButtonClick(this._entryPoint),this._assistantLayoutViewModel.pushActiveView({type:n.a.Type.feedback})}submitFeedback(e){this._entryPoint&&this._gnar.assistantFeedbackSubmitButtonClick(this._entryPoint,e.domain,e.text,(0,s.dK)(e)?e.score:void 0)}}},19654:(e,t,i)=>{i.d(t,{B:()=>a});var a,n=i(92783),s=i(54466);!function(e){e.shouldShow=e=>{var t;return!!(null===(t=e.institutionInfo)||void 0===t?void 0:t.voxEnabled)};const t=e=>({onShow:t=>e.gbPromptFormShow(t),onAccept:t=>e.gbPromptAcceptClick(t),onDismiss:t=>e.gbPromptDismissClick(t)});e.getCardsViewModelSendToURLExperiment=(e,i)=>({handleGbPrompt:s.sU.Experiments.handleGbPrompt(e,{account:{styleGuide:(0,n.Um)().styleGuideSettings,writingStyle:(0,n.Um)().writingStyleSettings}},t(i))})}(a||(a={}))},75003:(e,t,i)=>{i.d(t,{D:()=>d,a:()=>a});var a,n=i(7309),s=i(70026),r=i(90361),o=i(14601),l=i(78674),c=i(85985);!function(e){let t,i;!function(e){e.default="default",e.emogenie="emogenie",e.readersAttention="readersAttention",e.readersAttentionHelp="readersAttentionHelp",e.feedback="feedback",e.settings="settings",e.proofitRequest="proofitRequest",e.proofitReview="proofitReview",e.startupPlaceholder="startupPlaceholder"}(t=e.Type||(e.Type={})),function(e){let t;!function(e){let t;!function(e){e.predictionWidget="predictionWidget",e.navigation="navigation",e.readersAttentionItem="readersAttentionItem"}(t=e.Type||(e.Type={}))}(t=e.Caller||(e.Caller={}))}(i=e.ReadersAttention||(e.ReadersAttention={})),e.isDefault=function(t){return t.type===e.Type.default},e.isEmogenie=function(t){return t.type===e.Type.emogenie},e.isReadersAttention=function(t){return t.type===e.Type.readersAttention},e.isReadersAttentionHelp=function(t){return t.type===e.Type.readersAttentionHelp},e.isFeedback=function(t){return t.type===e.Type.feedback},e.isSettings=function(t){return t.type===e.Type.settings},e.isProofitRequest=function(t){return t.type===e.Type.proofitRequest},e.isProofitReview=function(t){return t.type===e.Type.proofitReview}}(a||(a={}));class d extends s.A{constructor(e,t,i,s,d=n.V.defaultLayout){super({type:a.Type.startupPlaceholder},{type:a.Type.default}),this.browser=s,this.layout=d,this._sub=new o.w,this._sub.add(t.subscribe((e=>{if(e.length>0)for(;!this.activeViewHasAlerts();)this.popActiveView()})));const u=new Set([a.Type.readersAttention,a.Type.emogenie]);this._sub.add(i.pipe(l.b(100),c.h(r.fQ)).subscribe((()=>{if(u.has(this._activeView.get().type))for(;this._activeView.get().type!==this._defaultView.type;)this.popActiveView()}))),this._sub.add(this._activeView.subscribe((t=>{switch(t.type){case a.Type.settings:return void e.assistantSettingsShow();case a.Type.proofitRequest:return void e.proofitRequestFormShow();default:return}})))}activeViewHasAlerts(){switch(this._activeView.get().type){case a.Type.default:case a.Type.emogenie:case a.Type.readersAttention:return!0;default:return!1}}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;e.type===a.Type.readersAttention?this._activeView.set({...e,caller:{type:a.ReadersAttention.Caller.Type.navigation}}):this._activeView.set(e)}get isHeaderNavigationEnabled(){return this._activeView.view((e=>e.type!==a.Type.feedback))}dispose(){this._sub.unsubscribe()}}},59456:(e,t,i)=>{i.d(t,{W:()=>n});var a=i(63919);const n=e=>{const t=e.initialPositionOffset.get();return{initialPositionOffset:t,onDrag:i=>{e.updateInitialPositionOffset(a.E9.plus(t,a.E9.fromCartesian(i.translate)))}}}},19043:(e,t,i)=>{i.d(t,{S:()=>u});var a=i(77843),n=i(28043),s=i(16118),r=i(41398),o=i(85985),l=i(2768),c=i(75003),d=i(10247);class u{constructor(e,t,i,a){this.feature=t,this._closeAssistant=i,this._gnar=a,this._subs=[],this._subs.push(this.feature.requestInfo.view("status").pipe((0,n.x)(),(0,s.G)(),(0,r.M)(e.activeView)).subscribe((([[t,i],a])=>{t===d.eE.REVIEWING&&a.type===c.a.Type.proofitReview&&e.popActiveView()}))),this._subs.push(this.feature.layoutCreated.pipe((0,r.M)(e.activeView)).subscribe((([t,i])=>{i.type!==c.a.Type.proofitRequest&&i.type!==c.a.Type.proofitReview||t||e.popActiveView()})))}onSubmitRequest(e){this.feature.submitRequest(),this._gnar.proofitRequestFormSubmit();const t=this.feature.requestInfo.lens("status").pipe((0,o.h)((e=>e===d.eE.ACCEPTED)));(0,a.F)(100).pipe((0,l.R)(t)).subscribe({complete:()=>this._closeAssistant(e)})}onCompleteRequest(e){this.feature.resetRequest(),this._gnar.proofitOrderDone(),this._closeAssistant(e)}onSubmitFeedback(e){this._gnar.proofitFeedbackFormSubmit(e.text,e.score)}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}},43955:(e,t,i)=>{i.d(t,{d:()=>S,X:()=>G});var a=i(17771),n=i(57050),s=i(26328),r=i(40327),o=i(75003),l=i(74660),c=i(4390),d=i(93508),u=i(16118),p=i(77176),m=i(85985),g=i(66310),h=i(12126),v=i(40151),f=i(92843),w=i(71249),b=i(5114);var S,y=i(90361),E=i(66896),C=i(14601),k=i(98403),_=i(28043),A=i(19751),I=i(34383),T=i(15215),M=i(35416),x=i(83078),R=i(73975),F=i(38983),L=i(17889),P=i(32243),N=i(86718);function B(e,t){return F.h.combine(e.panelInfo.view(b.map((e=>({items:e.checklist,wordsCount:e.wordsCount})))),t,((e,t)=>{const i=c.p.reduce(new Map,((e,t)=>{return(0,n.zG)((i=t,(0,n.zG)(i.alert.extraProperties.takeawayBundleId,b.map(I.T.Id.create))),b.fold((()=>e),(i=>e.set(i,(e.get(i)||[]).concat([t])))));var i}))(t);return(0,n.zG)(e,b.fold((()=>new Map),(e=>new Map(P.AO(e.items).map((([t,a])=>[I.T.Id.create(t),D(a,e.wordsCount,i)]))))))}))}function U(e){return l.bZ.isTakeaway(e)&&e.takeawayIsLikelyToBeRead&&x.FX(l.TO.correctlyDetected)(e.takeawayFeedback)}function D(e,t,i){const a=I.T.Id.create(e.id),s=(i.get(a)||[]).map((e=>e.alert)),r=(0,n.zG)(s,w.hX((e=>!l.bZ.isTakeaway(e)||b.isNone(e.takeawayFeedback)||x.FX(l.TO.correctlyDetected)(e.takeawayFeedback))),(e=>e.every(U)?[]:e),L.nI);return{id:a,rank:e.rank,suggestionsView:(0,n.zG)(e.suggestionsCard,b.chain((e=>(0,n.zG)(r,b.map((t=>({title:e.title,miniTitle:e.miniTitle,miniLabel:b.none,alertIds:(0,n.zG)(t,(0,L.UI)((e=>e.id)))}))))))),emptyView:{checked:e.defaultCard.checked,title:e.defaultCard.title,miniTitle:e.defaultCard.miniTitle,miniLabel:"textLength"===e.defaultCard.kind?b.some(`${t} words`):b.none,card:V(e,t)}}}function V(e,t){const i="simple"===e.defaultCard.kind?N.f.Kind.simple:"textLength"===e.defaultCard.kind?N.f.Kind.textLength:(0,y.vE)(e.defaultCard.kind);return i===N.f.Kind.simple?{kind:i,explanation:e.defaultCard.description,details:e.defaultCard.details}:{kind:i,explanation:e.defaultCard.description,details:e.defaultCard.details,wordCount:t}}function O(e){return b.isNone(e.suggestionsView)&&e.emptyView.checked}function H(e){return o.a.isReadersAttention(e)||o.a.isReadersAttentionHelp(e)}!function(e){e.ok="ok",e.warning="warning",e.feedback="feedback"}(S||(S={}));class G{constructor(e,t,i,o,y){this._readersAttentionFeature=e,this._assistantLayoutVM=t,this._alertsCollection=i,this._alertsReader=o,this._assistantLensState=y,this._subs=new C.w,this._checklist=F.h.create(I.D.empty()),this.checklist=this._checklist.view(),this.panelState=(0,r.pipe)(this._readersAttentionFeature,b.fold((()=>F.h.create(b.none)),(e=>F.h.combine(e.panelInfo,this._checklist,((e,t)=>(0,r.pipe)(e,b.map((e=>({attentionScore:e.attentionScore,attentionScoreDescription:e.attentionScoreDescription,headerMessage:e.headerMessage,numChecklistItemsChecked:Array.from(t.values()).reduce(((e,t)=>O(t)?e+1:e),0),numChecklistItems:t.size}))))))))),this.predictionCardState=(0,r.pipe)(this._readersAttentionFeature,b.fold((()=>F.h.create(b.none)),(e=>function(e,t,i){return F.h.combine(e.panelInfo,t,((e,t)=>(0,r.pipe)(e,b.map((e=>({message:e.predictionMessage,icon:Array.from(t.values()).every(O)?S.ok:Array.from(t.values()).every((e=>(0,r.pipe)(e.suggestionsView,b.map(function(e){return t=>(0,r.pipe)(t.alertIds,(0,s.UI)((0,n.ls)((t=>e.getById(t)),b.filter((e=>l.bZ.isTakeaway(e)&&e.takeawayIsLikelyToBeRead&&b.isNone(e.takeawayFeedback))))),w.yW(b.isSome))}(i)),b.getOrElse((()=>e.emptyView.checked)))))?S.feedback:S.warning,alertsCount:z(t)}))))))}(e,this._checklist,this._alertsReader)))),this._subs.add(this._handleHeatmapVisibilityAndNavigationTracking()),this._subs.add(this._trackChecklistItemExpand()),(0,r.pipe)(this._readersAttentionFeature,x.bw((e=>{var t;this._subs.add((t=this._alertsCollection,t.pipe(d.O(c.p.empty),u.G(),p.U((([e,t])=>(0,r.pipe)(c.p.diff(e,t),c.p.Diff.filter((e=>l.bZ.isTakeaway(e.alert)))))),m.h((0,n.ff)(f.v.isEmpty)),p.U((e=>(0,r.pipe)(e,f.v.reduce(new Map,((e,t)=>e),((e,t,i)=>l.bZ.isTakeaway(i.alert)?e.set(i.alert.id,i.alert):e),((e,t)=>l.bZ.isTakeaway(t.alert)?e.set(t.alert.id,t.alert):e))))),g.w((e=>(0,r.pipe)(Array.from(e.values()),w.UI((e=>(0,r.pipe)(a.Y(b.option)({rawId:(0,r.pipe)(e,l.bZ.getRawId),feedback:e.takeawayFeedback}),b.map((e=>({rawId:e.rawId,feedback:e.feedback})))))),w.oA,(e=>e.length>0?h.D(e):v.E)))))).subscribe((t=>{e.takeawaysFeedbackStore.registerFeedback(t.rawId,t.feedback)}))),this._subs.add(B(e,this._alertsCollection).subscribe(k.wW(this._checklist)))})))}openPanel(e){this._assistantLayoutVM.pushActiveView({type:o.a.Type.readersAttention,caller:e})}showHelp(){this._assistantLayoutVM.pushActiveView({type:o.a.Type.readersAttentionHelp}),this._trackOnShowHelp()}dispose(){H(this._assistantLayoutVM.activeView.get())&&((0,r.pipe)(this._readersAttentionFeature,x.bw((e=>e.heatmap.visible.set(!1)))),this._trackOnReadersAttentionHide()),this._subs.unsubscribe()}_handleHeatmapVisibilityAndNavigationTracking(){return this._assistantLayoutVM.activeView.pipe(_.x(((e,t)=>e.type===t.type)),d.O(null),u.G()).subscribe((([e,t])=>{(0,r.pipe)(this._readersAttentionFeature,x.bw((i=>{H(t)&&!i.heatmap.visible.get()?i.heatmap.visible.set(!0):e&&H(e)&&!H(t)&&i.heatmap.visible.get()&&i.heatmap.visible.set(!1)}))),!o.a.isReadersAttention(t)||e&&o.a.isReadersAttentionHelp(e)?!H(t)&&e&&H(e)&&this._trackOnReadersAttentionHide():this._trackOnReadersAttentionShow(t.caller)}))}_trackChecklistItemExpand(){return this._assistantLensState.pipe(p.U((e=>(0,r.pipe)(b.fromPredicate(M.nL.hasItems)(e),b.map(M.nL.Prism.getLens().get),b.filter((e=>e.id===E.R.SpecialId.PredictionTakeaways)),b.chain(M.In.getActiveItemOfType(T.d.isChecklistItem)),b.map((e=>{return{id:(t=e.id,i=E.R.SpecialId.PredictionTakeaways,I.T.Id.create(t.substr(i.length+1)||t)),title:(0,r.pipe)(e.itemMeta.miniTitle,b.getOrElse((()=>e.itemMeta.title))),checked:W(e),numAlerts:T.d.isChecklistItemWithAlerts(e)?e.alerts.length:0};var t,i}))))),A.skipBy(b.getEq(R.Uz((e=>e.id))(R.yv))),p.U(b.getOrElse(n.gn)),m.h(y.fQ)).subscribe((e=>(0,r.pipe)(this._readersAttentionFeature,x.bw((t=>t.tracking.onChecklistItemExpand(e))))))}_trackOnReadersAttentionShow(e){(0,r.pipe)(this._readersAttentionFeature,b.chain((e=>(0,r.pipe)(a.g(b.option)(e.panelInfo.get(),j(this._checklist.get())),b.map((t=>({feature:e,predictionMessage:t[0].predictionMessage,checklistInfo:t[1]})))))),x.bw((({feature:t,predictionMessage:i,checklistInfo:a})=>{t.tracking.onOpen(a,i,this._getNumAlerts(),e)})))}_trackOnReadersAttentionHide(){(0,r.pipe)(this._readersAttentionFeature,b.chain((e=>(0,r.pipe)(j(this._checklist.get()),b.map((t=>({feature:e,checklistInfo:t})))))),x.bw((({feature:e,checklistInfo:t})=>{e.tracking.onClose(t,this._getNumAlerts())})))}_trackOnShowHelp(){(0,r.pipe)(this._readersAttentionFeature,x.bw((e=>{e.tracking.onHelpScreenShow()})))}_getNumAlerts(){return(0,r.pipe)(this._alertsCollection.get(),c.p.reduce({takeaway:0,nonTakeaway:0},((e,t)=>{const i=l.bZ.isTakeaway(t.alert),a=l.bZ.belongsToPredictionTakeaways(t.alert)&&!i;return{takeaway:e.takeaway+(i?1:0),nonTakeaway:e.nonTakeaway+(a?1:0)}})))}}function W(e){return T.d.isChecklistItemEmpty(e)&&e.itemMeta.checked}function j(e){const t=Array.from(e.values()).sort(((e,t)=>e.rank-t.rank));return(0,r.pipe)(t.map((e=>({checked:O(e),message:(0,r.pipe)(e.suggestionsView,b.map((e=>(0,r.pipe)(e.miniTitle,b.getOrElse((()=>e.title))))),b.getOrElse((()=>(0,r.pipe)(e.emptyView.miniTitle,b.getOrElse((()=>e.emptyView.title))))))}))),s.nI)}function z(e){return(0,r.pipe)(Array.from(e.values()),w.u4(0,((e,t)=>e+(0,r.pipe)(t.suggestionsView,b.map((e=>e.alertIds.length)),b.getOrElse((()=>0))))))}},31536:(e,t,i)=>{i.d(t,{X:()=>a});class a{constructor(e,t,i,a){this._contentScriptState=e,this._contentScriptActions=t,this._dapiActions=i,this.domain=a,this.state=this._contentScriptState.view((e=>({user:e.user,page:e.page,dynamicConfig:e.dynamicConfig,dapi:e.dapi}))),this.actions={toggleSite:(e,t)=>{this._contentScriptActions.toggleSite({enabled:e,domain:t})},toggleDefs:e=>{this._contentScriptActions.toggleDefs(e)},toggleAutocomplete:e=>{this._contentScriptActions.toggleAutocomplete(e)},toggleAutocorrect:e=>{this._contentScriptActions.toggleAutocorrect(e)},readerToggleFeature:e=>{this._contentScriptActions.readerToggleFeature(e)},toggleCitationBuilderForDomain:e=>{this._contentScriptActions.toggleCitationBuilderForDomain(e)},changeStrongDialect:e=>{this._dapiActions.changeStrongDialect(e)},setDesktopIntegration:e=>{this._contentScriptActions.setDesktopIntegration(e)},setEmogenieEmojiState:e=>{this._dapiActions.setEmogenieEmojiState(e)},setSerengetiState:e=>{this._dapiActions.setSerengetiState(e)},toggleKnowledgeHub:e=>{this._contentScriptActions.toggleKnowledgeHub(e)}}}}},55419:(e,t,i)=>{i.d(t,{fA:()=>c,pL:()=>y});var a=i(40327),n=i(27378),s=i(43955),r=i(79921),o=i(19060);const l=({message:e,emoji:t,emojiId:i,icon:a,iconPartName:s})=>n.createElement("div",{className:o.insight},t&&i&&n.createElement("div",{className:o.insight__inline_icon},n.createElement(r.dy,{unicodeHexArray:[i],unicodeLiteral:t})),a&&n.createElement("div",{className:o.insight__inline_icon,"data-grammarly-part":s},a),n.createElement("div",{className:o.insight__inline_text},e));var c,d=i(87776),u=i(46547),p=i(88326),m=i(90361),g=i(31278),h=i(3656),v=i(77176),f=i(18208),w=i(19703),b=i(85715),S=i(61082);!function(e){e.hidden="hidden",e.zero="zero",e.visible="visible"}(c||(c={}));const y=({predictionsVM:e})=>b.UI.mount(I,e.previewFlow),E=b.UI.Grid.make((({slots:e})=>n.createElement("div",{className:S.predictions},n.createElement("div",{className:S.predictions__header},"Predictions"),e.children))),C=({children:e,count:t,dataPartName:i})=>n.createElement(u.Z,{kind:"assistant-priority-lens",dataPartName:i,marginBottom:"12px"},n.createElement("div",{className:S.predictions__card},e,t>0&&n.createElement("div",{className:S.counterContainer},n.createElement(h.CL,null,t)))),k=b.UI.Node.make((({state:e,notify:t})=>n.createElement(p.M,{clickHandler:t("select")},n.createElement(w.F.Fragment,null,e.pipe(v.U((e=>n.createElement(C,{count:e.alertsCount,dataPartName:"emogenie-prediction-card"},n.createElement(l,{key:"tone",message:"off"===e.emotion.brandToneLabel?n.createElement(n.Fragment,null,"May sound ",n.createElement("span",{className:S.predictions__off_brand},"off-brand")):`Sounds ${e.emotion.name}`,emoji:e.emotion.emoji,emojiId:e.emotion.emojiId}))))))))),_=b.UI.Node.make((({state:e,notify:t})=>n.createElement(p.M,{clickHandler:t("select")},n.createElement(w.F.Fragment,null,e.pipe(v.U((e=>n.createElement(C,{count:e.alertsCount,dataPartName:"readers-attention-prediction-card"},n.createElement(l,{key:"readersAttention",message:f.kC(e.message),icon:e.icon===s.d.ok?n.createElement(g.JO.ValidationOk,{width:16}):e.icon===s.d.warning?n.createElement(d.a,null):e.icon===s.d.feedback?n.createElement(g.JO.Megaphone,{width:16}):(0,m.vE)(e.icon),iconPartName:e.icon===s.d.ok?"icon-ok":e.icon===s.d.warning?"icon-warning":e.icon===s.d.feedback?"icon-feedback":(0,m.vE)(e.icon)}))))))))),A=b.UI.Group.make({tone:T(k),readersAttention:T(_)}),I=b.UI.Union.make("kind",{[c.hidden]:b.UI.Node.empty,[c.zero]:b.UI.Node.empty,[c.visible]:b.UI.Composite.make(E,A)});function T(e){return{tag:"_tag",members:{Some:(0,a.pipe)(e,b.UI.contramapState((e=>e.value))),None:b.UI.Node.empty}}}},15090:(e,t,i)=>{i.d(t,{g:()=>a});var a,n=i(40327),s=i(85985),r=i(15646),o=i(83078);!function(e){e.createSubscription=function(e,t,i){return e.pipe(s.h(r.lY.isAlertApplyAction)).subscribe((e=>(0,n.pipe)(i(e.alertId),o.bw((e=>{"unlocked"===o.Fc(e.extraProperties.freePremium)&&t.freePremiumSuggestionAcceptButtonClick("assistant")})))))}}(a||(a={}))},36412:(e,t,i)=>{i.d(t,{Zz:()=>l,h4:()=>r,uT:()=>o});var a=i(27378),n=i(67166),s=i(53834);const r=({sanitizedTitle:e})=>a.createElement("div",{className:s.header},a.createElement("div",{className:s.flag},a.createElement("div",{className:s.flagTop}),a.createElement("div",{className:s.flagBottom})),a.createElement("div",{className:s.title,dangerouslySetInnerHTML:{__html:e}})),o=({sanitizedBody:e})=>a.createElement(a.Fragment,null,e.map((e=>a.createElement("p",{key:e,className:s.paragraph,dangerouslySetInnerHTML:{__html:e}})))),l=e=>a.createElement(n.X,{style:{width:280},onClose:e.onClose,includeMainContentPadding:!1,mainContent:a.createElement("div",{className:s.content,"data-has-footer":e.popupFooter?"true":"false"},a.createElement(r,{sanitizedTitle:e.sanitizedPopupTitle}),a.createElement(o,{sanitizedBody:e.sanitizedPopupBody}),e.popupFooter?e.popupFooter:null)})},11731:(e,t,i)=>{i.d(t,{c:()=>a});var a,n=i(31699);!function(e){e.sanitizeSuspendTitle=function(e){return e?(0,n.sanitize)(e):"Grammarly is unavailable in your country"},e.sanitizeSuspendBody=function(e){return e?e.map(n.sanitize):["In response to Russia’s invasion of Ukraine, we have suspended service to accounts in Russia and Belarus."]},e.sanitizeSuspendLearnMoreLabel=function(e){return e?(0,n.sanitize)(e):"Learn more"}}(a||(a={}))},72998:(e,t,i)=>{i.r(t),i.d(t,{StandWithUkraineGrammarlySuspendedPopup:()=>c,StandWithUkraineSuspendFooter:()=>d});var a=i(27378),n=i(11731),s=i(19106),r=i(24606),o=i(36412),l=i(88910);const c=e=>(a.useEffect((()=>{s.J.standWithUkraineSuspendPopupShow()}),[]),a.createElement(o.Zz,{onClose:()=>{e.onClose(),s.J.standWithUkraineSuspendCloseButtonClick()},sanitizedPopupTitle:n.c.sanitizeSuspendTitle(e.popupTitleHTML),sanitizedPopupBody:n.c.sanitizeSuspendBody(e.popupBodyHTML),popupFooter:a.createElement(d,{onLearnMore:()=>{e.onLearnMore(),s.J.standWithUkraineSuspendLearnMoreButtonClick()},sanitizedLearnMoreButtonLabelHTML:n.c.sanitizeSuspendLearnMoreLabel(e.popupLearnMoreButtonLabelHTML)})})),d=e=>a.createElement(r.z,{className:l.learnMoreButton,onClick:e.onLearnMore},a.createElement("span",{dangerouslySetInnerHTML:{__html:e.sanitizedLearnMoreButtonLabelHTML}}))},45662:(e,t,i)=>{i.d(t,{c:()=>n});var a=i(41186);class n{constructor(e){this._highlights=e}addHighlight(e,t,i){return this._highlights.addHighlight(e,t,i)}updateHighlight(e,t,i){return this._highlights.updateHighlight(e,t,i)}removeHighlights(e){return this._highlights.removeHighlights(e)}recalculateHighlight(e){return this._highlights.recalculateHighlight(e)}recalculateAllHighlights(){return this._highlights.recalculateAllHighlights()}maintainConsistency(e,t=(e=>e),i=!1){return this._highlights.maintainConsistency(e,t,i)}hasHighlight(e){return this._highlights.hasHighlight(e)}getSelectedHighlightsTracker(e){return(0,a.H)({...e,highlights:this._highlights})}getGeometryByHighlightId(e){return this._highlights.geometry.get().get(e)}}},77757:(e,t,i)=>{i.d(t,{N:()=>n,c:()=>s});var a=i(88661);const n=(e,t)=>s(t)&&/^mail\.google\.com$/.test(e),s=e=>e.isGateEnabled(a.K.KnowledgeHubGmail)},86803:(e,t,i)=>{i.d(t,{U:()=>r});var a=i(88661),n=i(73763),s=i(17939);function r(e,t){return/^mail\.google\.com$/.test(e)?t.isGateEnabled(a.K.ReaderV1Internal)||"test"===t.getTreatment(n.p.ReaderV1External)?s.gt.full:"control"===t.getTreatment(n.p.ReaderV1External)?s.gt.trackingOnly:s.gt.none:s.gt.none}},17939:(e,t,i)=>{i.d(t,{Jr:()=>s,gt:()=>a});var a,n=i(86803);function s(e,t,i,s){var r;const o=null==i?void 0:i.reader,l=((null==o?void 0:o.disableByDomain)||[]).some((t=>new RegExp(t).test(e)));return(null==o?void 0:o.disabled)||(null===(r=null==o?void 0:o.disableByBrowser)||void 0===r?void 0:r[t])||l?a.none:(0,n.U)(e,s)}!function(e){e.none="none",e.trackingOnly="trackingOnly",e.full="full"}(a||(a={}))},65060:(e,t,i)=>{i.d(t,{g:()=>a,m:()=>p});var a,n=i(57050),s=i(37539),r=i(36156),o=i(16892),l=i(48521),c=i(4890),d=i(73975),u=i(5114);function p(e){return e.id===a.id}!function(e){e.id="ReadersAttentionItemId",e.kind="ReadersAttentionItem",e.eq=d.f7(((e,t)=>e.hashCode()===t.hashCode()&&o.s.PositionState.eq.equals(e.positionState,t.positionState)&&l.o.VisualState.eq.equals(e.visualState,t.visualState))),e.hashCodeOwnFields=e=>(0,r.NO)({title:e.title,description:e.description,details:(0,n.zG)(e.details,u.fold((()=>"none"),(e=>`some(${e})`))),attentionScore:s.T.prism.reverseGet(e.attentionScore)}),e.hashCode=e.hashCodeOwnFields,e.create=function(t,i,a){return{id:e.id,kind:e.kind,renderOptions:{...c.j.defaultOptions,layoutDensity:c.j.Density.minimal},positionState:i,visualState:a,title:t.title,description:t.description,details:t.details,attentionScore:t.attentionScore,equals(t){return e.eq.equals(this,t)},hashCode(){return e.hashCode(this)}}}}(a||(a={}))},16314:(e,t,i)=>{var a;function n(e){return e.type===a.miniCardClick}function s(e){return e.type===a.ignoreButtonClick}function r(e){return e.type===a.viewMoreButtonClick}function o(e){return e.type===a.feedbackButtonClick}i.d(t,{Dy:()=>a,Q:()=>r,RJ:()=>o,Vl:()=>n,l9:()=>s}),function(e){e.miniCardClick="readersAttentionItemMiniCardClick",e.ignoreButtonClick="readersAttentionItemIgnoreButtonClick",e.viewMoreButtonClick="readersAttentionItemViewMoreButtonClick",e.feedbackButtonClick="readersAttentionItemFeedbackButtonClick"}(a||(a={}))},35501:(e,t,i)=>{i.d(t,{h:()=>g,r:()=>h});var a=i(27378),n=i(76457),s=i(3656),r=i(77176),o=i(37539),l=i(8125),c=i(19703),d=i(12187),u=i(34217),p=i(45740);const m=({progress:e})=>a.createElement(c.F.Fragment,null,e.pipe(r.U((e=>a.createElement(n.P,{percentage:o.g.prism.reverseGet(e),colorType:n.P.ColorType.neoBlue,iconSize:n.P.IconSize.extraSmall,theme:{radialProgressBar:p.circleProgress,radialProgressText:p.circleText}}))))),g=e=>u.UI.Node.make((({view:t})=>a.createElement(c.F.div,{...(0,d.Sh)(p.header,t("density").pipe(r.U((e=>"normal"===e)),r.U((0,l.RN)(p.normal,p.compact))))},a.createElement("div",{className:p.progressIcon},a.createElement(m,{progress:t("attentionScore").pipe(r.U(o.g.fromRatio))})),a.createElement(s.XY,{...(0,d.Sh)(p.title,"full"===e?p.full:void 0)},t("title"))))),h=u.UI.Node.make((({view:e})=>a.createElement(a.Fragment,null,a.createElement("div",{className:p.progressContainer,"data-name":"attention-score-progress-bar"},a.createElement(c.F.div,{className:p.progressBar,style:{width:e("attentionScore").pipe(r.U(o.g.fromRatio),r.U(o.g.prism.reverseGet),r.U((e=>`${e}%`)))}},a.createElement(s.XY,{className:p.progressValue,"data-name":"attention-score-progress-value"},e("attentionScore").pipe(r.U(o.g.fromRatio),r.U(o.g.prism.reverseGet),r.U((e=>`${e}%`)))))),a.createElement(s.XY,{className:p.description},e("attentionScoreDescription")))))},70026:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(38983);class n{constructor(e,t){this._viewHistory=[],this._startupPlaceHolder=e,this._activeView=a.h.create(this._startupPlaceHolder),this._defaultView=t}get activeView(){return this._activeView.view()}get lastView(){return this._viewHistory[this._viewHistory.length-1]||this._defaultView}pushActiveView(e){const t=this._activeView.get();e.type!==t.type&&(t.type!==this._startupPlaceHolder.type&&this._viewHistory.push(t),this._activeView.set(e))}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}replaceActiveView(e){e.type!==this._activeView.get().type&&this._activeView.set(e)}}},84286:(e,t,i)=>{i.d(t,{D:()=>n,f:()=>a});var a,n,s=i(40327),r=i(64015),o=i(15646),l=i(5114),c=i(28811),d=i(26393),u=i(79880);!function(e){e.create=function(e){return{type:o.lY.Type.sduiCardAction,sourceId:"native",cardId:"",actions:e,scope:{alertRefs:[]}}}}(a||(a={})),function(e){function t(e,t){return c.a.find((e=>e.id.toString()===t))(e)}let i,a,n,o,p,m,g;e.getById=t,e.getByAlertId=function(e,t){return c.a.find((e=>{const i=d.a.getAllAlertIds(e.content);return 1===i.length&&i[0]===t}))(e)},function(e){function t(e){return"strongAlertRef"===e.type}function i(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===u.MU.StrongAlertRefBulkDismiss}function a(e){return c.a.find((e=>i(e.content)))(e)}e.isStrongAlertRefContent=t,e.isStrongAlertRefBulkDismissContent=i,e.findStrongAlertRefBulkDismissSduiItem=a,e.getStrongAlertRefBulkDismissAlertIds=function(e){return(0,s.pipe)(a(e),l.map((e=>new Set(e.alertIds.map((e=>e.toString()))))),l.getOrElse((()=>new Set)))},e.findStrongAlertRefUpgradeHookSduiItem=function(e){return c.a.find((e=>{return t(i=e.content)&&"known"===(null===(a=i.name)||void 0===a?void 0:a.kind)&&i.name.value===u.MU.StrongAlertRefUpgradeHook;var i,a}))(e)}}(i=e.StrongAlertRef||(e.StrongAlertRef={})),function(e){function i(e){return"gButton"===e.type}function a(e,a){return(0,s.pipe)(t(e,a),l.map((e=>e.content)),l.filter(i))}e.DEFAULT_GBUTTON_ID="gButton-default",e.TONE_GBUTTON_ID="gButton-tone",e.GET_STARTED_GBUTTON_ID="gButton-get-started",e.isGButtonContent=i,e.getContent=a,e.getPushAssistantFeedAction=function(e,t){return(0,s.pipe)(a(e,t),l.map((e=>e.actions)),l.chain((e=>l.fromNullable(e.find(o.isPushAssistantFeedAction)))))}}(a=e.GButton||(e.GButton={})),function(e){e.isViewStackContent=function(e){return"viewStack"===e.type},e.getSelectedContent=function(e){return l.fromNullable(e.views[e.selected])}}(n=e.ViewStack||(e.ViewStack={})),function(e){function i(e){return"assistantFeed"===e.type}let a;e.BULK_DISMISS_CARD_FEED_ID="bulk-dismiss-card-feed",e.BULK_DISMISS_REVIEW_FEED_ID="bulk-dismiss-review-feed",e.TONE_INSIGHTS_CARD_FEED_ID="tone-insights-card-feed",e.TONE_INSIGHTS_SUGGESTIONS_FEED_ID="tone-insights-suggestions-feed",e.isAssistantFeedContent=i,e.getContent=function(e,a){return(0,s.pipe)(t(e,a),l.map((e=>e.content)),l.filter(i))},e.createFocusAssistantCardAction=function(e){return{type:"focusAssistantCard",cardId:e}},e.createPopAssistantFeedAction=function(){return{type:"popAssistantFeed"}},e.createPushAssistantFeedAction=function(e,t){return{type:"pushAssistantFeed",feedId:e,cardId:t}},e.isPushAssistantFeedAction=function(e){return"pushAssistantFeed"===e.type},function(t){function i(e){return(0,s.pipe)(l.some(d.a.reduce(e,((e,t)=>"button"===t.type&&"back"===t.name.value?e.concat(t.actions):e),d.a.TreeTraversal.PostOrder,[])),l.filter(r.Od))}function a(e,i){return(0,s.pipe)(t.getContent(e,i),l.chain(n.getSelectedContent))}t.getContent=function(t,i){return(0,s.pipe)(e.getContent(t,i),l.map((e=>e.header)),l.filter(n.isViewStackContent))},t.getBackButtonActions=i,t.getSelectedViewContent=a,t.getSelectedViewBackButtonActions=function(e,t){return(0,s.pipe)(a(e,t),l.chain(i))}}(a=e.Header||(e.Header={}))}(o=e.AssistantFeed||(e.AssistantFeed={})),function(e){function i(e){return"proofitButton"===e.type}e.ID="proofit-button",e.isProofitContent=i,e.getContent=function(e,a){return(0,s.pipe)(t(e,a),l.map((e=>e.content)),l.filter(i))}}(p=e.Proofit||(e.Proofit={})),function(e){e.ID="upgrade_hook",e.findUpgradeHookSduiItem=function(i){return t(i,e.ID)}}(m=e.NativeUpgradeHook||(e.NativeUpgradeHook={})),function(e){e.ID="success_report",e.findSuccessReportSduiItem=function(i){return t(i,e.ID)}}(g=e.SuccessReport||(e.SuccessReport={}))}(n||(n={}))},50034:(e,t,i)=>{if(i.d(t,{Cr:()=>S,OY:()=>E,Td:()=>m,XG:()=>y,ab:()=>f,eC:()=>u,ex:()=>b,fo:()=>h,gO:()=>l,r4:()=>g,xq:()=>p}),1388==i.j)var a=i(57050);var n=i(57271),s=i(90361);if(1388==i.j)var r=i(5114);if(1388==i.j)var o=i(55415);function l(e,t){var i,a,n;const s=null===(n=null===(a=null===(i=null==t?void 0:t.citationBuilder)||void 0===i?void 0:i.domains)||void 0===a?void 0:a[e])||void 0===n?void 0:n.disabled;return void 0!==s?!s:void 0}function c(e,t){return f(t).some((t=>new RegExp(t.domain).test(e)))}function d(e){var t,i;return!(null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.disabled)&&void 0!==i&&i)}function u(e,t){return f(t).some((t=>{const i=new RegExp(t.domain),a=new RegExp(t.pathname);return i.test(e.hostname)&&a.test(e.pathname)}))}function p(e){return r.tryCatch((()=>{const t=new URL(e).hostname.split(".");return t.slice(t.length-2).join(".")}))}function m(e,t,i,a){return i?function(e,t,i){const a=l(e,i);return d(t)&&(void 0===a&&c(e,t)||!0===a)}(e,t,a):function(e,t,i){return d(t)&&c(e,t)&&!1!==l(e,i)}(e,t,a)}function g(e,t,i){return d(t)&&(i?!function(e,t){var i,a;return(null!==(a=null===(i=t.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==a?a:[]).includes(e)}(e,t):c(e,t))}function h(e,t){var i,a,n;const s=new Set(null!==(a=null===(i=e.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==a?a:[]);return Object.entries((null===(n=t.citationBuilder)||void 0===n?void 0:n.domains)||{}).filter((([,e])=>void 0!==e&&!e.disabled)).filter((([e])=>{return t=e,!s.has(t);var t})).map((([e])=>e))}const v={name:"samples.extension.grammarlyaws.com",domain:"^samples.extension.grammarlyaws.com$",pathname:".*"};function f(e){var t,i;return(null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.sources)&&void 0!==i?i:[]).concat(v)}const w=(0,s.hz)((()=>{const e=document.location.href;return(0,n.KK)(e)})),b=(0,s.hz)((e=>{const t=document.location.href;return{url:t,domain:(0,n.KK)(t),isUrlAllowlisted:u(document.location,e)}})),S=(0,s.hz)((()=>s.iy.create()));function y(e){const t=S(),i=w();return(0,a.zG)(e,o.H6("citeCopyButtonClick","citeCopyIntextClick","citePopupButtonDisable","citePopupButtonShow","citePopupEditClick","citePopupButtonClick","citePopupEditSuccess","citePopupMissingInfoShow","citePopupMissingInfoFormShow","feedbackSentButtonClick","citePopupAddMissingClick"),(e=>({...e,domain:i,sessionId:t})))}function E(e,t){return e.manualInvocation&&!0===l(t.domain,t)}},2378:(e,t,i)=>{if(i.d(t,{b_:()=>g,f0:()=>o,s6:()=>m}),3075==i.j)var a=i(88326);var n=i(32138),s=i(27378);if(3075==i.j)var r=i(49468);var o,l=i(75675),c=i(30287),d=i(24372),u=i(92783),p=i(7403);!function(e){e.hide="hideGdocsSigninPopupMessage"}(o||(o={}));const m=e=>s.createElement(r.o,{className:p.popup},s.createElement(a.M,{clickHandler:e.onClose},s.createElement("div",{className:p.close})),s.createElement(g,{onClick:()=>{var t;e.onClose(),null===(t=e.onClick)||void 0===t||t.call(e)},openSigninPage:e.openSigninPage})),g=e=>{const t=(0,u.G6)()?s.createElement(s.Fragment,null,"Welcome to Grammarly",s.createElement("br",null),"for Google Docs!"):s.createElement(s.Fragment,null,"Welcome to the Grammarly beta",s.createElement("br",null),"for Google Docs!");return s.createElement("div",{className:p.wrapper},s.createElement(l.h,null),s.createElement("div",{className:p.content},s.createElement("div",{className:p.animation}),s.createElement("div",{className:p.title},t),s.createElement("div",{className:p.subtitle},"Sign up to turn on Grammarly",s.createElement("br",null),"suggestions in your Google Docs."),s.createElement(c.RK,{handleClick:t=>{var i;const a="signup"===t?(0,n.Xc)("signupHook","toolbarMenu"):(0,n.s7)();e.openSigninPage(a),null===(i=e.onClick)||void 0===i||i.call(e),d.J.gdocsRegisterPromptButtonClick(t)}})))}},28035:(e,t,i)=>{if(i.d(t,{E:()=>r,M:()=>s}),3075==i.j)var a=i(88661);var n=i(5817);const s=(e,t)=>e.anonymous&&(!t.hideGdocsSigninPopupTime||t.hideGdocsSigninPopupTime+n.g0<Date.now()),r=(e,t,i)=>e.anonymous&&i.isGateEnabled(a.K.StandWithUkraineGrammarlySuspended)&&(!t.hideGdocsStandWithUkraineSuspendedPopup||t.hideGdocsStandWithUkraineSuspendedPopup+n.g0<Date.now())},86620:(e,t,i)=>{i.d(t,{C:()=>c,U:()=>a});var a,n=i(27378),s=i(29511),r=i(33678),o=i(88056),l=i(95574);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...r.a.Flag},e.Context=n.createContext(o.Y.invariantContent("Environment"))}(a||(a={}));class c{constructor(e=(0,s.O)()){this._flags=new Set,this.actions={openUrl:e=>l.vM((()=>{document.location.href=e.toString()})),openPopup:e=>l.vM((()=>{const t=self.open(e.toString(),void 0,"noreferrer");t&&(t.opener=null)}))},e.config.systemInfo.os.isMac&&this._flags.add(a.Flag.isAppleSystem),this._flags.add(a.Flag.supportsSVGDominantBaseline),this._flags.add(a.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}},90989:(e,t,i)=>{i.d(t,{I:()=>c,S:()=>a});var a,n=i(27378),s=i(50474),r=i(88056),o=i(19429),l=i(35407);!function(e){e.Context=n.createContext(r.Y.invariantContent("SidebarTextResources")),e.holder=o.VF((()=>({logoText:"GRAMMARLY",plagiarismTooltip:"Scan for plagiarism",setGoalsTooltip:"Adjust goals",statisticsTooltip:"See performance"})))}(a||(a={}));const c=l.GG({denali:s.m.holder,sidebar:a.holder})},25575:(e,t,i)=>{i.d(t,{o:()=>d});var a=i(27378);if(3075==i.j)var n=i(53112);if(3075==i.j)var s=i(24606);if(3075==i.j)var r=i(3656);var o=i(48162);const l=({gnar:e,onSignIn:t,showSignInReminder:i})=>a.createElement(a.Fragment,null,a.createElement(r.CL,{className:o.cardText,color:n.Z.neutral90},i?"Sign back in to use Grammarly with ease and get access to key Grammarly features.":"To continue to apply Grammarly suggestions by simply clicking on them, you’ll need to create an account. Don’t worry, it’s free."),a.createElement(s.z,{kind:"success",size:"small",onClick:()=>{e.anonymousGDocsSidebarSignInCardButtonClick("gdocsSidebar"),t()}},"Sign in")),c=({gnar:e,onCreateAccount:t})=>a.createElement(a.Fragment,null,a.createElement(r.CL,{className:o.cardText,color:n.Z.neutral90},"To continue to apply Grammarly suggestions by simply clicking on them, you'll need to sign into your account."),a.createElement(s.z,{kind:"success",size:"small",onClick:()=>{e.anonymousGDocsSidebarSignUpCardButtonClick("gdocsSidebar"),t()}},"Create account")),d=({gnar:e,isUserLoggedOut:t,showSignInReminder:i,onSignIn:n,onCreateAccount:s})=>a.createElement("div",{className:o.cardContainer},a.createElement(r.H4,null,"Better Writing in Google Docs"),t?a.createElement(l,{gnar:e,onSignIn:n,showSignInReminder:i}):a.createElement(c,{gnar:e,onCreateAccount:s}))},10720:(e,t,i)=>{i.d(t,{US:()=>G,hz:()=>W,ux:()=>j});var a=i(57050),n=i(27378),s=i(48081),r=i(9526),o=i(66896),l=i(89894),c=i(68579),d=i(36156),u=i(71841),p=i(74238),m=i(99116),g=i(35416),h=i(18955),v=i(77176),f=i(98403),w=i(32952),b=i(93508),S=i(76974),y=i(2844),E=i(60797),C=i(24209),k=i(18625),_=i(66310),A=i(40151),I=i(14811),T=i(2834),M=i(95093),x=i(24713),R=i(85985),F=i(49708),L=i(17343),P=i(19751),N=i(5114),B=i(19962),U=i(19703),D=i(42040),V=i(85715),O=i(52856);const H=V.UI.Grid.make((({slots:e,view:t})=>n.createElement(U.F.div,{style:{marginBottom:t("spacing").pipe(v.U(l.ux.rem))}},e.children)));function G(e){switch(e){case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.Priority:return.75;default:return 1}}const W=n.forwardRef((({state:e,cardsViewModel:t,cardsListScrollManager:i,connectorElements:o,header:l,footer:p,capabilities:m,comparator:v,readersAttentionItemViewModel:y},E)=>{const C=f.jw((e=>{let t=7;return t=31*t+(0,d.AC)(e.currentLens.id),t=31*t+(g.nL.hasItems(e)?1231:1237),t}),e).view((e=>g.nL.hasItems(e.get())?e.view(g.nL.Prism.getLens()):null)).view((e=>e?{state:e,spacing:G(e.get().id)}:null)),k=n.useContext(r.Dg).state;return n.createElement(h.d,{className:S.of(""),name:"cardlist",stateSyncListener:z(i,o,k),height:j(e,i,m),isMaster:!0},n.createElement(n.Fragment,null,l?n.createElement(U.F.div,{className:O.headerOrFooterWrapper,mount:e=>o.lens("title").set(N.fromNullable(e))},l):null,n.createElement(U.F.div,{mount:E},C.view((e=>{return e?V.UI.mount((n=e.spacing,(0,a.zG)(c.A.cardList(s.O.item(t.actionEvents)),V.UI.patch("content","cell","item")((e=>(0,a.zG)(V.UI.Knot.make(H,{children:e.child}),V.UI.squash,V.UI.contramapState((e=>({children:e,root:{spacing:n}}))),V.UI.mapAction((e=>e.action))))))),(e=>(0,a.zG)(s.O.createCardListFlow(y)(t,e,new w.xQ,u.i$(i).pipe(b.O(!1)),m,v)))(e.state)):null;var n}))),p?n.createElement(U.F.div,{className:O.headerOrFooterWrapper},p):null))})),j=(e,t,i)=>{const a=(0,m.Sd)(i)(e.view(g.nL.mapper((({currentLens:e,alertSource:t})=>N.some({currentLens:e,alertSource:t})))));return y.aj([a.pipe(E.oA,v.U((({currentLens:e})=>e.cardsHeight)),b.O(0)),t.paddingTop]).pipe(v.U((([e,t])=>e+t)))},z=(e,t,i)=>{const a=D.C8.Logging.getLogger("view_models");return C.T(k.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(_.w(N.fold((()=>A.E),(e=>I.YC(e).pipe(T.b((()=>a.debug("update card list viewport due to viewport resize event"))),M.T(i.pipe(x.j("dragging"),R.h((e=>!e)),_.w(f.b2.rafScheduler),T.b((()=>a.debug("update card list viewport due to drag end event"))))),v.U((()=>e.getBoundingClientRect())),v.U((e=>({top:p.r.FromWindowTop.ISO.wrap(e.top),height:e.height}))))))),T.b(f.wW(e.viewport))),t.view("scrollProvider").pipe(_.w(N.fold((()=>A.E),(t=>F.R(t,"scroll").pipe(v.U((()=>t.scrollTop)),b.O(t.scrollTop),T.b(f.wW(e.scrollTop)),L.h(f.PU)))))),t.view("title").pipe(_.w(N.fold((()=>S.of(B.UL.empty)),(e=>I.YC(e)))),v.U((e=>e.height)),P.shareReplay({bufferSize:1,refCount:!0}),T.b(f.wW(e.paddingTop))),t.view("scrollConsumer").pipe(_.w(N.fold((()=>A.E),(t=>e.scrollOffset.pipe(T.b((e=>{t.scrollTop+=e})))))))).pipe(L.h(void 0))}},6784:(e,t,i)=>{i.d(t,{C:()=>L,S:()=>F});var a=i(40327),n=i(46149),s=i(27378),r=i(48081),o=i(10720),l=i(101),c=i(66896),d=i(94785),u=i(6100),p=i(18955),m=i(98403),g=i(60797),h=i(77176),v=i(5114),f=i(19962),w=i(19703),b=i(85715),S=i(27194),y=i(73582),E=i(19106),C=i(62111),k=i(38819),_=i(87527);const A=({upgradeViewModel:e})=>{const t=e.advancedAlerts.pipe(h.U(v.map((e=>({count:e.count,alerts:e.alerts()})))));return s.createElement(w.F.div,{className:_.premiumLens},b.UI.mount(k.r,b.Z.fromSideEffect((t=>{"upgrade"===t.action.action.action.kind?(E.J.getPremiumButtonClick("gDocsSidebarAssistantSuccessView","GoPremium",void 0,void 0,void 0,"advancedIssues","gDocsSidebarSuccessView"),(0,C.T)().upgradeHooks.clickUpgradeHook("advancedIssues","gDocsSidebarSuccessView"),e.openUpgradeUrl(y.L.Place.gdocsSidebarSuccessView)):"onUpgradeButtonMount"===t.action.action.action.kind&&(E.J.getPremiumButtonShow("gDocsSidebarAssistantSuccessView","GoPremium",void 0,void 0,void 0,"advancedIssues","gDocsSidebarSuccessView"),(0,C.T)().upgradeHooks.showUpgradeHook("advancedIssues","gDocsSidebarSuccessView"))}),t)))};var I=i(50474),T=i(89379),M=i(43805),x=i(56423);const R=({successLensViewModel:e})=>{const t=(0,T.hM)((0,T.wK)(e.successState.view("type"),s.useContext(I.m.Context)));return s.createElement(w.F.div,{className:x.successLens},b.UI.mount(M.q,t))},F=s.forwardRef((function({state:e,cardsViewModel:t,upgradeViewModel:i,cardsListScrollManager:a,capabilities:l,upgradeHookFlow:p,...g},h){const f=m.jw((e=>{let t=7;return t=31*t+(0,n.AC)(e.currentLens.id),t=31*t+(u.v.WithSuccess.State.isInSuccess(l)(e)?1231:1237),t}),e);return s.createElement(L,{ref:h},(e=>s.createElement(w.F.Fragment,null,f.view((n=>{const m=n.get();return m.currentLens.id===c.R.SpecialId.Premium?s.createElement(A,{upgradeViewModel:i}):u.v.WithSuccess.State.isInSuccess(l)(m)?s.createElement(R,{successLensViewModel:g.successLensViewModel}):s.createElement("div",null,s.createElement(o.hz,{state:n,cardsViewModel:t,cardsListScrollManager:a,connectorElements:e,header:b.UI.mount(d.n.TogglablePanel,p),comparator:r.O.listItemOrd,capabilities:l,readersAttentionItemViewModel:v.none}))})))))})),L=s.forwardRef((function({children:e,onClick:t,className:i=S.cardList,footer:n},r){const o=p.d.Elements.create(),c=(0,a.pipe)(o.view("viewport"),g.oA,h.U(f.UL.fromEl));return s.createElement("div",{onClick:t,className:i,ref:e=>{"function"==typeof r?r(e):r&&(r.current=e);const t=v.fromNullable(e);o.lens("scrollConsumer").set(t),o.lens("scrollProvider").set(t),o.lens("viewport").set(t)}},s.createElement(l.l.RootVirtualContainer,{name:"cardListConnector",viewport:c},e(o)),n)}))},1309:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(27378);if(3075==i.j)var n=i(62295);if(3075==i.j)var s=i(31278);if(3075==i.j)var r=i(66896);if(3075==i.j)var o=i(19703);var l=i(51635);const c=({lensPreviewViewModel:e})=>{const t=e.getLens(r.R.SpecialId.AllAlerts).view((e=>e.count));return a.createElement(o.F.div,{className:l.footer},a.createElement(d,{activeAlerts:t}))},d=({activeAlerts:e})=>a.createElement(o.F.Fragment,null,e.view((e=>e>0?a.createElement(n.x.OutcomeCounter,{count:e,theme:{counterWrapper:l.counterWrapper,counterContent:l.counter}}):a.createElement(s.JO.CheckmarkOutcomes,{className:l.counterCheckmarkIcon}))))},74928:(e,t,i)=>{i.d(t,{$l:()=>I});var a=i(27378);if(3075==i.j)var n=i(77394);if(3075==i.j)var s=i(90989);if(3075==i.j)var r=i(22667);if(3075==i.j)var o=i(64757);if(3075==i.j)var l=i(31278);if(3075==i.j)var c=i(81301);if(3075==i.j)var d=i(3656);if(3075==i.j)var u=i(66896);if(3075==i.j)var p=i(74660);if(3075==i.j)var m=i(40743);if(3075==i.j)var g=i(87667);if(3075==i.j)var h=i(92644);if(3075==i.j)var v=i(39474);if(3075==i.j)var f=i(43623);if(3075==i.j)var w=i(84317);if(3075==i.j)var b=i(77176);if(3075==i.j)var S=i(85985);if(3075==i.j)var y=i(22232);if(3075==i.j)var E=i(8125);if(3075==i.j)var C=i(5114);if(3075==i.j)var k=i(12187);var _=i(85715),A=i(95618);const I=({state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:s,features:r})=>{switch(r.priorityLens.kind){case n.h.Kind.dropdown:return a.createElement(T,{state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:s});case n.h.Kind.priorityToggle:return a.createElement(M,{state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:s,defaultMode:r.priorityLens.defaultMode});case n.h.Kind.none:return a.createElement(x,{navigationViewModel:t,modalManager:i});default:(0,y.vE)(r.priorityLens)}},T=({state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:n})=>a.createElement("div",{className:A.priorityLensHeader},a.createElement(R,{navigationViewModel:t,modalManager:i}),a.createElement("div",{className:A.prioritySwitchWrapper},_.UI.mount(g.n.Switch,(0,h.i)(n,t,e.pipe(b.U((e=>e.currentLens.id))))))),M=({state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:n,defaultMode:s})=>a.createElement("div",{className:A.priorityLensHeader},a.createElement(R,{navigationViewModel:t,modalManager:i}),a.createElement("div",{className:A.prioritySwitchFlatWrapper},_.UI.mount(f.B.DefaultHeader,(0,w.HP)(t,e.pipe(b.U((e=>e.currentLens.id)),S.h((0,E.Kg)(u.R.isPriority,u.R.isAllAlerts))),"priority"===s?v.H.LensMode.priority:v.H.LensMode.all,"compact",n,10)))),x=({navigationViewModel:e,modalManager:t})=>a.createElement("div",{className:A.defaultHeader},a.createElement(R,{navigationViewModel:e,modalManager:t}),a.createElement("div",{...(0,k.Sh)(A.lensNavigation,A.disabledLensNavigation)},_.UI.mount(m.C,_.Z.fromSideEffect((t=>{e.events.next({type:"switchToLens",id:t.lens.id,focusFirst:!1,actionSource:p.l$.sidebar})}),{activeLensId:C.none,previews:Object.values(e.lensPreviews.get()).filter((e=>e.id!==u.R.SpecialId.Vox)),disabled:!1})))),R=({navigationViewModel:e,modalManager:t})=>{const i=a.useContext(s.S.Context),n=t.state.view(C.exists((e=>e.instance.type===c.dC.SetGoals)));return a.createElement("div",{className:A.head},a.createElement("div",{className:A.headerGroup},a.createElement(r.K,{className:A.logoIcon,size:18}),a.createElement(d.H5,{className:A.logoText},i.logoText)),a.createElement(o.zx.Flat,{name:"setGoals",className:A.setGoalsButton,title:i.setGoalsTooltip,titleAlign:"bottomCenter",active:n,disabled:n,onClick:()=>e.events.next({type:"setGoals"})},a.createElement(l.JO.GoalsEmpty,{width:24})),a.createElement("div",{className:A.headerGroup},a.createElement("div",{className:A.divider}),a.createElement(o.zx.Flat,{name:"closeSidebar",onClick:()=>e.events.next({type:"toggleSidebar",actionSource:p.l$.sidebar})},a.createElement(l.JO.Close,{width:16}))))}},1473:(e,t,i)=>{i.d(t,{R:()=>c});var a=i(27378);if(3075==i.j)var n=i(22667);if(3075==i.j)var s=i(3656);if(3075==i.j)var r=i(74660);var o=i(67025);const l=()=>a.createElement("svg",{width:"11",height:"11",viewBox:"0 0 12 13",fill:"none"},a.createElement("path",{d:"M0.5 1L6 6.5M11.5 12L6 6.5M6 6.5L11.5 1M6 6.5L0.5 12",strokeLinecap:"round",strokeWidth:"1.5"})),c=({navigationViewModel:e})=>a.createElement("div",{className:o.header},a.createElement("div",{className:o.headerGroup},a.createElement("div",{className:o.logoIcon},a.createElement(n.K,null)),a.createElement(s.H5,null,"Grammarly")),a.createElement("div",{className:o.headerGroup},a.createElement("div",{className:o.closeButton,onClick:()=>{e.events.next({type:"toggleSidebar",actionSource:r.l$.sidebar})},role:"button"},a.createElement(l,null))))},80550:(e,t,i)=>{i.d(t,{L:()=>o});var a=i(57050),n=i(27378),s=i(5114),r=i(19703);const o=({modalManager:e})=>n.createElement(r.F.Fragment,null,e.state.view((0,a.ls)(s.map((({component:e})=>e)),s.toNullable)))},11177:(e,t,i)=>{i.d(t,{P:()=>o});var a=i(27378),n=i(50790),s=i(82858),r=i(32380);const o={unauthorizedError:(e,t)=>a.createElement(s.s.UnauthorizedError,{action:t("gotoLogin")}),offline:()=>a.createElement(l,null),alertUndo:(e,t)=>a.createElement(r.A.Standard,{action:t("undo"),params:e.args.params})},l=()=>a.createElement(n.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted.")},92132:(e,t,i)=>{i.d(t,{Q:()=>l});var a=i(27378),n=i(15073),s=i(60797),r=i(95300),o=i(5114);const l=({children:e,remSize:t,setter:i})=>(c+=1,a.useEffect((()=>{const e=t.subscribe((e=>{d.next(o.some(e)),i(o.some(e))}));return()=>{e.unsubscribe(),c-=1,0===c&&(d.next(o.none),i(o.none))}}),[t]),a.createElement(n.u.Context.Provider,{value:d.pipe(s.oA)},e));let c=0;const d=new r.X(o.none)},9025:(e,t,i)=>{i.d(t,{_:()=>s});var a=i(27378);if(3075==i.j)var n=i(94071);const s=({children:e,className:t})=>a.createElement("div",{className:t,style:{position:"fixed",right:"0px",top:"0px",bottom:"0px",width:n.xK,zIndex:1e3,background:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100vh"}},e)},94071:(e,t,i)=>{i.d(t,{H2:()=>s,iB:()=>a,kl:()=>r,xK:()=>n});const a=".docs-companion-sidebar",n="300px";var s;!function(e){e.selector=".companion-guest-app-switcher .app-switcher-button",e.selectedClass="app-switcher-button-selected",e.selectedSelector=`.${e.selectedClass}`,e.activeClass="app-switcher-button-active",e.hoverClass="app-switcher-button-hover",e.disabledClass="app-switcher-button-disabled"}(s||(s={}));const r=".companion-about-panel-button"},94663:(e,t,i)=>{i.d(t,{I:()=>r});var a=i(5802),n=i(41966);const s={priority:a.P.Priority.highest,timeout:a.P.TimeoutDisabled,position:a.P.Position.top,viewType:a.P.ViewType.standard};var r;!function(e){e.createFactory=function(){return{alertUndo:n.r.createBuilder().build({priority:a.P.Priority.low,timeout:a.P.DefaultTimeout,position:a.P.Position.bottomRight,viewType:a.P.ViewType.standard}),unauthorizedError:n.r.createBuilder().build(s),offline:n.r.createBuilder().build(s)}}}(r||(r={}))},70091:(e,t,i)=>{if(i.d(t,{U9:()=>L,jv:()=>N}),3075==i.j)var a=i(32138);var n=i(27378);if(3075==i.j)var s=i(3295);if(3075==i.j)var r=i(86620);if(3075==i.j)var o=i(90989);if(3075==i.j)var l=i(25575);if(3075==i.j)var c=i(6784);if(3075==i.j)var d=i(1309);if(3075==i.j)var u=i(74928);if(3075==i.j)var p=i(1473);if(3075==i.j)var m=i(80550);if(3075==i.j)var g=i(11177);if(3075==i.j)var h=i(92132);if(3075==i.j)var v=i(9025);if(3075==i.j)var f=i(50981);var w=i(48189),b=i(49468);if(3075==i.j)var S=i(51369);if(3075==i.j)var y=i(42103);if(3075==i.j)var E=i(33678);if(3075==i.j)var C=i(15073);if(3075==i.j)var k=i(50474);if(3075==i.j)var _=i(47861);if(3075==i.j)var A=i(90845);if(3075==i.j)var I=i(76974);if(3075==i.j)var T=i(91463);var M=i(89631),x=i(86877),R=i(91529);const F=({state:e,gnar:t,user:i,anonymousFrictionGDocsService:r,cardsViewModel:o,navigationViewModel:m,successLensViewModel:h,upgradeViewModel:f,cardsListScrollManager:w,notificationManager:b,lensPreviewViewModel:S,modalManager:y,features:E,capabilities:C,upgradeHookFlow:k})=>{const[A,I]=n.useState(i.view("anonymous").get());return n.useEffect((()=>{const e=i.view("anonymous").subscribe((e=>{I(e)}));return()=>e.unsubscribe()}),[]),A&&r.peekTreatment()?n.createElement(v._,{className:R.sidebarContainer},n.createElement(p.R,{navigationViewModel:m}),n.createElement("section",{className:R.sidebarContent},n.createElement(l.o,{gnar:t,showSignInReminder:r.isInTreatmentWithOneLockedSuggestion,isUserLoggedOut:r.anonymousUserType===s.q.LoggedOut,onCreateAccount:()=>{self.open((0,a.Xc)("signupHook","gdocsSidebarAnonymousCard"))},onSignIn:()=>{self.open((0,a.s7)())}}))):n.createElement(v._,{className:R.sidebarContainer},n.createElement(u.$l,{state:e,navigationViewModel:m,modalManager:y,lensPreviewViewModel:S,features:E}),n.createElement(c.S,{cardsViewModel:o,state:e,successLensViewModel:h,upgradeViewModel:f,cardsListScrollManager:w,capabilities:C,upgradeHookFlow:k}),"none"!==E.priorityLens.kind?null:n.createElement(d.Z,{lensPreviewViewModel:S}),n.createElement(_.i,{key:"notificationCenter",manager:b,views:g.P,theme:{grid:{container:x.container,bottomLeft:x.bottomLeft,bottomRight:x.bottomRight,top:x.top},view:{wrapper:x.notificationWrapper}}}))};function L(e){return({integration:t,sidebarReady:i,shortenItFeature:a,ethicalAIFeature:s,cardEvents:o,user:l,anonymousFrictionGDocsService:c})=>function(){const d=t.engine,u=new r.C,{lensState:p,cardsViewModel:g,navigationViewModel:h,successLensViewModel:v,upgradeViewModel:w,dispose:b,cardsListScrollManager:y,notificationManager:E,lensPreviewViewModel:C,modalManager:k,capabilities:_,upgradeHookFlow:I}=(0,f.G)(d,t.denaliViewAdapter,e,t.connectionState,t.gnar,t.user,l,t.document.settings.lens("selectedLens"),t.features,i,a,s,o,t.experimentClient);return A.P.useEffectOnWillUnmount((()=>{d.shutdown(),b()})),n.createElement(P,{environment:u},n.createElement(F,{anonymousFrictionGDocsService:c,user:l,gnar:t.gnar,state:p,cardsViewModel:g,navigationViewModel:h,successLensViewModel:v,upgradeViewModel:w,cardsListScrollManager:y,notificationManager:E,lensPreviewViewModel:C,modalManager:k,features:t.features,capabilities:_,upgradeHookFlow:I}),n.createElement(m.L,{modalManager:k}),n.createElement(S.X,null))}}const P=({environment:e,children:t})=>{const i=n.useRef((0,o.I)(k.m.getConfig(e.has(r.U.Flag.isAppleSystem)?"mac":"windows")));return n.createElement(h.Q,{remSize:I.of(16),setter:e=>C.u.setRootCssVar(document.documentElement,e)},n.createElement(r.U.Context.Provider,{value:e},n.createElement(E.a.Context.Provider,{value:e},n.createElement(o.S.Context.Provider,{value:i.current.sidebar},n.createElement(k.m.Context.Provider,{value:i.current.denali},n.createElement(T.TG.ContextMock,null,n.createElement(y.G.DefaultProvider,null,n.createElement(N,null,t))))))))},N=({children:e})=>n.createElement(n.Fragment,null,n.createElement(b.o,{"data-grammarly-part":"gdocs-sidebar",className:M.wrapper},e),n.createElement(w.p,{thin:!0,thinItalic:!0,regular:!0,italic:!0,bold:!0,boldItalic:!0,semiBold:!0}))},16868:(e,t,i)=>{i.d(t,{CV:()=>D,hp:()=>U,k9:()=>V});var a=i(57050),n=i(40327),s=i(74850),r=i(59443),o=i(74660),l=i(66896),c=i(18625),d=i(60797),u=i(77176),p=i(66310),m=i(17343),g=i(98403),h=i(91224),v=i(40151),f=i(38194),w=i(76974),b=i(24209),S=i(93508),y=i(16118),E=i(85985),C=i(28043),k=i(41398),_=i(83401),A=i(598),I=i(25980),T=i(52658),M=i(74238),x=i(99116),R=i(4890),F=i(35416),L=i(5114),P=i(83078),N=i(38983);class B{constructor(e,t){this._cardPositions=e,this._markPositions=t,this._log=s.Y.create(B.name)}alignCardToMark({id:e,renderOptions:{features:t},activeAlert:i,activeHighlightIndex:a},s){return c.P((()=>this._markPositions.getMarkAlertPosition({alert:i,highlightIndex:a}))).pipe(d.oA,u.U((i=>(0,n.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(R.j.Features.showLabel),L.some(i),"cardContentTop"),L.fromEither))),d.oA,p.w((i=>this._cardPositions.setCardPosition(e,t.has(R.j.Features.showLabel),!0,i.top))),m.h(g.PU),h.K((e=>(this._log.error("Cannot align card to mark",e),v.E))),f.B())}alignMarkTo(e,t,i,a){return c.P((()=>w.of((0,n.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e.id,e.renderOptions.features.has(R.j.Features.showLabel),L.some(i),"cardContentTop"),L.fromEither)).pipe(d.oA))).pipe(p.w((i=>b.T(this._markPositions.moveAlertHighlightInViewport(t,M.r.FromWindowTop.ISO.modify(M.L.concatC(i.contentOffset))(i.top),r.uq.initial),this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(R.j.Features.showLabel),!0,i.top)))),m.h(g.PU),h.K((e=>(this._log.error("Cannot align mark to suggested position",e),v.E))),f.B())}alignMarkToCard({id:e,renderOptions:{features:t},activeHighlightIndex:i,activeAlert:a},s,o=L.none){return c.P((()=>w.of((0,n.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(R.j.Features.showLabel),o,"cardContentTop"),L.fromEither)).pipe(d.oA))).pipe(p.w((n=>b.T(this._markPositions.moveAlertHighlightInViewport({alert:a,highlightIndex:i},M.r.FromWindowTop.ISO.modify(M.L.concatC(n.contentOffset))(n.top),r.uq.initial),this._cardPositions.setCardPosition(e,t.has(R.j.Features.showLabel),!0,n.top)))),m.h(g.PU),h.K((e=>(this._log.error("Cannot align mark to card",e),v.E))),f.B())}alignCardTo(e,t,i){const a=i!==I.v.Animation.NO_ANIMATION;return c.P((()=>w.of((0,n.pipe)(this._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(R.j.Features.showLabel),L.some(t),"cardTop"),L.fromEither)).pipe(d.oA))).pipe(p.w((t=>this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(R.j.Features.showLabel),a,t.top))),m.h(g.PU),h.K((e=>(this._log.error("Cannot align card to required top",e),v.E))),f.B())}}const U=(e,t,i,a,n,s)=>new B(T.eZ.getSuperScrollMapper(e,a,N.h.create(16)),T.UC.getMapper(t,n,s));var D;!function(e){e.skip="skip"}(D||(D={}));const V=(e,t,i,s,r,c=g.b2.rafScheduler)=>{const d=(e,i,a,n)=>{if(a===o.l$.text)return t.alignCardToMark(e,i?I.v.Animation.ANIMATE_ALL:I.v.Animation.NO_ANIMATION,!0);if(a===F.h8.forceText)return t.alignCardToMark(e,I.v.Animation.NO_ANIMATION,!1);{const s=a===o.l$.sidebar;return t.alignMarkToCard(e,s?i?I.v.Animation.ANIMATE_ALL:I.v.Animation.ANIMATE_MARK:I.v.Animation.NO_ANIMATION,n)}},h=b.T(e.view(F.nL.mapper((({currentLens:e,alertSource:t})=>L.some({currentLens:e,alertSource:t})))).pipe(S.O(L.none),u.U(L.map((e=>e.currentLens.id))),y.G(),E.h((([e,t])=>(0,n.pipe)(P.vB(((e,t)=>e!==t))(e,t),L.exists(a.yR)))),m.h(L.none)),e.view(F.nL.mapper((({currentLens:e,alertSource:t})=>L.some({currentLens:e,alertSource:t})))).pipe(E.h(L.exists((({currentLens:e})=>(0,x.Bk)(r)(e)))),u.U(L.chain((({currentLens:e,alertSource:t})=>(0,n.pipe)(s(e),L.filter(r.isValidToAlign),L.map((i=>({item:i,source:t,lensId:e.id}))))))))).pipe(C.x((0,a.ls)(P.vB(((e,t)=>e.lensId===t.lensId&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),L.exists(a.yR))),S.O(L.none),y.G(),u.U((([e,t])=>(0,n.pipe)(t,L.map((i=>({item:i.item,source:i.source,animate:(0,n.pipe)(e,P.wo((({lensId:e})=>e===i.lensId))),suggestedPosition:(0,n.pipe)(e,L.filter((e=>!r.isScheduledToDispose(e.item))),L.chain((e=>(0,n.pipe)(t,L.map((t=>[e.item,t.item]))))),L.filter((([e,t])=>t.lensId===e.lensId&&t.positionState.absTop>e.positionState.absTop)),L.map((([e,t])=>M.r.FromWindowTop.ISO.wrap(t.positionState.absTop))))})))))),p.w(L.fold((()=>v.E),c)),k.M(i),p.w((([{item:e,source:t,animate:a,suggestedPosition:s},r])=>(0,n.pipe)(r,L.fold((()=>d(e,a,t,s)),(t=>(i.set(L.none),t===D.skip?_.C:d(e,a,t,s))))))));return{id:"alignmentSideEffect",when:l.R.isWithAlertsId,what:F.nL.Effect.Applicator.create(h.pipe(A.c(_.C)))}}},93829:(e,t,i)=>{if(i.d(t,{C:()=>r}),3075==i.j)var a=i(9671);if(3075==i.j)var n=i(15090);if(3075==i.j)var s=i(9922);class r{constructor(e,t,i){this._cardsViewModel=e,this._gnar=t,this._getAlertById=i,this._subs=new s.w.Keeper,this.subscribeToSidebarCardActions()}subscribeToSidebarCardActions(){this._subs.push(n.g.createSubscription(this._cardsViewModel.actionEvents,this._gnar,this._getAlertById),(0,a.t)(this._cardsViewModel.actionEvents,this._gnar,"gdocs"))}dispose(){this._subs.dispose()}}},51540:(e,t,i)=>{i.d(t,{A7:()=>k,CH:()=>I,Ng:()=>A,uo:()=>_});var a=i(57050),n=i(66896),s=i(74660),r=i(55935),o=i(66310),l=i(40151),c=i(76974),d=i(85985),u=i(41398),p=i(77176);if(3075==i.j)var m=i(28043);if(3075==i.j)var g=i(598);if(3075==i.j)var h=i(83401);if(3075==i.j)var v=i(13444);if(3075==i.j)var f=i(57091);if(3075==i.j)var w=i(16118);var b=i(35416);if(3075==i.j)var S=i(6100);var y=i(5114);if(3075==i.j)var E=i(83078);if(3075==i.j)var C=i(38983);function k(e,t,i){return{id:"alertSwitchingByClickSideEffect",when:a.W8,what:b.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(r.T(1),o.w(y.fold((()=>l.E),c.of)),d.h((e=>!i||e.alert.lensId!==n.R.SpecialId.Premium)),u.M(t.pipe(d.h(b.nL.hasCards),p.U((e=>e.currentLens.id))),((e,t)=>({...e,lensId:t}))),p.U((({alert:e,highlightIndex:t,lensId:i})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:s.l$.text,options:{lensId:i,order:"textOrder"}})))))}}function _(e,t){return{id:"connectionManager",when:()=>!0,what:b.nL.Effect.SwitchAlert.create(e.pipe(p.U((e=>e.online)),m.x(),o.w((e=>e?l.E:t.enqueue("offline",{reconnectTime:C.h.create(10)}))),g.c(h.C)))}}function A(e,t,i){const a=e.getLens(n.R.SpecialId.Premium).pipe(p.U((e=>e.count>0)),m.x());return{id:"autoSwitchToPremiumLensSideEffect",when:e=>e===n.R.SpecialId.AllAlerts||e===n.R.SpecialId.Priority,what:b.nL.Effect.SwitchLens.create(t.pipe(p.U(S.v.WithSuccess.State.isInSuccess(i)),m.x(),v.g(1),f.a(a),d.h((([e,t])=>e&&t)),p.U((()=>({lensId:n.R.SpecialId.Premium,alertSource:s.l$.sidebar,options:{toFocus:b.nL.Effect.FocusBehavior.noFocus}})))))}}function I(e,t){const i=e.getLens(n.R.SpecialId.AllAlerts).pipe(p.U((e=>e.count>0)),m.x()),r=e.getLens(n.R.SpecialId.Priority).pipe(p.U((e=>e.count>0)),m.x());return{id:"autoSwitchFromPremiumLensSideEffect",when:a.W8,what:b.nL.Effect.SwitchLens.create(t.pipe(p.U((e=>e.currentLens.id)),m.x(),w.G(),d.h((([e,t])=>t===n.R.SpecialId.Premium)),p.U((([e,t])=>e)),f.a(i,r),p.U((([e,t,i])=>e===n.R.SpecialId.Priority&&i?y.some(n.R.SpecialId.Priority):e===n.R.SpecialId.AllAlerts&&t?y.some(n.R.SpecialId.AllAlerts):y.none)),d.h(y.isSome),p.U(E.MH),p.U((e=>({lensId:e,alertSource:s.l$.sidebar,options:{toFocus:b.nL.Effect.FocusBehavior.noFocus}})))))}}},7680:(e,t,i)=>{i.d(t,{D:()=>a});var a,n=i(40327),s=i(73353),r=i(5114),o=i(55415);!function(e){e.updateCitationStyle=(e,t)=>i=>{const a=(0,n.pipe)(e.defaultContext.get(),r.getOrElse((()=>s.R$.defaultContextFallback))),l=(0,n.pipe)(e.context.get(),s.R$.OutcomeContext.withCitationStyle(i));(0,n.pipe)(l,e.updateContext)&&t.goalsFormSuccess((0,n.pipe)(l.domain,r.getOrElse((()=>a.domain))),(0,n.pipe)(l.goals,r.getOrElse((()=>a.goals)),(e=>Array.from(e))),"essayDetectionCard",(0,n.pipe)(l.outcomeContext,r.map(o.ei("type")),r.toUndefined),void 0,(0,n.pipe)(l.outcomeContext,r.map(o.ei("citation")),r.toUndefined),void 0)}}(a||(a={}))},50981:(e,t,i)=>{if(i.d(t,{G:()=>ve}),3075==i.j)var a=i(57050);if(3075==i.j)var n=i(40327);if(3075==i.j)var s=i(50622);if(3075==i.j)var r=i(58809);if(3075==i.j)var o=i(9781);if(3075==i.j)var l=i(48081);if(3075==i.j)var c=i(77394);if(3075==i.j)var d=i(86620);if(3075==i.j)var u=i(94663);if(3075==i.j)var p=i(93829);if(3075==i.j)var m=i(7680);if(3075==i.j)var g=i(62346);if(3075==i.j)var h=i(37290);if(3075==i.j)var v=i(73582);if(3075==i.j)var f=i(33953);if(3075==i.j)var w=i(88661);if(3075==i.j)var b=i(92783);if(3075==i.j)var S=i(62111);if(3075==i.j)var y=i(4120);if(3075==i.j)var E=i(44618);if(3075==i.j)var C=i(81301);if(3075==i.j)var k=i(61813);if(3075==i.j)var _=i(66896);if(3075==i.j)var A=i(13313);if(3075==i.j)var I=i(70023);if(3075==i.j)var T=i(94785);if(3075==i.j)var M=i(98403);if(3075==i.j)var x=i(76974);if(3075==i.j)var R=i(77176);if(3075==i.j)var F=i(85985);if(3075==i.j)var L=i(2834);if(3075==i.j)var P=i(17343);if(3075==i.j)var N=i(28043);if(3075==i.j)var B=i(66310);if(3075==i.j)var U=i(40151);if(3075==i.j)var D=i(21619);if(3075==i.j)var V=i(54216);if(3075==i.j)var O=i(54466);if(3075==i.j)var H=i(92485);if(3075==i.j)var G=i(91549);if(3075==i.j)var W=i(83167);if(3075==i.j)var j=i(20594);if(3075==i.j)var z=i(35607);if(3075==i.j)var q=i(20291);if(3075==i.j)var K=i(34383);if(3075==i.j)var Z=i(11245);if(3075==i.j)var X=i(4890);if(3075==i.j)var J=i(35416);if(3075==i.j)var Q=i(6100);if(3075==i.j)var Y=i(73841);if(3075==i.j)var $=i(89770);if(3075==i.j)var ee=i(39920);if(3075==i.j)var te=i(17372);if(3075==i.j)var ie=i(66866);if(3075==i.j)var ae=i(27125);if(3075==i.j)var ne=i(5114);if(3075==i.j)var se=i(83078);if(3075==i.j)var re=i(95195);if(3075==i.j)var oe=i(8125);if(3075==i.j)var le=i(95574);if(3075==i.j)var ce=i(38983);if(3075==i.j)var de=i(42040);var ue=i(34217);if(3075==i.j)var pe=i(16868);if(3075==i.j)var me=i(51540);if(3075==i.j)var ge=i(40081);if(3075==i.j)var he=i(14464);const ve=(e,t,i,ve,fe,we,be,Se,ye,Ee,Ce,ke,_e,Ae)=>{const Ie=de.C8.Logging.getLogger("view_models"),Te=ce.h.create(A.A.defaultState),Me=ce.h.create(!1),xe=V.t.create(V.t.defaultLensFilters,V.t.defaultTextFilters),Re=e.alertsList.state.pipe((t=>A.A.get(t,e.alertsList.lensesScores,xe))).subscribe(M.wW(Te)),Fe=new ge.t(Te.view("lenses"),xe,e.sessionModel.scoreStatus),Le=(0,H.$y)((0,E.a)(t).getContents),Pe={features:(()=>{const e=new Set;return e.add(j.IG.Features.showCardLabelInOutcomes),e})(),cardLayoutDensityMode:X.j.Density.compact,shouldAnimateAlertApply:a.jv,cardVisualMode:ce.h.create(X.j.CardVisualMode.RegularLightMode)},Ne=(0,j.Ls)(Le,e.alertsReader,Pe,(()=>x.of(ne.none)),e.mutingAlertsReader),Be=G.R.ItemFactory.create(Le,e.mutingAlertsReader,Pe,(()=>x.of(ne.none))),Ue=(0,Z.U)(Le,e.alertsReader,Pe,K.T.ordAlert),De=l.O.getCapabilities(Ne,Be,Ue,e.alertsReader,Le,ce.h.create(K.D.empty()),(()=>He.get().currentLens.id)),Ve=new $.oq(e.alertsList.state,e.alertsReader,Te.view("lenses"),e.positionManager,Fe,new ee.gi(l.O.equatable.structEq,l.O.defaultOrd),(0,ee.is)(Ne,De),De,xe),Oe=_.R.SpecialId.AllAlerts;i.next({kind:c.R.ChangeLens,selectedLens:"all"});const He=ce.h.create(Ve.emptyState(Oe)),Ge=He.pipe(R.U((e=>e.currentLens.id)),F.h(r.U.SelectedLens.filter)).subscribe((e=>Se.set(e))),We=(0,W.u0)((()=>t.getCursor().index),Ve),je=new v.x(e.alertsList,He,5),ze=new f.r(e.alertsList,He),qe=new C.EQ(new he.o(e.sessionModel,je,we.isPremium,fe,Ae.isGateEnabled(w.K.StudentsOFEGdocs)||Ae.isGateEnabled(w.K.StudentsOFEInternal))),Ke=new h.$(He,Fe,i,qe,t,ye,fe,te.z.all),Ze=new O.Xx({flush:()=>t.flushChanges()},Ke.events,Ne,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,n.pipe)(e.mutedAlertsCategoriesModel,ne.map((e=>({model:e,openSuggestionsManagement:()=>self.open((0,b.Um)().suggestionsSettings)})))),ne.none,(()=>!1),l.O.getActiveItemWithAlert,De,He,new d.C,{bufferTransitions:!0,showGbPrompt:!1},m.D.updateCitationStyle(e.sessionModel,fe)),Xe=new p.C(Ze,fe,(t=>e.alertsReader.getById(t))),Je=y.n5.isFree(be.get()),Qe=(0,n.pipe)((0,I.d)(je.advancedAlerts),ue.Z.extendActions(L.b((e=>{e.key===T.n.State.minimized&&"onClick"===e.action.action&&Je&&Me.set(!0),e.key===T.n.State.expanded&&"collapse"===e.action.kind&&Me.set(!1),e.key===T.n.State.expanded&&"upgrade"===e.action.kind&&(fe.getPremiumButtonClick("advancedIssues","SeeWhatsInPremium",void 0,void 0,void 0,"advancedIssues","gDocsSidebar"),(0,S.T)().upgradeHooks.clickUpgradeHook("advancedIssues","gDocsSidebar"),je.openUpgradeUrl(v.L.Place.gdocsSidebarCardList)),e.key===T.n.State.expanded&&"onUpgradeButtonMount"===e.action.kind&&(fe.getPremiumButtonShow("advancedIssues","SeeWhatsInPremium",void 0,void 0,void 0,"advancedIssues","gDocsSidebar"),(0,S.T)().upgradeHooks.showUpgradeHook("advancedIssues","gDocsSidebar"))})))),Ye=Me.pipe(P.h(M.PU)),$e=ze.freeAlerts.pipe(R.U((e=>{var t;return!(null===(t=(0,n.pipe)(e,se.Fc))||void 0===t?void 0:t.count)&&Je})),N.x()).subscribe(M.wW(Me)),et=(0,g.xl)(He,xe,Ye,Me),tt=new g.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,He,et,l.O.getActiveItemWithAlert,Ee,!1,Me),it=new z.o((()=>re.F2(void 0))),at=(0,pe.hp)(He,tt,ce.h.create(16),it,t,Ie),nt=new D.mN(t,He,tt,e.alertsReader,l.O.getActiveItemWithAlert),st=new k.y(ce.h.create([]),u.I.createFactory(),3,5e3),rt=[O.dv.changeAlertEffect(He,Ze,Ne,l.O.getActiveItemWithAlert,e.alertsReader,ne.some(at),We,Ie.getLogger("CardsViewModelEffects.changeAlertEffect")),...Ze.getApplicatorEffects(),q.R7(He,it,De,(0,a.MZ)(Ze.actionEvents),{cardsAroundActive:25,cardsBeyondViewport:25}),me.A7(nt,He),(0,pe.k9)(He,at,ce.h.create(ne.none),l.O.getActiveAlignableItem,De),q.XU(He,it,De),ie.EQ.focusMarkByActiveAlert(He,tt,e.alertsReader,l.O.getActiveFocusableItem,Ie.getLogger("MarksEffects.focusMarkByActiveAlert")),me.uo(ve,st),O.dv.createSendActiveAlertFeedbacksEffect(He,l.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,Ie.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),me.Ng(Fe,He,De),me.CH(Fe,He),Ke.lensChangeEffect],ot="none"!==ye.priorityLens.kind?Ke.lensMode.view(te.K.isPriorityMode).view((0,oe.RN)(_.R.SpecialId.Priority,_.R.SpecialId.AllAlerts)):ce.h.create(_.R.SpecialId.AllAlerts),lt=(0,W.VC)(Ve,We,ot,De),ct=ce.h.create(!0),dt=W.Py.getStateTransformer(W.Py.getDefaultBehavior(l.O.getActiveItemWithAlert,De),lt,e.alertsReader,De,(e=>ct.get()&&"text"!==e.alertSource),a.Q1,ot),ut=Q.v.Items.getItemsPositionsUpdateTransformer(De),pt=(0,a.ls)(dt,le.L9(ut)),mt=new Y.l(He,Ve,e.alertsReader,e.alertsService,rt,l.O.getActiveItemWithAlert,pt),gt=new ae.L(He,e.sessionModel,a.Q1,De,ne.none,ne.none,(e=>J.nL.isWithPriorityList(e)&&Q.v.WithPriority.onlyNonPriorityAlertsLeft(e.currentLens,l.O.priorityTest,De)),Q.v.WithPriority.isInSuccess(l.O.priorityTest,De),ce.h.create(!1)),ht=Ce.pipe(B.w(ne.fold((()=>U.E),(t=>t.initAssistantSession(Ze.actionEvents,e.alertsReader,He,e.alertsService,e.alertsList.state))))).subscribe(),vt=ke.pipe(B.w(ne.fold((()=>U.E),(t=>t.initCardActionsProcessing(Ze.actionEvents,e.alertsReader,(0,o.aU)(He),(0,o.X5)(nt,He),He))))).subscribe(),ft=Ze.actionEvents.subscribe((0,a.ls)((0,s.JH)(e.alertsReader,s.SV.Source.sidebar),se.bw((e=>_e.next(e)))));return{lensState:He,lensStateManager:mt,cardsViewModel:Ze,marksViewModel:tt,navigationViewModel:Ke,successLensViewModel:gt,alignmentViewModel:at,lensPreviewViewModel:Fe,cardsListScrollManager:it,notificationManager:st,upgradeViewModel:je,modalManager:qe,capabilities:De,upgradeHookFlow:Qe,dispose:()=>{ft.unsubscribe(),tt.dispose(),Ge.unsubscribe(),Re.unsubscribe(),Xe.dispose(),ht.unsubscribe(),vt.unsubscribe(),$e.unsubscribe(),ze.dispose()}}}},40081:(e,t,i)=>{i.d(t,{t:()=>f});var a=i(71249),n=i(57050),s=i(40327),r=i(45614),o=i(32426),l=i(80800),c=i(66896),d=i(37539),u=i(64992),p=i(8125),m=i(22232),g=i(5114),h=i(50147),v=i(38983);class f{constructor(e,t,i){this._lensesList=e,this._alertsFilterService=t,this._scoreStatus=i,this.getLens=(0,p.HP)((function(e){switch(e){case c.R.SpecialId.AllAlerts:return this._lensesList.view(w(c.R.Info.allAlerts,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.AllAlerts)));case c.R.SpecialId.Priority:return this._lensesList.view(w(c.R.Info.priority,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.Priority)));case c.R.SpecialId.PredictionTakeaways:return this._lensesList.view(w(c.R.Info.predictionTakeaways,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.PredictionTakeaways)));case c.R.SpecialId.PredictionEmogenie:return this._lensesList.view(w(c.R.Info.predictionEmogenie,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.PredictionEmogenie)));case c.R.SpecialId.RealTimeProofit:return this._lensesList.view(w(c.R.Info.realTimeProofit,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.RealTimeProofit)));case c.R.SpecialId.Plagiarism:return this._lensesList.view(this._getPlagiarismLens);case c.R.SpecialId.Premium:return this._lensesList.view(w(c.R.Info.premium,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.Premium)));case c.R.SpecialId.FreePremiumAlerts:return this._lensesList.view(w(c.R.Info.freePremium,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.FreePremiumAlerts)));case c.R.SpecialId.Correctness:case c.R.SpecialId.Clarity:case c.R.SpecialId.Engagement:case c.R.SpecialId.Delivery:case c.R.SpecialId.Vox:case c.R.SpecialId.CorrectnessPriority:case c.R.SpecialId.ClarityPriority:case c.R.SpecialId.EngagementPriority:case c.R.SpecialId.DeliveryPriority:case c.R.SpecialId.VoxPriority:case c.R.SpecialId.KnowledgeHub:case c.R.SpecialId.KnowledgeHubPriority:return this._lensesList.view(w(c.R.Info.createOutcome(e),c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));default:return(0,m.vE)(e)}})),this._outcomes=[c.R.SpecialId.Correctness,c.R.SpecialId.Clarity,c.R.SpecialId.Engagement,c.R.SpecialId.Delivery],this._previews=(0,p.HP)((()=>r.uX((0,o.getFirstSemigroup)(),a.IX)(this._outcomes,(e=>[e,this._getPreview(e)])))),this._isDocumentEmpty=v.h.create(!1),this._isFree=v.h.create(!1),this._outcomeStatusMask=v.h.combine(this._isDocumentEmpty,this._isFree,((e,t)=>{let i=0;return e&&(i|=u.x.IsDocumentEmpty),t&&(i|=u.x.IsFreeUser),i})),this._getPlagiarismLens=(0,n.ls)(w(c.R.Info.plagiarism,{...c.R.Meta.group.empty,percentile:d.T.MAX},this._alertsFilterService.getLensesFilter(c.R.SpecialId.Plagiarism)),c.R.WithAlerts.modifyMeta((e=>({...e,percentile:d.T.groupSum.concat(d.T.MAX,d.T.groupSum.inverse(e.percentile))}))))}findLens(e){return(0,s.pipe)(g.fromNullable([this.getLens(c.R.SpecialId.AllAlerts),this.getLens(c.R.SpecialId.Premium)].find((t=>e(t.get())))),g.map((e=>e.get().id)))}_getPreview(e){return{...c.R.Info.base,logo:g.none,...this._getOutcomeButtonData(e)}}get lensPreviews(){return this._previews()}_getOutcomeButtonData(e){const t=this.getLens(e),i=t.get().title,a=this._isFree.view((t=>t&&(e===c.R.SpecialId.Engagement||e===c.R.SpecialId.Delivery))),r=v.h.combine(t.view("count").view((e=>0===e)),a,((e,t)=>e&&!t)),{description:o,stateMessage:p}=(0,u.O)(e),m=v.h.combine(this._isDocumentEmpty,r,t.view("percentile"),((e,t,i)=>e?d.T.MIN:t?d.T.MAX:i)).view(d.g.fromRatio),h=v.h.create(!1),f=v.h.combine(this._scoreStatus.view((e=>(0,s.pipe)(e,g.map((e=>e===l.v0.ScoresStatus.SENSITIVE)),g.getOrElse(n.jv)))),t,m,this._outcomeStatusMask,h,p);return{id:e,title:i,description:o,status:f,progress:m,isUnavailable:a}}get nonEmptyLensId(){return(0,s.pipe)(g.fromNullable([this.getLens(c.R.SpecialId.AllAlerts),this.getLens(c.R.SpecialId.Premium)].find((e=>e.get().count>0))),g.map((e=>e.get().id)))}}function w(e,t,i){return a=>{return new c.R.LensImpl(e,(n=e.id,r=t,e=>(0,s.pipe)(h.P5(c.R.Id.ord)(n,e),g.getOrElse((()=>r))))(a),i);var n,r}}},62346:(e,t,i)=>{i.d(t,{gM:()=>K,o$:()=>X,xl:()=>Z});var a,n=i(57050),s=i(40327),r=i(33381),o=i(48081),l=i(95572),c=i(84286),d=i(95384),u=i(5817),p=i(66896),m=i(74660),g=i(51374),h=i(4390),v=i(9922),f=i(98403),w=i(59368),b=i(16746),S=i(17594),y=i(35416),E=i(6100),C=i(66866),k=i(77176),_=i(67434),A=i(2844),I=i(24209),T=i(85985),M=i(28043),x=i(41398),R=i(76974),F=i(32952),L=i(16118),P=i(40151),N=i(60797),B=i(24713),U=i(92843),D=i(71249),V=i(8125),O=i(5114),H=i(95195),G=i(83078),W=i(55415),j=i(22232),z=i(38983),q=i(42040);!function(e){e.create=(e,t,i,a,n,s)=>(r,o)=>{const l=o.to.visualState===w.Bd.highlighted;return d.sO.Change.getCreateAction({range:r,capiAlertId:e,visualState:l?{type:d.sO.Change.VisualState.Type.highlighted,source:t()}:{type:d.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:a(r(),l),highlightDisappearOnHoverDelay:n,order:s})},e.update=(e,t,i,a,n,s)=>(r,o)=>{const l=o.to.visualState===w.Bd.highlighted;return d.sO.Change.getUpdateAction({range:r,capiAlertId:e,visualState:l?{type:d.sO.Change.VisualState.Type.highlighted,source:t()}:{type:d.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:a(r(),l),highlightDisappearOnHoverDelay:n,order:s})},e.remove=e=>t=>d.sO.Change.getRemoveAction({range:t,capiAlertId:e})}(a||(a={}));const K=(e,t)=>{const i=e.pipe(k.U(c.D.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds)),a=t.pipe(k.U((e=>e.cards)),_.R(((e,t)=>(0,s.pipe)(t,U.v.reduce(e,((e,t)=>(e.delete(t.id),e)),((e,t,i)=>e.set(i.id,i.alertIds.map((e=>e.toString())))),((e,t)=>e.set(t.id,t.alertIds.map((e=>e.toString()))))))),new Map),k.U((e=>(0,s.pipe)(Array.from(e.values()),D.xH))),k.U((e=>new Set(e)))),n=t.pipe(k.U((e=>e.feedId===c.D.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID))),r=t.pipe(k.U((e=>e.feedId===c.D.AssistantFeed.BULK_DISMISS_CARD_FEED_ID))),o=t.pipe(k.U((e=>e.feedId===c.D.AssistantFeed.BULK_DISMISS_REVIEW_FEED_ID)));return A.aj([i,a,n,r,o]).pipe(k.U((([e,t,i,a,n])=>i?t=>!e.has(t.id):a||n?e=>t.has(e.id):i=>t.has(i.id)&&!e.has(i.id))))},Z=(e,t,i,a=z.h.create(!1))=>I.T(e.pipe(T.h((e=>e.currentLens.id!==p.R.SpecialId.Premium)),M.x(((e,t)=>!(e.currentLens.id!==t.currentLens.id||y.nL.isWithPriorityList(e)&&y.nL.isWithPriorityList(t)&&E.v.WithPriority.isNonPriorityListOpened(e.currentLens)!==E.v.WithPriority.isNonPriorityListOpened(t.currentLens)))),M.x()),i.pipe(x.M(e),k.U((([e,t])=>t)))).pipe(x.M(a),k.U((([e,i])=>i?(0,V.W9)(m.bZ.isPremium,m.bZ.isHidden):t.alertVisibleInText(e.currentLens.id,E.v.WithPriority.nonPriorityAlertsVisible(e)))));class X{constructor(e,t,i,c,u,f,E,_,A=R.of(void 0),I=!1,M=z.h.create(!1)){this._alertList=e,this._alertsReader=t,this._positionManager=i,this._alertsService=c,this._ded=u,this._lensState=f,this._filterChanges=E,this._getActiveItemWithAlert=_,this._readyObs=A,this._emulateAppliedAlertAnimation=I,this._showYellowUnderlines=M,this._highlightedAlert=O.none,this._focusedAlert=O.none,this._marksMap=new Map,this._subs=new v.w.Keeper,this.events=new F.xQ,this._alertStateDiff=this._alertList.state.pipe(L.G(),k.U((([e,t])=>h.p.diff(e,t))),T.h((0,V.ff)(U.v.isEmpty))),this._alertsFilter=z.h.create(n.jv),this._filteredAlerts=z.h.create(O.none),this._ready=!1,this._log=q.C8.Logging.getLogger("marks_view_model"),this.getMarkByAlert=e=>(0,s.pipe)(this._marksMap.get(e.alert.id),O.fromNullable,O.chain((t=>t.markByIndex(e.highlightIndex)))),this.getAlertByMark=e=>(0,s.pipe)(this._alertsReader.getRegistered(g.P.fromRangeIdToAlertId(e.id)),O.chain((t=>(0,s.pipe)(C.$A.getHighlightIndex(t,e.range()),H.UI((e=>({alert:S.$.fromModel(t),highlightIndex:e}))),O.fromEither)))),this.ensureAlertHighlightInViewport=(e,t,i)=>(0,s.pipe)(this.getMarkByAlert(e),O.fold((()=>P.E),(e=>this._ded.scrollToMark(e.id,{animate:i,paddingTop:t})))),this._createMA=(e,t)=>{const i=t&&m.bZ.isPremium(e)&&m.bZ.isHidden(e),c=G.MH(e.rawId),{impact:u,cardLayout:{outcome:h},extra_properties:v}=e.toRawAlert(),f=r.M.getHighlightColor(l.DD.createOutcomeType(h),u,v,i),E=this._lensState.view(y.nL.getActiveItem(o.O.getActiveItemWithAlert)).view((0,n.ls)(O.filter((t=>t.activeAlert.id===e.id)),O.map((e=>e.activeHighlightIndex)),O.getOrElse((()=>0)))),k=e=>(t,i)=>{const a=g.x.isEnclosingView(t),n=e.getHighlightRanges().some(g.x.isEnclosingView),o=g.x.isMainView(t),l=g.x.isMainStartView(t),c=e.getHighlightRanges(),d=(0,s.pipe)(c,D.cx((e=>e.start===t.start&&e.end===t.end)),O.getOrElse((()=>0)))===E.get(),u=m.bZ.isSuperAlert(e);return r.M.getHighlightDisplayFormat({isEnclosing:a,isEnclosed:n,isMain:o,isMainStart:l,isActive:d,belongsToActiveAlert:i,belongsToSuperAlert:u})},_=p.R.getSortOrder(e.lensType),A=new b.v((t=>(0,s.pipe)(this._alertsReader.getById(e.id),O.alt((()=>(t&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),O.some(e)))),O.map(S.$.fromModel),G.MH)),this._alertsService,this._alertsService,(e=>this._ded.changeMarks(e)),a.create(c,(()=>d.sO.Change.VisualState.Source.api),f,k(e),null,_),a.update(c,(()=>J.getAlertSource(e,this._lensState.get(),this._getActiveItemWithAlert)),f,k(e),null,_),a.remove(c),(t=>{t.to.visualState===w.Bd.applied&&(this.events.next({type:C.ay.Type.AppliedAlertAnimationFinished,alert:e}),this._handleRemovedAlerts([e]).forEach((e=>e.apply())))}));return this._marksMap.set(e.id,A),A},this._handleRemovedAlerts=e=>e.map((({id:e})=>{const t=this._marksMap.get(e);return this._marksMap.delete(e),t.scheduleApply(w.Bd.disposed),t})),this._handleAlertUpdate=(e,t)=>e.map((e=>m.bZ.isRegistered(e)&&!m.bZ.isMuted(e)?(0,s.pipe)(O.fromNullable(this._marksMap.get(e.id)),O.fold((()=>this._alertsFilter.get()(e)?this._createMA(e,t):null),(e=>(e.scheduleUpdate(),w.Oe.isOrWillBe(w.Bd.success)(e)&&e.scheduleApply(w.Bd.highlighted),e)))):(0,s.pipe)(O.fromNullable(this._marksMap.get(e.id)),O.fold((()=>{}),(t=>(e.allowUpdate&&m.bZ.isCapiDone(e)&&m.bZ.isRated(e)&&w.Oe.isOrWillBe(w.Bd.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(w.Bd.success)):(t.scheduleApply(w.Bd.disposed),this._marksMap.delete(t.alert.id)),t)))))).filter((e=>Boolean(e))),this._subs.push(this._readyObs.subscribe((()=>{this._subs.push(this._listenAlertsUpdates(),this._listenRangesUpdates(),this._listenFilterChange(),this._listenFilteredAlerts()),this._ready=!0})))}focusAlertHighlight(e){return this._ready?(0,s.pipe)(this._marksMap.get(e.alert.id),O.fromNullable,O.map((t=>{this._focusedAlert=O.some(e.alert.id),t.scheduleApply(w.Bd.highlighted),t.scheduleForceUpdate(),t.apply()})),H.Yo((()=>new Error("Unknown alert"))),H.UI((()=>({dispose:()=>{O.exists((t=>t===e.alert.id))(this._focusedAlert)&&(this._highlightedAlert=O.none),(0,s.pipe)(this._marksMap.get(e.alert.id),O.fromNullable,O.filter((()=>!(0,s.pipe)(this._highlightedAlert,O.exists((t=>t===e.alert.id))))),O.map((e=>{e.scheduleApply(w.Bd.visible),e.apply()})))}})))):H.t$(new Error("marks view model is not ready yet"))}highlightAlertHighlight(e){return this._ready?(0,s.pipe)(this._marksMap.get(e.id),O.fromNullable,O.map((t=>{this._highlightedAlert=O.some(e.id),t.scheduleApply(w.Bd.highlighted),t.apply()})),H.Yo((()=>new Error("Unknown alert"))),H.UI((()=>({dispose:()=>{O.exists((t=>t===e.id))(this._highlightedAlert)&&(this._highlightedAlert=O.none),(0,s.pipe)(this._marksMap.get(e.id),O.fromNullable,O.filter((()=>!(0,s.pipe)(this._focusedAlert,O.exists((t=>t===e.id))))),O.map((e=>{e.scheduleApply(w.Bd.visible),e.apply()})))}})))):H.t$(new Error("marks view model is not ready yet"))}moveCursorToHighlight(e,t){return this._ready?(0,s.pipe)(this._marksMap.get(e.alert.id),O.fromNullable,O.chain((t=>t.markByIndex(e.highlightIndex))),O.chain((e=>O.fromEither(e.range()))),O.fold((()=>H.t$(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:a}=this._ded.getCursor();if(0===a&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,s.pipe)(this._ded.setCursor(i,0),H.vx(H.t$))}return H.F2(void 0)}))):H.t$(new Error("marks view model is not ready yet"))}dispose(){this._subs.dispose()}_listenAlertsUpdates(){const e=e=>({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[],...e});return I.T(this._filteredAlerts.pipe(N.cp((({visible:t,hidden:i})=>R.of(e({activeAlerts:W.qo(t),removedAlerts:W.qo(i)}))))),this._alertStateDiff.pipe(x.M(this._alertsFilter),k.U((([t,i])=>(0,s.pipe)(t,U.v.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t,i)=>(m.bZ.isAccepted(i.alert)?e.acceptedAlerts.push(i.alert):e.updatedAlerts.push(i.alert),e)),((e,t)=>(i(t.alert)&&e.activeAlerts.push(t.alert),e)))))))).pipe(x.M(this._showYellowUnderlines),k.U((([{activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:a},n])=>{let s=[];return s=s.concat(e.filter((0,V.W9)((0,V.Kg)((e=>n&&m.bZ.isPremium(e)&&m.bZ.isHidden(e)),(0,V.ff)(m.bZ.isPremium)),(e=>O.isSome(e.rawId)))).map((e=>{const t=this._marksMap.get(e.id);return void 0!==t?(t.scheduleForceUpdate(),t):this._createMA(e,n)}))),this._emulateAppliedAlertAnimation&&setTimeout((()=>{a.forEach((e=>{this.events.next({type:C.ay.Type.AppliedAlertAnimationFinished,alert:e})}))}),3*(0,u.Xd)(20)),s=s.concat(this._handleRemovedAlerts(t.concat(a).filter((e=>this._marksMap.has(e.id))))),s=s.concat(this._handleAlertUpdate(i,n)),s}))).subscribe((e=>{if(e.length>0){const[t,...i]=e;t.applyWith(i)}}))}_listenRangesUpdates(){return this._positionManager.rangeChanged.pipe(B.j("changed"),k.U((e=>e.filter((e=>g.P.is(e)&&g.x.isVisible(e)&&this._marksMap.has(e.meta.alertId))))),T.h((e=>e.length>0))).subscribe((e=>{const t=Array.from(e.values()).reduce(((e,t)=>(0,s.pipe)(this._alertsReader.getById(t.meta.alertId),O.chain((e=>this._alertsReader.getRegistered(e.id))),O.chain((e=>O.fromNullable(this._marksMap.get(e.id)))),G.bw((t=>e.set(t.alert.id,t))),(0,n.a9)(e))),new Map),i=Array.from(t.values());if(i.forEach((e=>{e.scheduleForceUpdate()})),i.length>0){const[e,...t]=i;e.applyWith(t)}}))}_listenFilterChange(){return this._filterChanges.subscribe((e=>{f.wW(this._alertsFilter)(e)}))}_listenFilteredAlerts(){return this._alertsFilter.pipe(x.M(this._alertList.state),k.U((([e,t])=>(0,s.pipe)(t,h.p.reduce({visible:{},hidden:{}},((t,i)=>(e(i.alert)&&m.bZ.isRegistered(i.alert)?t.visible[i.alert.id]=i.alert:t.hidden[i.alert.id]=i.alert,t))),(e=>O.some(e)))))).subscribe(f.wW(this._filteredAlerts))}}var J;!function(e){e.toSidebarFluidMarkSource=e=>{switch(e){case m.l$.text:case y.h8.forceText:return d.sO.Change.VisualState.Source.text;case m.l$.sidebar:case y.h8.forceSidebar:return d.sO.Change.VisualState.Source.sidebar;case m.l$.api:return d.sO.Change.VisualState.Source.api;default:return(0,j.vE)(e)}},e.getAlertSource=(t,i,a)=>y.nL.hasCards(i)?(0,s.pipe)(a(i.currentLens),O.fold((()=>d.sO.Change.VisualState.Source.api),(a=>a.activeAlert.id===t.id?e.toSidebarFluidMarkSource(i.alertSource):d.sO.Change.VisualState.Source.api))):d.sO.Change.VisualState.Source.api}(J||(J={}))},14464:(e,t,i)=>{i.d(t,{o:()=>L});var a=i(40327),n=i(73582),s=i(62111),r=i(73353),o=i(56305),l=i(83078),c=i(5114),d=i(55415),u=i(8125);function p({documentModel:e,features:t,gnar:i,modalOperations:p,upgradeVM:m,source:g}){return(0,o.k)(e,function(e,t,i){return{goalsPopupShow:t=>{e.goalsPopupShow(t),e.getPremiumButtonShow("goPremium","setGoalsPopup",void 0,void 0,void 0,"assistantGoals","gDocsSetGoalsPopup"),(0,s.T)().upgradeHooks.showUpgradeHook("assistantGoals","gDocsSetGoalsPopup")},getPremiumButtonClick:()=>{e.getPremiumButtonClick("goPremium","setGoalsPopup",void 0,void 0,void 0,"assistantGoals","gDocsSetGoalsPopup"),(0,s.T)().upgradeHooks.clickUpgradeHook("assistantGoals","gDocsSetGoalsPopup")},goalsFormSuccess:(n,s)=>{const r=()=>l.FX("academic")(n.domain)&&t;return e.goalsFormSuccess((0,a.pipe)(n.domain,c.getOrElse((()=>s.domain))),(0,a.pipe)(n.goals,c.map((e=>r()?[]:e)),c.getOrElse((()=>s.goals)),(e=>Array.from(e))),i,(0,a.pipe)(n.outcomeContext,c.filter(r),c.map(d.ei("type")),c.toUndefined),(0,a.pipe)(n.audience,c.filter((0,u.ff)(r)),c.toUndefined),(0,a.pipe)(n.outcomeContext,c.filter(r),c.map(d.ei("citation")),c.toUndefined),(0,a.pipe)(n.style,c.filter((0,u.ff)(r)),c.toUndefined))}}}(i,t.isStudentsOFE,g),p,g,r.R$.defaultContextFallback,t,(()=>m.openUpgradeUrl(n.L.Place.gdocsGoals)),!1)}var m=i(18625),g=i(98403),h=i(57091),v=i(66310),f=i(76974),w=i(13444),b=i(93508),S=i(48403),y=i(95343),E=i(12768),C=i(95195),k=i(38983),_=i(42040);class A{constructor(e,t){this._documentModel=e,this._modalOperations=t,this.reportViewModel=c.none,this.state=m.P((()=>g.GQ((()=>this._documentModel.calculateStats())))).pipe(h.a(this._documentModel.checkingState,((e,t)=>(0,a.pipe)(e,c.filter((()=>"idle"===t))))),v.w(c.fold((()=>f.of({type:E.g.State.Type.LOADING}).pipe(w.g(150))),C.g_((e=>(_.C8.Logging.getLogger("editor.toolbar").error("Error on requesting document stats",e),this.onModalClose(),f.of({type:E.g.State.Type.ERROR}))),(e=>k.h.combine(this._documentModel.score,this._documentModel.counters,this._documentModel.documentLength.view("trimmed"),((t,i,n)=>(0,a.pipe)(t,c.fold((()=>({type:E.g.State.Type.SHORT_CONTENT})),(t=>({type:E.g.State.Type.READY,documentIsEmpty:0===n,score:t,counters:i,stats:e})))))))))),b.O({type:E.g.State.Type.EMPTY}),S._(1),y.x()),this.onModalClose=()=>{this._modalOperations.onClose()}}}var I=i(81301),T=i(13863),M=i(87195),x=i(77176),R=i(22232),F=i(85715);class L{constructor(e,t,i,a,n=!1){this._documentModel=e,this._upgradeViewModel=t,this._isPremiumUser=i,this._gnar=a,this._isStudentsOFE=n}load(e){switch(e.type){case I.dC.SetGoals:return this._loadSetGoals(e.source);case I.dC.Performance:return this._loadPerformance();default:return(0,R.vE)(e)}}_loadSetGoals(e){return Promise.resolve((t=>{const i=p({features:{demoMode:!1,isRedesign:!1,isFree:!this._isPremiumUser,isStudentsOFE:this._isStudentsOFE},documentModel:this._documentModel,upgradeVM:this._upgradeViewModel,source:e,modalOperations:t,gnar:this._gnar});return{instance:{type:I.dC.SetGoals,source:e},component:F.UI.mount(T.R.Modal,i)}}))}_loadPerformance(){return Promise.resolve((e=>{const t=new A(this._documentModel,e),i=F.UI.Knot.make(M.q.ModalView,{downloadButton:F.UI.Node.empty}),a=F.Z.fromSideEffect((t=>{if(t.action.kind===M.q.ActionsKind.close)e.onClose();else(0,R.vE)(t.action.kind)}),t.state.pipe(x.U((e=>({root:e})))));return{instance:{type:I.dC.Performance},component:F.UI.mount(i,a)}}))}}},37290:(e,t,i)=>{if(i.d(t,{$:()=>y}),3075==i.j)var a=i(57050);if(3075==i.j)var n=i(77394);if(3075==i.j)var s=i(81301);if(3075==i.j)var r=i(74660);if(3075==i.j)var o=i(66896);if(3075==i.j)var l=i(32952);if(3075==i.j)var c=i(9922);if(3075==i.j)var d=i(41398);if(3075==i.j)var u=i(77176);if(3075==i.j)var p=i(85985);if(3075==i.j)var m=i(66310);if(3075==i.j)var g=i(40151);if(3075==i.j)var h=i(4890);if(3075==i.j)var v=i(35416);if(3075==i.j)var f=i(52531);if(3075==i.j)var w=i(5114);if(3075==i.j)var b=i(22232);if(3075==i.j)var S=i(38983);class y{constructor(e,t,i,n,s,m,g,b){this._state=e,this._lensPreviewVM=t,this._sidebarEvents=i,this._modalManager=n,this._ded=s,this._features=m,this._gnar=g,this._defaultLensMode=b,this.isUphooksRedesign=!1,this.popover=S.h.create(w.none),this.events=new l.xQ,this.activeLensId=this._state.view("currentLens","id"),this.documentActions=S.h.create({proofit:f.Bo.proofitDisabled(f.TV.NotAvailable),plagiarism:f.Bo.plagiarismDisabled(f.eh.NotAvailable),cheetah:f.Bo.cheetahDisabled(f.Sh.NotAvailable)}),this.showMuteControl=S.h.create(!1),this._subs=new c.w.Keeper,this._lensSwitch=new l.xQ,this.lensMode=S.h.create(this._defaultLensMode),this.lensTitleType="none"!==this._features.priorityLens.kind?f.Bo.LensTitleType.priority:f.Bo.LensTitleType.default,this.lensChangeEffect={id:"lensChangeEffect",when:a.W8,what:v.nL.Effect.SwitchLens.create(this._lensSwitch.pipe(d.M(this._state.pipe(u.U((e=>e.currentLens.id)))),p.h((([{lensId:e},t])=>e!==t)),u.U((([{lensId:e,focusFirst:t}])=>({lensId:e,alertSource:r.l$.sidebar,options:{order:"lensOrder",toFocus:t?v.nL.Effect.FocusBehavior.focusFirst:v.nL.Effect.FocusBehavior.noFocus}})))))},this.cardVisualMode=S.h.create(h.j.CardVisualMode.RegularLightMode),this._listenNavigationEvent();const y=[o.R.SpecialId.Correctness,o.R.SpecialId.Clarity,o.R.SpecialId.Engagement,o.R.SpecialId.Delivery].reduce(((e,t)=>(e[t]=this._lensPreviewVM.lensPreviews[t],e)),{});this.lensPreviews=S.h.create(y),this.a11yContrast=!1}dispose(){this._subs.dispose()}_listenNavigationEvent(){this._subs.push(this.events.pipe(m.w((e=>{switch(e.type){case"toggleSidebar":return this._sidebarEvents.next({kind:n.R.Close}),g.E;case"switchToLens":if("none"!==this._features.priorityLens.kind){const t=e.id===o.R.SpecialId.Priority?"priority":"all";this._sidebarEvents.next({kind:n.R.ChangeLens,selectedLens:t}),this._lensSwitch.next({lensId:e.id,focusFirst:e.focusFirst}),this._gnar.gdocsSidebarChangeLensButtonClick(t,this._lensPreviewVM.getLens(o.R.SpecialId.AllAlerts).get().count,this._ded.getTextLength(),this._lensPreviewVM.getLens(o.R.SpecialId.Priority).get().count,"dropdown"===this._features.priorityLens.kind?"dropdown":"priorityToggle")}else this._gnar.gdocsSidebarOpenLensButtonClick(e.id);return g.E;case"setGoals":return this._modalManager.show(s.Iy.setGoals("user"));case"performance":return this._modalManager.show(s.Iy.performance);case"switchToCritical":case"switchToAdvanced":case"preferences":case"switchToAll":return g.E;default:return(0,b.vE)(e)}}))).subscribe())}}},33953:(e,t,i)=>{if(i.d(t,{r:()=>p}),3075==i.j)var a=i(6782);if(3075==i.j)var n=i(74660);if(3075==i.j)var s=i(4390);if(3075==i.j)var r=i(14601);if(3075==i.j)var o=i(2844);if(3075==i.j)var l=i(77176);if(3075==i.j)var c=i(28043);if(3075==i.j)var d=i(5114);if(3075==i.j)var u=i(38983);class p{constructor(e,t){this._alertsList=e,this._lensState=t,this._sub=new r.w,this._freeAlerts=u.h.create([]),this.freeAlerts=this._freeAlerts.view((e=>e.length>0?d.some({count:e.length,alerts:()=>function(e){return a.Q.group(e.map((e=>e.toLiteAlert())))}(e)}):d.none)),this._sub.add(o.aj([this._lensState.view("currentLens").view("id").view((()=>e=>n.bZ.isRegistered(e)&&!n.bZ.isHidden(e)&&!n.bZ.isPremium(e))),this._alertsList.state]).pipe(l.U((([e,t])=>s.p.reduce([],((t,{alert:i})=>(e(i)&&t.push(i),t)))(t))),c.x()).subscribe((e=>{this._freeAlerts.set(e)})))}dispose(){this._sub.unsubscribe()}}},86705:(e,t,i)=>{i.d(t,{v:()=>s});var a=i(27378),n=i(80895);const s=({browser:e,className:t,title:i="BETA"})=>"safari"!==e?a.createElement(n.C,{title:i,className:t}):null},29417:(e,t,i)=>{i.d(t,{l:()=>d});var a=i(27378),n=i(22679),s=i(3860),r=i(53386),o=i(12187),l=i(82693),c=i.n(l);const d=({enableTooltip:e=!1,size:t="medium",...i})=>a.createElement(r.u,{message:"Settings",showDelay:n.gk,disabled:!e},a.createElement(s.h,{...i},a.createElement("div",{...(0,o.Sh)("small"===t?c().settingsButtonSmallIcon:null,"medium"===t?c().settingsButtonMediumIcon:null)})))},31944:(e,t,i)=>{i.d(t,{J:()=>d});var a=i(57050),n=i(27378),s=i(90845),r=i(60797),o=i(2834),l=i(12187),c=i(32276);const d=({onChange:e,labelId:t,className:i,checkboxClassName:d,labelClassName:u,checked:p,children:m,disabled:g,useDS:h,dataGrammarlyPart:v="ui-kit-checkbox",tabIndex:f=0,onMount:w=a.Q1})=>{const[b,S]=n.useState(null!=p&&p);n.useEffect((()=>{S(Boolean(p))}),[p]);const y=t=>{t.preventDefault(),t.stopPropagation(),S(!b),null==e||e(!b)},{ref:E,onMount:C}=s.P.useElWatcher();return n.useEffect((()=>{const e=E.pipe(r.oA,o.b(w)).subscribe();return()=>e.unsubscribe()}),[]),n.createElement("div",{"data-grammarly-part":v,...(0,l.Sh)(c.checkboxContainer,i)},n.createElement("div",{...(0,l.Sh)(c.checkbox,d,b?c.checkboxChecked:null,h?c.checkboxDS:null),role:"checkbox","aria-checked":b,tabIndex:f,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&y(e)},onClick:g?a.Q1:y,ref:C},b?n.createElement("div",{className:c.checkboxCheckmark}):null),n.createElement("label",{id:t,onClick:y,className:u},m))}},84488:(e,t,i)=>{i.d(t,{G:()=>s});var a=i(27378),n=i(31542);const s=({children:e,style:t,dataGrammarlyPart:i="ui-kit-iframe",...s})=>{const[r,o]=a.useState(null),l=a.useCallback((e=>{var t,i;let a=null;"contentDocument"in e.target&&(a=null!==(i=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==i?i:null),o(a),a&&(a.style.margin="0",a.style.height="100vh",a.style.overflowY="hidden")}),[]);return a.createElement("iframe",{...s,style:{border:"none",...t},onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":i},r&&(0,n.createPortal)(e,r))}},47422:(e,t,i)=>{i.d(t,{z:()=>l});var a=i(27378),n=i(84488),s=i(68370),r=i(33099),o=i.n(r);const l=({placeholder:e,onChange:t,ariaLabel:i,className:r})=>{const[l,c]=a.useState("");return a.useEffect((()=>{t(l)}),[l]),a.createElement(n.G,{dataGrammarlyPart:"ui-kit-textbox",className:r,style:{width:"100%",height:"100%"}},a.createElement(s.b,null,o().__css),a.createElement("div",{role:"textbox",className:o().textBox,contentEditable:!0,onInput:e=>c(e.target.innerText),"data-placeholder":e,"aria-placeholder":e,"aria-label":i}))}},87776:(e,t,i)=>{i.d(t,{a:()=>s});var a=i(27378),n=i(53112);const s=({color:e})=>a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",fill:null!=e?e:n.Z.red50}),a.createElement("path",{d:"M8.94827 4H7.05196L7.22242 10.1108H8.78208L8.94827 4ZM8.00225 12.8381C8.5477 12.8381 9.02071 12.3821 9.02498 11.8153C9.02071 11.2571 8.5477 10.8011 8.00225 10.8011C7.43975 10.8011 6.97526 11.2571 6.97952 11.8153C6.97526 12.3821 7.43975 12.8381 8.00225 12.8381Z",fill:n.Z.neutral0}))},81108:(e,t,i)=>{i.d(t,{Q:()=>o});var a=i(27378),n=i(90361),s=i(10247);const r=e=>{if(e.reason===s.rS.NO_FREE_TRIALS_LEFT){const t="No email reviews left this month";let i;if(e.meta.quotaResetDate){const t=Intl.DateTimeFormat([],{month:"short",day:"numeric"}).format(new Date(Date.parse(e.meta.quotaResetDate)));i=`You will get ${s.SR} free reviews again next month (${t}). You can also use paid expert writing help in Grammarly's web editor anytime.`}else i=`You will get ${s.SR} free reviews again next month. You can also use paid expert writing help in Grammarly's web editor anytime.`;return{title:t,message:i}}return e.reason===s.rS.NOT_ENOUGH_WORDS?{message:`Your email must be at least ${s.fy} words (currently ${e.meta.wordsCount}).`}:e.reason===s.rS.TOO_MANY_WORDS?{message:`Your email must be under ${s.Vw} words (currently ${e.meta.wordsCount}).`}:(e=>{switch(e){case s.rS.NOT_AVAILABLE:return{message:"Our experts are currently working on other text. Please try again later."};case s.rS.NOT_AVAILABLE_QUOTA_ERROR:return{title:"Something went wrong",message:"We couldn't determine how many requests you have left. Please try again later."};case s.rS.CONFLICTING_REQUEST:return{title:"Separate request in progress",message:"You can submit this request once the experts are finished with the one you already submitted."};case s.rS.CHECKING_INITIAL_AVAILABILITY:return{message:"Checking for available experts..."};case s.rS.UNSUPPORTED_LANGUAGE:return{message:"Our writing experts can only help with emails written in English."};default:(0,n.vE)(e)}})(e.reason)},o=({info:e,includeTitle:t})=>{const i=r(e);return a.createElement(a.Fragment,null,t?a.createElement(a.Fragment,null,i.title?a.createElement("b",null,i.title):a.createElement("b",null,"Get expert writing help"),a.createElement("br",null)):null,i.message)};o.defaultProps={includeTitle:!1}},78594:(e,t,i)=>{i.d(t,{q5:()=>g,dK:()=>m});var a=i(27378),n=i(24606),s=i(12187),r=i(78987);const o=({options:e,onChange:t=(()=>null),ariaLabel:i,className:n})=>{const o=[],[l,c]=a.useState(null);a.useEffect((()=>{var i;null!==l&&(null===(i=o[l])||void 0===i||i.focus()),t(null!==l?e[l].value:null)}),[l]);const d=null!==l?e[l]:null;return a.createElement("div",{"data-grammarly-part":"ui-kit-radio-group",className:n},a.createElement("div",{className:r.radioGroup,role:"radiogroup","aria-label":i,onKeyDown:t=>{if(" "!==t.key||d){if("ArrowRight"===t.key||"ArrowDown"===t.key){t.preventDefault(),t.stopPropagation();c(((l||0)+1)%e.length)}else if("ArrowLeft"===t.key||"ArrowUp"===t.key){t.preventDefault(),t.stopPropagation();const i=(l||0)-1;c(i<0?e.length-1:i)}}else t.preventDefault(),t.stopPropagation(),c(0)}},e.map(((e,t)=>{const i=(null==d?void 0:d.value)===e.value,n=0===t;return a.createElement("div",{key:e.value,...(0,s.Sh)(r.radioGroupOption,i?r.radioGroupOptionSelected:null),role:"radio",tabIndex:i||n&&!d?0:-1,"aria-checked":i,onClick:e=>{e.preventDefault(),e.stopPropagation(),c(t)},ref:e=>o.push(e)},e.render())}))))};var l,c=i(47422),d=i(31944),u=i(11056),p=i(59467);function m(e){return"score"in e}!function(e){e.bad="bad",e.ok="ok",e.good="good"}(l||(l={}));const g=({hideLogo:e=!1,align:t="center",fixSubmitButtonOverflowBottomPadding:i=!1,...r})=>{var m;const g=[l.bad,l.ok,l.good],[h,v]=a.useState(null),[f,w]=a.useState(""),[b,S]=a.useState(!1),[y,E]=a.useState(!1);let C;return C=y&&!1!==r.showPostSubmitScreen?a.createElement("div",{"data-grammarly-part":"surveys-feedback-form-thank-you",...(0,s.Sh)(u.feedbackFormContainer,u.feedbackFormContainerAlignCenter)},a.createElement("div",{className:u.feedbackFormSuccessMessageTextContainer},a.createElement("div",{className:u.feedbackFormSuccessMessageIcon}),a.createElement("div",{className:u.feedbackFormSuccessMessageTitle},"Thank you!"),a.createElement("div",{className:u.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),a.createElement(n.z,{className:u.feedbackFormSubmitButton,kind:"success",type:"submit",onClick:r.onClose},"Done"),i?a.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPadding},a.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null):a.createElement("div",{"data-grammarly-part":"surveys-feedback-form-fields",...(0,s.Sh)(u.feedbackFormContainer,"center"===t?u.feedbackFormContainerAlignCenter:null)},a.createElement("div",{className:u.feedbackFormFields},e?null:a.createElement("div",{className:u.feedbackFormLogo}),r.hideTitle?null:a.createElement("div",{...(0,s.Sh)(u.feedbackFormTitle,r.compactDisplay?u.compact:null)},r.title||a.createElement("span",null,"How do you like ",a.createElement("br",null)," Grammarly?")),r.withScore?a.createElement(a.Fragment,null,a.createElement(o,{ariaLabel:"Feedback Score",options:g.map((e=>({value:e,render(){let t,i;return e===l.bad?(t=p.feedbackFormOptionIconDisheartening,i="I dislike it"):e===l.ok?(t=p.feedbackFormOptionIconNeutral,i="It’s OK"):(t=t=p.feedbackFormOptionIconSmiling,i="I like it"),a.createElement("div",{className:p.feedbackFormOption},a.createElement("div",{...(0,s.Sh)(p.feedbackFormOptionIcon,t)}),a.createElement("div",null,i))}}))),onChange:v,...(0,s.Sh)(u.feedbackFormScore,r.compactDisplay?u.compact:null)}),r.hideTextBoxTitle?null:a.createElement("div",{className:u.feedbackFormTextBoxTitle},"Anything we can improve?")):null,a.createElement(c.z,{onChange:w,placeholder:r.placeholderText||"Your thoughts here",ariaLabel:"Feedback Text",...(0,s.Sh)(u.feedbackFormTextBox,r.compactDisplay?u.compact:null)}),r.domain?a.createElement(a.Fragment,null,r.hideDomainHelpText?null:a.createElement("div",{className:u.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain you’re on:"),a.createElement(d.J,{labelId:"feedback-form-share-domain-checkbox",onChange:S,className:u.feedbackFormShareDomainCheckbox},"Include the domain ",a.createElement("b",null,r.domain)," with my feedback")):null),a.createElement(n.z,{className:u.feedbackFormSubmitButton,kind:null!==(m=r.submitButtonKind)&&void 0!==m?m:"success",type:"submit",disabled:r.withScore?!h:!f,onClick:()=>{var e,t;r.withScore&&h?(null===(e=r.onSubmit)||void 0===e||e.call(r,{score:h,text:f,domain:b?r.domain:void 0}),E(!0)):!r.withScore&&f&&(null===(t=r.onSubmit)||void 0===t||t.call(r,{text:f,domain:b?r.domain:void 0}),E(!0))}},"Submit"),i?a.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPadding},a.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null),a.createElement("div",{style:r.style,"data-grammarly-part":"surveys-feedback-form"},C)}},25234:(e,t,i)=>{i.d(t,{N:()=>r});var a=i(5872),n=i(27378),s=i(76547);class r extends n.Component{render(){const{institutionName:e,ssoId:t}=this.props,i="GrammarlyEnrollmentToken: "+t;return n.createElement("div",{className:(0,a.cs)(s.edc_stripe)},"Managed by ",n.createElement("b",{title:i},e))}}},75675:(e,t,i)=>{i.d(t,{h:()=>g});var a=i(57050),n=i(5872),s=i(92783),r=i(27378),o=i(98158),l=i(43903),c=i(77176),d=i(8125),u=i(19703),p=i(12187);function m(e=(0,s.qs)()){return"chrome"===e&&self.navigator.userAgent.includes("Edg")?"edge":e}const g=e=>{var t;const i=(0,l.tJ)();return r.createElement("div",{className:(0,n.cs)(o.header,!e.hideDelimiter&&o.delimiter)},r.createElement(u.F.a,{target:"_blank",href:null!==(t=e.appUrl)&&void 0!==t?t:(0,s.Um)().app,...(0,p.Sh)(o.logo,e.isBusiness?o.business:o[m(e.browser)],i.pipe(c.U((e=>(0,a.zG)("standWithUkraine"===e.logo,(0,d.RN)(o.logoUASupport,o.logoClassic))))))}))}},30287:(e,t,i)=>{i.d(t,{RK:()=>o,fX:()=>l});var a,n=i(88326),s=i(27378),r=i(23700);!function(e){e.SignUp="signup",e.LogIn="login"}(a||(a={}));const o=e=>s.createElement(s.Fragment,null,s.createElement(n.M,{clickHandler:()=>e.handleClick(a.SignUp)},s.createElement("div",{className:r.button},"Sign up")),s.createElement("div",{className:r.alternative},"Already have an account?"," ",s.createElement(n.M,{clickHandler:()=>e.handleClick(a.LogIn)},s.createElement("span",{className:r.link},"Log in")))),l=e=>s.createElement(s.Fragment,null,s.createElement(n.M,{clickHandler:()=>e.handleClick(a.LogIn)},s.createElement("div",{className:r.button},"Sign in")),s.createElement("div",{className:r.alternative},"Don't have an account?"," ",s.createElement(n.M,{clickHandler:()=>e.handleClick(a.SignUp)},s.createElement("span",{className:r.link},"Sign up for free"))))},5503:(e,t,i)=>{i.d(t,{I:()=>c});var a=i(27378),n=i(36412),s=i(11731),r=i(72998),o=i(75675),l=i(27732);const c=e=>{var t,i,c;return a.useEffect((()=>{e.trackPopupShow()}),[]),a.createElement("div",{className:l.wrapper},a.createElement(o.h,null),a.createElement("div",{className:l.content},a.createElement(n.h4,{sanitizedTitle:s.c.sanitizeSuspendTitle(null===(t=e.popupDynamicConfig)||void 0===t?void 0:t.popupTitleHTML)}),a.createElement(n.uT,{sanitizedBody:s.c.sanitizeSuspendBody(null===(i=e.popupDynamicConfig)||void 0===i?void 0:i.popupBodyHTML)}),a.createElement(r.StandWithUkraineSuspendFooter,{onLearnMore:e.onLearnMore,sanitizedLearnMoreButtonLabelHTML:s.c.sanitizeSuspendLearnMoreLabel(null===(c=e.popupDynamicConfig)||void 0===c?void 0:c.popupLearnMoreButtonLabelHTML)})))}},24372:(e,t,i)=>{i.d(t,{J:()=>n});var a=i(3855);const n=new Proxy({},{get:(e,t)=>(...e)=>(0,a.E)().bgRpc.api.trackGnar(t,e)})},61055:(e,t,i)=>{i.r(t),i.d(t,{DataControlPopup:()=>c,DataControlPopupDefault:()=>l});var a=i(5872),n=i(88326),s=i(27378),r=i(29511),o=i(43398);const l=e=>s.createElement(s.Fragment,null,s.createElement("div",{className:o.icon}),s.createElement("div",{className:o.title},"Grammarly isn’t active yet!"),s.createElement(n.M,{clickHandler:e.openAcceptPage},s.createElement("button",{className:o.button},s.createElement("span",{className:o.buttonText},"Activate Grammarly"))));class c extends s.Component{constructor(){super(...arguments),this.openAcceptPage=()=>{(0,r.O)().bgRpc.api.openDataControl()}}render(){return s.createElement("div",{className:(0,a.cs)(o.gButtonPopup,o.newDataControl,this.props.isFlipped&&o.flipped)},s.createElement(n.M,{clickHandler:this.props.remove},s.createElement("button",{className:o.close})),s.createElement(l,{openAcceptPage:this.openAcceptPage}),s.createElement("div",{className:(0,a.cs)(o.popupFooter,this.props.isFlipped&&o.isFlipped)},"▲"))}}},50783:(e,t,i)=>{i.d(t,{w:()=>r});var a=i(5872),n=i(27378),s=i(43398);class r extends n.Component{constructor(e){super(e)}render(){const{institutionName:e,ssoUrl:t}=this.props;return n.createElement("div",{className:(0,a.cs)(s.managedSSOControl,s.settings)},n.createElement("div",{className:s.illustration}),n.createElement("p",{className:s.title},"Grammarly isn’t active yet!"),n.createElement("p",{className:s.text},"To begin using Grammarly, you need to sign in with SSO under the ",n.createElement("b",null,e)," ","organization."),n.createElement("div",{className:s.signInWithSSO},n.createElement("a",{tabIndex:-1,target:"__blank",href:t},"SIGN IN WITH SSO")))}}},46104:(e,t,i)=>{i.d(t,{z:()=>n});var a=i(27378);function n({checkPermissions:e,requestPermissions:t}){const[i,n]=(0,a.useState)(),s=Boolean(i),[r,o]=(0,a.useState)(!1);return{needPermissions:s,requestingPermissions:r,bindSignIn:t=>()=>{s||r||e().then((e=>{e?(n(void 0),t()):n((e=>t))}))},onRequestPermissions:()=>{r||(o(!0),t().then((e=>{o(!1),e&&(n(void 0),null==i||i())})))}}}},51457:(e,t,i)=>{var a=i(54933),n=i(93476)(a);n.push([e.id,"._z3YOv-textBox{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;background:#f9faff;border:1px solid #e7e9f5;box-sizing:border-box;border-radius:4px;padding:10px 8px;overflow-y:auto;cursor:text;width:100%;height:100%;}._z3YOv-textBox:empty:before{font-feature-settings:'ss03' on;font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:14px;line-height:21px;content:attr(data-placeholder)}",""]),n.locals={textBox:"_z3YOv-textBox"},e.exports=n},57618:e=>{e.exports={link:"QgFSd",externalLink:"oGmOe",icon:"i3roU",gmail:"h0anR",outlook:"NM8XU",gdocs:"Y9XfU",spin:"YUQEk"}},34257:e=>{e.exports={progressBarBg:"Hz_iW",progressBar:"JxiOG"}},4135:e=>{e.exports={singleCardAssistant:"a_AQd",singleCardAssistantNativeContentWithPadding:"UVkKt",singleCardAssistantSettingsDoneButton:"khVC8"}},25416:e=>{e.exports={getStartedChecklist:"QE3tb",logo:"DOz7G",title:"CzlXc",progressCaption:"TKilD"}},8460:e=>{e.exports={cardList:"O6x_6",cardListFooterDynamic:"NzU4C",cardListFooterStatic:"kdk1x",cardListFooterAnimate:"CUEf1",upgradeHookWrapper:"fpqSf",assistant:"ziFUs",dragging:"dl2Z_",mainView:"OfKqp"}},71614:e=>{e.exports={emogenieViewOverlayHeader:"saNAB",emogenieViewOverlayHeaderBetaBadge:"J16CK"}},80719:e=>{e.exports={footerButton:"j5lp5",feedbackButton:"_i7kC"}},62661:e=>{e.exports={gbUpsellFooter:"yOr0u",clickableLink:"EfS5Y",icon:"Mmj0G"}},71586:e=>{e.exports={actions_hovered:"FONqd",header:"uDOFr",draggableWrapper:"rjQy5",draggable:"P3jaK",headerActions:"Xtr7I",headerActionBtnProofitIcon:"b5yo3",headerActionBtnGoalsIcon:"pl7ek",logoscore_fadein:"tUJui",fadein:"AQJV1",logoscore_fadeout:"chyj0",fadeout:"ooxFJ",logo_score:"RLHcp",spin:"g0xkj"}},19060:e=>{e.exports={insight:"vaGfd",insight__inline_icon:"M5fov",insight__inline_text:"NodQp"}},61082:e=>{e.exports={predictions:"zAvBV",predictions__header:"p82xz",predictions__card:"ZuLGb",counterContainer:"KwKbD",predictions__zero_text:"IVxiZ",predictions__off_brand:"HrjP2"}},89848:e=>{e.exports={relatedSuggestionsTitle:"AP_Yd"}},32613:e=>{e.exports={viewOverlay:"CpaDC",content:"BWu_L",footer:"Nfocm",viewOverlayGoBack:"EBOfD",defaultViewOverlayPanel:"TFghg",gradientViewOverlayPanel:"a2q6L",proofitViewOverlayPanel:"vCO8v",defaultViewOverlayHeader:"U8zS8",defaultViewOverlayContent:"Z9WSl",gradientViewOverlayContent:"sxmDB",proofitViewOverlayContent:"_nDhb",logo:"OtV3S",proofitViewOverlayHeader:"HuIOP",proofitViewOverlayHeaderBetaBadge:"PUb7a"}},95774:e=>{e.exports={viewOverlay:"p5YK3",content:"werFw",footer:"xehnL",viewOverlayGoBack:"_ntJi",defaultViewOverlayPanel:"R1hmk",gradientViewOverlayPanel:"_l8vR",helpPanel:"tOLsx",defaultViewOverlayHeader:"bUS_N",defaultViewOverlayContent:"bkYBE",gradientViewOverlayContent:"aFjy5",logo:"YI_fU",helpPanelContent:"zWni2",helpBanner:"uyrqp",helpBannerImage:"i3mrJ",helpHeader:"EcAZk",helpBannerMessage:"RaY8U",helpContent:"ZgpAO",heatmap:"AowV7"}},64108:e=>{e.exports={viewOverlay:"r4eDc",content:"BaOKj",footer:"UFbAw",viewOverlayGoBack:"VVZPH",defaultViewOverlayPanel:"K9tay",gradientViewOverlayPanel:"JA0ux",defaultViewOverlayHeader:"bIdOw",defaultViewOverlayContent:"Qr2H0",gradientViewOverlayContent:"W7xRU",logo:"waSFs",cardList:"ujtTF",headerGroup:"PUcC9",questionMarkButton:"eN7Lb",questionMarkIcon:"kD3Tf",summaryWrapper:"mXo_B",message:"fe65j",relatedSuggestionsTitle:"OJegx"}},89433:e=>{e.exports={viewOverlay:"snX4b",content:"fSzZu",footer:"Y8cpA",viewOverlayGoBack:"yEi_t",defaultViewOverlayPanel:"aPyGs",gradientViewOverlayPanel:"gbwcW",settingsViewOverlayPanel:"Rudrm",defaultViewOverlayHeader:"_tUap",defaultViewOverlayContent:"Cs_VJ",gradientViewOverlayContent:"c4WjP",settingsViewOverlayContent:"ZtK1f",logo:"_kPSX",settingsViewDoneButton:"xVshA"}},10966:e=>{e.exports={summary_heading:"NyKz4",summary_wrapper:"WOt5T",summary_fadein:"dScjC",fadein:"ZzgVz",summary_fadeout:"bXfze",fadeout:"BiyF1"}},83350:e=>{e.exports={viewOverlay:"Gsb9P",content:"_HIip",footer:"EZP9j",viewOverlayGoBack:"oEefg",defaultViewOverlayPanel:"jAeU3",gradientViewOverlayPanel:"rIqVr",defaultViewOverlayHeader:"h1FQ0",defaultViewOverlayContent:"YsrUq",gradientViewOverlayContent:"Nc28X",logo:"cMPwC"}},22376:e=>{e.exports={compactSuccessLens:"lP637",compactSuccessLensContainer:"FK4Ma"}},87737:e=>{e.exports={diamondIcon:"gG9CW"}},53834:e=>{e.exports={content:"L0IlD",paragraph:"Orx96",header:"XpiGS",flag:"hYeJR",flagTop:"Te_me",flagBottom:"pHlXZ",title:"ruQOD"}},88910:e=>{e.exports={learnMoreButton:"nUL6q"}},45740:e=>{e.exports={circleProgress:"IkNxu",circleText:"FllLk",card:"BSki0",header:"hk0Yc",compact:"cT3ja",normal:"Jxiqr",progressIcon:"fO9lJ",title:"nsBOt",full:"UibYx",progressContainer:"c5ZRH",progressBar:"ZNrvZ",progressValue:"jhBTZ",description:"raiHm"}},57837:e=>{e.exports={cardBody:"mWkWZ",description:"sJhXN",actions:"LCiQQ",lessIcon:"wEufS",minimalDescription:"lUctj",actionsFooter:"fs9Lo",feedbackFooter:"mQkpR",viewMoreButton:"vASf3"}},57561:e=>{e.exports={miniCard:"VI0d0"}},7403:e=>{e.exports={wrapper:"fP89T",popup:"p4cHm",close:"UK1Wy",content:"BZyxI",animation:"DWhKF",title:"nHp6t",subtitle:"gnBKC"}},48162:e=>{e.exports={cardContainer:"m3ECE",cardText:"RT8Ft"}},52856:e=>{e.exports={headerOrFooterWrapper:"Y2H0f"}},27194:e=>{e.exports={cardList:"gV0cS"}},87527:e=>{e.exports={premiumLens:"TFbap"}},56423:e=>{e.exports={successLens:"_NLHO"}},51635:e=>{e.exports={footer:"nFy3z",plagiarismButton:"o_JYq",counterWrapper:"mOddw",counter:"csO1n",counterCheckmarkIcon:"cBKjm"}},95618:e=>{e.exports={defaultHeader:"DTiYT",priorityLensHeader:"sHAVn",head:"TGEx5",headerGroup:"oSvN_",logoIcon:"_4cQZf",logoText:"u1K9J",headerButton:"PpuRF",setGoalsButton:"UuSZX",divider:"NPZsq",lensNavigation:"dBaZB",disabledLensNavigation:"hr85r",prioritySwitchWrapper:"iqdfL",prioritySwitchFlatWrapper:"LUmRC"}},67025:e=>{e.exports={header:"ciute",headerGroup:"jzLsQ",logoIcon:"wsajt",closeButton:"z1vrR"}},89631:e=>{e.exports={wrapper:"QzCRj"}},86877:e=>{e.exports={container:"qfD5D",baseGrid:"iPCw8",bottomLeft:"PuuHv",bottomRight:"r_Ycp",top:"qu1VK",notificationWrapper:"cSTPv"}},91529:e=>{e.exports={sidebarContainer:"OUOwE",sidebarContent:"etRrJ"}},34238:e=>{e.exports={learnMore:"Z_tYK",learnMoreTitle:"wCofj",learnMoreExample:"YSZy0",learnMoreExampleIconAndTitle:"W3Msk",learnMoreExampleIcon:"q0k69",learnMoreExampleCorrectIcon:"TsvDV",learnMoreExampleIncorrectIcon:"DBJgs",learnMoreExampleTitle:"_5iVIT",learnMoreExampleTextItalic:"o84Ep",learnMoreExampleTextMarginLeft:"cTK8V",spin:"DHpIM"}},51915:e=>{e.exports={container:"qAay9"}},26123:e=>{e.exports={singleCardAssistant:"bJPRn",singleCardAssistantHeader:"Zoc_S",singleCardAssistantHeaderDraggable:"ZX00_",singleCardAssistantContent:"p9dQN",singleCardAssistantContentWithPadding:"UAH4K",singleCardAssistantFooter:"VnTOq",singleCardAssistantFooterText:"BgeT4",singleCardAssistantFooterButtonIcon:"kBU3t",spin:"HCSMj"}},50307:e=>{e.exports={emogenieReport:"IPEgR",emogenieReportHeader:"ugGrL",emogenieReportHeaderTitle:"x3FcP",emogenieReportItems:"SwRPf",emogenieReportToneSuggestionInfo:"vLVNY",emogenieReportToneSuggestionInfoEmojiAndTitle:"VinN1",emogenieReportToneSuggestionInfoEmoji:"gmfaf"}},18568:e=>{e.exports={emogenieBrandToneInfoIcon:"pcprF",emogenieReportItem:"LXjD_",emogenieBrandToneInfoIconOn:"KIvz3",emogenieBrandToneInfoIconOff:"NDatF",emogenieReportItemEmotion:"AjVJZ",emogenieReportItemEmotionEmojiAndName:"cIE8j",emogenieReportItemEmotionEmoji:"oZZpB",emogenieReportItemEmotionName:"QWYxt",emogenieReportItemEmotionBadgeOrIntensity:"jw4RJ",emogenieReportItemEmotionIntensity:"Ixu7L",emogenieReportItemEmotionIntensityDot:"aFcXw",emogenieReportItemEmotionIntensityDotActive:"xUxza",emogenieReportItemEmotionActionsMenuButton:"q4wIy",emogenieReportItemEmotionActionsMenuIcon:"V5KFq",emogenieReportItemEmootionActionsMenuThumsUpIcon:"UAfpn",emogenieReportItemEmootionActionsMenuThumsDownIcon:"CoUgw",spin:"tmqUv"}},82693:e=>{e.exports={settingsButtonMediumIcon:"jerdC",settingsButtonSmallIcon:"PlOGe",spin:"MH8w4"}},32276:e=>{e.exports={checkboxContainer:"Te37e",checkbox:"mFHkX",checkboxDS:"DdH2q",checkboxChecked:"JhHnz",checkboxCheckmark:"zShXt",spin:"tww6q"}},64826:e=>{e.exports={popoverNotificationMessage:"p0k9e"}},78987:e=>{e.exports={radioGroup:"KAzfW",radioGroupOption:"WkjDU",radioGroupOptionSelected:"onilo"}},49972:e=>{e.exports={proofitRequestFormBtnLoadingSpinner:"IrY6A",spin:"m9t2y"}},20228:e=>{e.exports={proofitHowItWorksSteps:"Unehy",proofitHowItWorksStep:"zMEEz",proofitHowItWorksStepNumberContainer:"EfoqG",proofitHowItWorksStepNumber:"XIDZQ",proofitHowItWorksStepOne:"K5qs8",proofitHowItWorksStepOneNumberContainer:"e4ae6",proofitHowItWorksStepTwo:"P3h_J",proofitHowItWorksStepTwoNumberContainer:"YejA_",proofitHowItWorksStepThree:"FYGwC",proofitHowItWorksStepThreeNumberContainer:"YFsfV"}},79918:e=>{e.exports={proofitRequestForm:"QVI6h",proofitRequestFormImg:"wKuXo",proofitRequestFormTitle:"yNxb3",proofitRequestFormDescription:"vLSn1",proofitRequestFormCostAndTime:"b2RwJ",proofitRequestFormTime:"Bo3xu",proofitRequestFormCostAndTimeTitle:"Cu_3T",proofitRequestFormCostAndTimeSubtitle:"NFy21",proofitRequestFormRequestBtn:"beQX2",proofitRequestFormUnavailableMsg:"JDvub",proofitRequestFormFootnote:"S33xD",proofitRequestFormFootnoteFreeTrial:"SflIX",proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:"HUrVJ",proofitRequestFormPrivacyInfoTitle:"ymDqL",proofitRequestFormPrivacyInfoDescription:"ZqcFq",proofitRequestFormPrivacyInfoDescriptionItem:"iv8f1",proofitRequestFormPrivacyInfoDescriptionItemBulletPoint:"Duc32"}},71636:e=>{e.exports={proofitReviewForm:"SNt2d",proofitReviewFormTitle:"iMzY2",proofitReviewFormDescription:"jvfyf",proofitFeedbackForm:"eY729",proofitDoneButton:"CTbuu"}},36472:e=>{e.exports={scoreRing:"xlRHm",loading:"A_cJy",rotation:"srLo5",scoreText:"KIWW8"}},11056:e=>{e.exports={feedbackFormContainer:"kjElf",feedbackFormContainerAlignCenter:"hkEx2",feedbackFormFields:"Ua5wJ",feedbackFormTitle:"GnQ_a",feedbackFormTextBoxTitle:"kWEW0",feedbackFormLogo:"phQGV",compact:"b7yYp",feedbackFormScore:"ZOSRK",feedbackFormTextBox:"l8New",feedbackFormShareDomainTitle:"Qbnj_",feedbackFormShareDomainCheckbox:"VBCx1",feedbackFormSubmitButton:"tYYGU",feedbackFormSubmitButtonFixOverflowBottomPadding:"Opd8X",feedbackFormSubmitButtonFixOverflowBottomPaddingChild:"QKLT7",feedbackFormSuccessMessageTextContainer:"ARBzt",feedbackFormSuccessMessageIcon:"kJIzg",feedbackFormSuccessMessageTitle:"iXQnf",feedbackFormSuccessMessageSubtitle:"Ydufo",spin:"Vv6WG"}},59467:e=>{e.exports={feedbackFormOption:"sp8vS",feedbackFormOptionIcon:"eH6DL",feedbackFormOptionIconDisheartening:"DhaWh",feedbackFormOptionIconNeutral:"BS_8d",feedbackFormOptionIconSmiling:"dUZNd",spin:"uouSO"}},80162:e=>{e.exports={selected:"Znruy",label:"kmTm1",option:"dRYWx"}},90083:e=>{e.exports={american:"JRPow",australian:"FZNcB",british:"MzB3a",canadian:"_fn3J",indian:"eqgex"}},68365:e=>{e.exports={hover_blocker:"np9cY"}},23700:e=>{e.exports={button:"F35nM",alternative:"q9Q9O",link:"tdfHS"}},73655:e=>{e.exports={wrapper:"Aolfm",heading:"NFFQg",domain:"c3Fd7",description:"LTKQH"}},76134:e=>{e.exports={settingsContent:"C3SN4",fullWidth:"dRfoN",heading:"_HqAa",allSettings:"pUfgB",separator:"vlSkx",settingsLink:"d_ohh",debugMenu:"iovEn",downloadBtn:"u6BF0",timer:"DQHsO"}},88642:e=>{e.exports={heading:"wcViL"}},27732:e=>{e.exports={wrapper:"thWhq",content:"FIMJQ"}},43398:e=>{e.exports={gButtonPopup:"diNpB",newDataControl:"kwuQj",showWrapper:"UUYhD",flipped:"iGBQj",title:"pQCa0",icon:"ylCbI",button:"TufcJ",buttonText:"oE1vN",popupFooter:"rA9f6",isFlipped:"hSt1p",settings:"H5xEt",loginSSOPopup:"dGc8e",text:"jfR06",bold:"K4CWO",link:"UAmjO",secondary:"EXtIt",firstTime:"JpYft",close:"OUiPJ",disable:"_1jcw8",gdocs:"TQdVK",gdocsBeta:"iOLvJ",header:"DsYvE",headerUnavailable:"ewgfQ",cardsIcon:"pNxPP",bubbleArrow:"UUhBD",unavailablePopup:"Lc8St",loginReminder:"H1d0B",permission:"RPuBs",buttonsContainer:"oNYLG",mainButton:"vJMgg",secondaryButton:"yRqtR",onboarding:"QrVo6",chipmunkGButtonCalloutPopup:"wmSgc",closeWrapper:"zd8Dn",containerContents:"_OFkc",container:"A9Cva",containerHeaderDefault:"p2BMe",containerKeyboardQRCodeImageBlock:"z7o3z",qrcode:"byUvC",containerBrandToneImageBlock:"u2hm1",img:"FWo6L",containerSnippetImageBlock:"C4IQI",containerLlamaAdoptionImageBlock:"DQV9Q",containerOwnerActivationImageBlock:"Vw5tG",containerGraduationImageBlock:"pFkGw",containerWritingProgressImageBlock:"phgXA",containerDunningImageBlock:"AW1D4",downgraded:"GNTdE",containerHeaderImageBlock:"VXd7r",containerTitle:"VF3Bz",containerText:"mR_zr",containerButton:"Al3lo",dismiss:"r5cHp",chipmunkGButtonToastPopup:"eJ4pl",chipmunkGButtonToastPopupDark:"dotB_",chipmunkGButtonToastPopupLight:"xBRlb",warningPopup:"HFaC5",btn:"Qq9h5",warning:"DVh7b",ctaBtnGroup:"_FPqK",ctaButton:"u6LqV",later:"ZFbyQ",managedSSOControl:"L1Rzm",illustration:"qESn3",signInWithSSO:"rq8co",signInWithSSO2:"wE0K3"}},22617:e=>{e.exports={select_checkbox:"cIqfV",centered:"yfVcZ",select_children:"lRjE2",beta:"wvPnO",new:"QHuhM",alpha:"cThIl",checkbox:"F2Xdn",checkbox_check:"QRTZ2",on:"jzBvy",off:"HVvmV",checkbox_check_round:"qeH5k",checkbox_control_wrapper:"UMoTL",grayOut:"Ta6y3",on_off:"c2IdT",disabled:"KQoMv",setting_item:"HfRCc"}},1731:e=>{e.exports={line:"OBGgK",disabled:"SvddX",dialectPicker:"QNfvS"}},82385:e=>{e.exports={"footer-ios":"IfRTb"}},82782:e=>{e.exports={footer:"lc1t2",footer_btn:"yBxv8",footer_icon_doc:"OstiH",footer_icon_home:"_0UW4",signUpFooter:"GadQB",title:"dDVX1",subtitle:"PUfp1"}},50756:e=>{e.exports={container:"FaEBj",containerWithBackground:"W15V7",content:"lof2m",title:"R97wU",button:"Udw_0"}},71732:e=>{e.exports={"header-ios":"icRoX",logo:"KpttL",mark:"Ao1Jt",type:"cyoK9",link:"yYlif"}},98158:e=>{e.exports={header:"Coe_1",delimiter:"PA63z",logo:"oGOoy",logoClassic:"aPtJ9",logoUASupport:"omLuV",business:"rB2on",chrome:"pSBI3",safari:"dRfwK",firefox:"OClRS",edge:"csjcb"}},76547:e=>{e.exports={windows:"ScRGR",setting_item:"byTue",fixing:"tGQgu",thin_text:"Zw2iF",footer:"VarAw",gr_popup_settings:"sCOqq",iOS:"xw90P",footer_btn:"dFcxY",short_border:"GPdi3",top:"a8_HB",upgraded:"fPnHa",content:"eJi6K",since:"KcwUv",business:"HH96k",edu:"C_xJH",my_grammarly:"TPdm3",new_document:"b5rRu",unsupported_site:"FV6cP",unsupported_item:"kI6Es",unsupported_title:"TvJkj",domain:"mbOuw",domain_in_details:"HyZRA",unsupported_temporary:"aeiHl",unsupported_permanently:"e63AG",unsupported_grammarly:"SK755",diamond:"z0724",userPanel:"bG2GY",email:"U4qfE",link:"Vrj67",blue:"Dstaa",edc_stripe:"GEFvM",line:"_o71L",not_supported:"Z9hzt",site_switcher:"LXeMc",upgrade:"BAl_v",def_switcher:"aVnnG",on:"CcnIo",off:"LZuFk",favicon:"L5Hrq",centered:"T0qTK",summary:"tuG8u",upgrade_title:"KRcNq",settingsContentWrapper:"OeKpx",settingsContent:"AwQr3",withBackground:"JRZMC",llamaTitle:"WnzAW",llamaDescription:"dDIsV"}},4278:e=>{e.exports={signin:"DY97f",permission:"YmV8G",iOS:"C_ZC9",content:"pnCIV",business:"bWl7l",banner:"BsNFR",gb_banner:"DYRWB",descr:"QeBga",descr_title:"alDiN",gb_descr:"PAVix",buttonWrapper:"kd4gH",auth_button:"XckiX",secondary_text:"yJm2L",footer:"eLtsk",signin_link:"FTpN8",descr_text:"whaF8"}},63089:e=>{e.exports={line:"dXumf",content:"IJam9",upgrade:"SRXN2"}},20377:e=>{e.exports={gr_popup_unsupported:"mNplt",iOS:"dknvA",line:"bbXMt",unsupported_site:"isHIc",unsupported_item:"bsr7c",warning:"QaV6u",unsupported_title:"xAVeT",domain:"QAQlK",unsupported_grammarly:"ndOUg",ok:"VIvGU",unsupported_grammarly_text:"t78jM"}},8375:e=>{e.exports={}}}]);